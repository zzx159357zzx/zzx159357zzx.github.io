{"meta":{"title":"xiaOz's blog","subtitle":null,"description":null,"author":"xiaOz","url":"https://blog.xiaoz.site","root":"/"},"pages":[{"title":"404 Not Found","date":"2019-09-06T06:15:25.718Z","updated":"2019-09-06T06:15:25.718Z","comments":true,"path":"404.html","permalink":"https://blog.xiaoz.site/404.html","excerpt":"","text":"404 Not Found **å¾ˆæŠ±æ­‰ï¼Œæ‚¨è®¿é—®çš„é¡µé¢ä¸å­˜åœ¨** å¯èƒ½æ˜¯è¾“å…¥åœ°å€æœ‰è¯¯æˆ–è¯¥åœ°å€å·²è¢«åˆ é™¤"},{"title":"å…³äº","date":"2019-09-06T06:15:25.725Z","updated":"2019-09-06T06:15:25.725Z","comments":true,"path":"about/index.html","permalink":"https://blog.xiaoz.site/about/index.html","excerpt":"","text":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; å‰ç«¯ç å†œä¸€æšï¼Œèœçš„æŠ è„šï¼Œä½†æ˜¯åœ¨ä¸æ–­åœ°å­¦ä¹ è¿›æ­¥ing ***"},{"title":"æ‰€æœ‰åˆ†ç±»","date":"2019-09-06T06:15:25.726Z","updated":"2019-09-06T06:15:25.726Z","comments":true,"path":"categories/index.html","permalink":"https://blog.xiaoz.site/categories/index.html","excerpt":"","text":""},{"title":"","date":"2019-09-06T06:15:25.727Z","updated":"2019-09-06T06:15:25.727Z","comments":true,"path":"doc/index.html","permalink":"https://blog.xiaoz.site/doc/index.html","excerpt":"","text":""},{"title":"æ‰€æœ‰æ ‡ç­¾","date":"2019-09-06T06:15:25.727Z","updated":"2019-09-06T06:15:25.727Z","comments":true,"path":"tags/index.html","permalink":"https://blog.xiaoz.site/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"xampp-mysql","slug":"xampp-mysql","date":"2019-09-06T06:19:40.000Z","updated":"2019-09-06T06:21:24.451Z","comments":true,"path":"2019/09/06/xampp-mysql/","link":"","permalink":"https://blog.xiaoz.site/2019/09/06/xampp-mysql/","excerpt":"","text":"xampp ä¸‹ mysql åˆå§‹å¯†ç çš„ä¿®æ”¹é¦–å…ˆï¼Œæˆ‘ä»¬ç‚¹å‡» xampp ä¸­çš„ shell æŒ‰é’®ï¼Œç™»é™† mysqlï¼šc:&gt;mysql -u root -p ï¼Œç„¶åå¯†ç ç›´æ¥å›è½¦ã€‚ ç°åœ¨ï¼Œåº”è¯¥è¿›å…¥ mysql äº†ï¼Œè¾“å…¥ä¸‹é¢è¿™æ¡æŒ‡ä»¤ï¼š 1mysql&gt;set password for 'root'@'localhost'=password('newpasswd');","categories":[{"name":"learn","slug":"learn","permalink":"https://blog.xiaoz.site/categories/learn/"}],"tags":[{"name":"tips","slug":"tips","permalink":"https://blog.xiaoz.site/tags/tips/"}]},{"title":"æ·±å…¥æµ…å‡º React Hooks","slug":"react-hook","date":"2019-06-04T01:22:52.000Z","updated":"2019-09-06T06:15:25.724Z","comments":true,"path":"2019/06/04/react-hook/","link":"","permalink":"https://blog.xiaoz.site/2019/06/04/react-hook/","excerpt":"ç›´æ’­å›æ”¾é“¾æ¥ï¼šäº‘æ –ç¤¾åŒº (@x-cold) React Hooks æ˜¯ä»€ä¹ˆï¼ŸHooks é¡¾åæ€ä¹‰ï¼Œå­—é¢æ„ä¹‰ä¸Šæ¥è¯´å°±æ˜¯ React é’©å­çš„æ¦‚å¿µã€‚é€šè¿‡ä¸€ä¸ª case æˆ‘ä»¬å¯¹ React Hooks å…ˆæœ‰ä¸€ä¸ªç¬¬ä¸€å°è±¡ã€‚ å‡è®¾ç°åœ¨è¦å®ç°ä¸€ä¸ªè®¡æ•°å™¨çš„ç»„ä»¶ã€‚å¦‚æœä½¿ç”¨ç»„ä»¶åŒ–çš„æ–¹å¼ï¼Œæˆ‘ä»¬éœ€è¦åšçš„äº‹æƒ…ç›¸å¯¹æ›´å¤šä¸€äº›ï¼Œæ¯”å¦‚è¯´å£°æ˜ stateï¼Œç¼–å†™è®¡æ•°å™¨çš„æ–¹æ³•ç­‰ï¼Œè€Œä¸”éœ€è¦ç†è§£çš„æ¦‚å¿µå¯èƒ½æ›´å¤šä¸€äº›ï¼Œæ¯”å¦‚ Javascript çš„ç±»çš„æ¦‚å¿µï¼Œthis ä¸Šä¸‹æ–‡çš„æŒ‡å‘ç­‰ã€‚ ç¤ºä¾‹ 12345678910111213141516171819202122232425262728293031import React, &#123; Component &#125; from 'react';import ReactDOM from 'react-dom';class Counter extends React.Component &#123; state = &#123; count: 0 &#125; countUp = () =&gt; &#123; const &#123; count &#125; = this.state; this.setState(&#123; count: count + 1 &#125;); &#125; countDown = () =&gt; &#123; const &#123; count &#125; = this.state; this.setState(&#123; count: count - 1 &#125;); &#125; render() &#123; const &#123; count &#125; = this.state; return ( &lt;div&gt; &lt;button onClick=&#123;this.countUp&#125;&gt;+&lt;/button&gt; &lt;h1&gt;&#123;count&#125;&lt;/h1&gt; &lt;button onClick=&#123;this.countDown&#125;&gt;-&lt;/button&gt; &lt;/div&gt; ) &#125;&#125;ReactDOM.render(&lt;Counter /&gt;, document.getElementById('root')); ä½¿ç”¨ React Hooksï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ã€‚","text":"ç›´æ’­å›æ”¾é“¾æ¥ï¼šäº‘æ –ç¤¾åŒº (@x-cold) React Hooks æ˜¯ä»€ä¹ˆï¼ŸHooks é¡¾åæ€ä¹‰ï¼Œå­—é¢æ„ä¹‰ä¸Šæ¥è¯´å°±æ˜¯ React é’©å­çš„æ¦‚å¿µã€‚é€šè¿‡ä¸€ä¸ª case æˆ‘ä»¬å¯¹ React Hooks å…ˆæœ‰ä¸€ä¸ªç¬¬ä¸€å°è±¡ã€‚ å‡è®¾ç°åœ¨è¦å®ç°ä¸€ä¸ªè®¡æ•°å™¨çš„ç»„ä»¶ã€‚å¦‚æœä½¿ç”¨ç»„ä»¶åŒ–çš„æ–¹å¼ï¼Œæˆ‘ä»¬éœ€è¦åšçš„äº‹æƒ…ç›¸å¯¹æ›´å¤šä¸€äº›ï¼Œæ¯”å¦‚è¯´å£°æ˜ stateï¼Œç¼–å†™è®¡æ•°å™¨çš„æ–¹æ³•ç­‰ï¼Œè€Œä¸”éœ€è¦ç†è§£çš„æ¦‚å¿µå¯èƒ½æ›´å¤šä¸€äº›ï¼Œæ¯”å¦‚ Javascript çš„ç±»çš„æ¦‚å¿µï¼Œthis ä¸Šä¸‹æ–‡çš„æŒ‡å‘ç­‰ã€‚ ç¤ºä¾‹ 12345678910111213141516171819202122232425262728293031import React, &#123; Component &#125; from 'react';import ReactDOM from 'react-dom';class Counter extends React.Component &#123; state = &#123; count: 0 &#125; countUp = () =&gt; &#123; const &#123; count &#125; = this.state; this.setState(&#123; count: count + 1 &#125;); &#125; countDown = () =&gt; &#123; const &#123; count &#125; = this.state; this.setState(&#123; count: count - 1 &#125;); &#125; render() &#123; const &#123; count &#125; = this.state; return ( &lt;div&gt; &lt;button onClick=&#123;this.countUp&#125;&gt;+&lt;/button&gt; &lt;h1&gt;&#123;count&#125;&lt;/h1&gt; &lt;button onClick=&#123;this.countDown&#125;&gt;-&lt;/button&gt; &lt;/div&gt; ) &#125;&#125;ReactDOM.render(&lt;Counter /&gt;, document.getElementById('root')); ä½¿ç”¨ React Hooksï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ã€‚ ç¤ºä¾‹ 123456789101112131415import React, &#123; useState &#125; from 'react';import ReactDOM from 'react-dom';function Counter() &#123; const [count, setCount] = useState(0); return ( &lt;div&gt; &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;+&lt;/button&gt; &lt;h1&gt;&#123;count&#125;&lt;/h1&gt; &lt;button onClick=&#123;() =&gt; setCount(count - 1)&#125;&gt;-&lt;/button&gt; &lt;/div&gt; )&#125;ReactDOM.render(&lt;Counter /&gt;, document.getElementById('root')); é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œæ˜¾è€Œæ˜“è§çš„æ˜¯ React Hooks æä¾›äº†ä¸€ç§ç®€æ´çš„ã€å‡½æ•°å¼ï¼ˆFPï¼‰çš„ç¨‹åºé£æ ¼ï¼Œé€šè¿‡çº¯å‡½æ•°ç»„ä»¶å’Œå¯æ§çš„æ•°æ®æµæ¥å®ç°çŠ¶æ€åˆ° UI çš„äº¤äº’ï¼ˆMVVMï¼‰ã€‚ Hooks API Basic Hooks useState useEffect useContext Additional Hooks useReducer useCallback useMemo useRef useImperativeHandle useLayoutEffect useDebugValue useStateuseState æ˜¯æœ€åŸºæœ¬çš„ APIï¼Œå®ƒä¼ å…¥ä¸€ä¸ªåˆå§‹å€¼ï¼Œæ¯æ¬¡å‡½æ•°æ‰§è¡Œéƒ½èƒ½æ‹¿åˆ°æ–°å€¼ã€‚ 123456789101112131415import React, &#123; useState &#125; from 'react';import ReactDOM from 'react-dom';function Counter() &#123; const [count, setCount] = useState(0); return ( &lt;div&gt; &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;+&lt;/button&gt; &lt;h1&gt;&#123;count&#125;&lt;/h1&gt; &lt;button onClick=&#123;() =&gt; setCount(count - 1)&#125;&gt;-&lt;/button&gt; &lt;/div&gt; )&#125;ReactDOM.render(&lt;Counter /&gt;, document.getElementById('root')); éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€šè¿‡ useState å¾—åˆ°çš„çŠ¶æ€ countï¼Œåœ¨ Counter ç»„ä»¶ä¸­çš„è¡¨ç°ä¸ºä¸€ä¸ªå¸¸é‡ï¼Œæ¯ä¸€æ¬¡é€šè¿‡ setCount è¿›è¡Œä¿®æ”¹åï¼Œåˆé‡æ–°é€šè¿‡ useState è·å–åˆ°ä¸€ä¸ªæ–°çš„å¸¸é‡ã€‚ useReduceruseReducer å’Œ useState å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼Œéœ€è¦å¤–ç½®å¤–ç½® reducer (å…¨å±€)ï¼Œé€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥å¯¹å¤šä¸ªçŠ¶æ€åŒæ—¶è¿›è¡Œæ§åˆ¶ã€‚ä»”ç»†ç«¯è¯¦èµ·æ¥ï¼Œå…¶å®è·Ÿ redux ä¸­çš„æ•°æ®æµçš„æ¦‚å¿µéå¸¸æ¥è¿‘ã€‚ 123456789101112131415161718192021222324import &#123; useState, useReducer &#125; from 'react';import ReactDOM from 'react-dom';function reducer(state, action) &#123; switch (action.type) &#123; case 'up': return &#123; count: state.count + 1 &#125;; case 'down': return &#123; count: state.count - 1 &#125;; &#125;&#125;function Counter() &#123; const [state, dispatch] = useReducer(reducer, &#123; count: 1 &#125;) return ( &lt;div&gt; &#123;state.count&#125; &lt;button onClick=&#123;() =&gt; dispatch(&#123; type: 'up' &#125;)&#125;&gt;+&lt;/button&gt; &lt;button onClick=&#123;() =&gt; dispatch(&#123; type: 'down' &#125;)&#125;&gt;+&lt;/button&gt; &lt;/div&gt; );&#125;ReactDOM.render(&lt;Counter /&gt;, document.getElementById('root')); useEffectä¸€ä¸ªè‡³å…³é‡è¦çš„ Hooks APIï¼Œé¡¾åæ€ä¹‰ï¼ŒuseEffect æ˜¯ç”¨äºå¤„ç†å„ç§çŠ¶æ€å˜åŒ–é€ æˆçš„å‰¯ä½œç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰åœ¨ç‰¹å®šçš„æ—¶åˆ»ï¼Œæ‰ä¼šæ‰§è¡Œçš„é€»è¾‘ã€‚ 123456789101112131415161718192021222324252627import &#123; useState, useEffect &#125; from 'react';import ReactDOM from 'react-dom';function Example() &#123; const [count, setCount] = useState(0); // =&gt; componentDidMount/componentDidUpdate useEffect(() =&gt; &#123; // update document.title = `You clicked $&#123;count&#125; times`; // =&gt; componentWillUnMount return function cleanup() &#123; document.title = 'app'; &#125; &#125;, [count]); return ( &lt;div&gt; &lt;p&gt;You clicked &#123;count&#125; times&lt;/p&gt; &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt; Click me &lt;/button&gt; &lt;/div&gt; );&#125;ReactDOM.render(&lt;Example /&gt;, document.getElementById('root')); useMemouseMemo ä¸»è¦ç”¨äºæ¸²æŸ“è¿‡ç¨‹ä¼˜åŒ–ï¼Œä¸¤ä¸ªå‚æ•°ä¾æ¬¡æ˜¯è®¡ç®—å‡½æ•°ï¼ˆé€šå¸¸æ˜¯ç»„ä»¶å‡½æ•°ï¼‰å’Œä¾èµ–çŠ¶æ€åˆ—è¡¨ï¼Œå½“ä¾èµ–çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰ä¼šè§¦å‘è®¡ç®—å‡½æ•°çš„æ‰§è¡Œã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šä¾èµ–ï¼Œåˆ™æ¯ä¸€æ¬¡æ¸²æŸ“è¿‡ç¨‹éƒ½ä¼šæ‰§è¡Œè¯¥è®¡ç®—å‡½æ•°ã€‚ 1const memoizedValue = useMemo(() =&gt; computeExpensiveValue(a, b), [a, b]); 123456789101112131415161718192021222324import &#123; useState, useMemo &#125; from 'react';import ReactDOM from 'react-dom';function Time() &#123; return &lt;p&gt;&#123;Date.now()&#125;&lt;/p&gt;;&#125;function Counter() &#123; const [count, setCount] = useState(0); const memoizedChildComponent = useMemo((count) =&gt; &#123; return &lt;Time /&gt;; &#125;, [count]); return ( &lt;div&gt; &lt;h1&gt;&#123;count&#125;&lt;/h1&gt; &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;+&lt;/button&gt; &lt;div&gt;&#123;memoizedChildComponent&#125;&lt;/div&gt; &lt;/div&gt; );&#125;ReactDOM.render(&lt;Counter /&gt;, document.getElementById('root')); useContextcontext æ˜¯åœ¨å¤–éƒ¨ create ï¼Œå†…éƒ¨ use çš„ stateï¼Œå®ƒå’Œå…¨å±€å˜é‡çš„åŒºåˆ«åœ¨äºï¼Œå¦‚æœå¤šä¸ªç»„ä»¶åŒæ—¶ useContextï¼Œé‚£ä¹ˆè¿™äº›ç»„ä»¶éƒ½ä¼š rerenderï¼Œå¦‚æœå¤šä¸ªç»„ä»¶åŒæ—¶ useState åŒä¸€ä¸ªå…¨å±€å˜é‡ï¼Œåˆ™åªæœ‰è§¦å‘ setState çš„å½“å‰ç»„ä»¶ rerenderã€‚ ç¤ºä¾‹-æœªä½¿ç”¨ useContext 123456789101112131415161718192021222324252627282930313233343536373839404142import &#123; useState, useContext, createContext &#125; from 'react';import ReactDOM from 'react-dom';// 1. ä½¿ç”¨ createContext åˆ›å»ºä¸Šä¸‹æ–‡const UserContext = new createContext();// 2. åˆ›å»º Providerconst UserProvider = props =&gt; &#123; let [username, handleChangeUsername] = useState(''); return ( &lt;UserContext.Provider value=&#123;&#123; username, handleChangeUsername &#125;&#125;&gt; &#123;props.children&#125; &lt;/UserContext.Provider&gt; );&#125;;// 3. åˆ›å»º Consumerconst UserConsumer = UserContext.Consumer;// 4. ä½¿ç”¨ Consumer åŒ…è£¹ç»„ä»¶const Pannel = () =&gt; ( &lt;UserConsumer&gt; &#123;(&#123; username, handleChangeUsername &#125;) =&gt; ( &lt;div&gt; &lt;div&gt;user: &#123;username&#125;&lt;/div&gt; &lt;input onChange=&#123;e =&gt; handleChangeUsername(e.target.value)&#125; /&gt; &lt;/div&gt; )&#125; &lt;/UserConsumer&gt;);const Form = () =&gt; &lt;Pannel /&gt;;const App = () =&gt; ( &lt;div&gt; &lt;UserProvider&gt; &lt;Form /&gt; &lt;/UserProvider&gt; &lt;/div&gt;);ReactDOM.render(&lt;App /&gt;, document.getElementById('root')); ç¤ºä¾‹ - ä½¿ç”¨ useContext 12345678910111213141516171819202122232425262728293031323334353637import &#123; useState, useContext, createContext &#125; from 'react';import ReactDOM from 'react-dom';// 1. ä½¿ç”¨ createContext åˆ›å»ºä¸Šä¸‹æ–‡const UserContext = new createContext();// 2. åˆ›å»º Providerconst UserProvider = props =&gt; &#123; let [username, handleChangeUsername] = useState(''); return ( &lt;UserContext.Provider value=&#123;&#123; username, handleChangeUsername &#125;&#125;&gt; &#123;props.children&#125; &lt;/UserContext.Provider&gt; );&#125;;const Pannel = () =&gt; &#123; const &#123; username, handleChangeUsername &#125; = useContext(UserContext); // 3. ä½¿ç”¨ Context return ( &lt;div&gt; &lt;div&gt;user: &#123;username&#125;&lt;/div&gt; &lt;input onChange=&#123;e =&gt; handleChangeUsername(e.target.value)&#125; /&gt; &lt;/div&gt; );&#125;;const Form = () =&gt; &lt;Pannel /&gt;;const App = () =&gt; ( &lt;div&gt; &lt;UserProvider&gt; &lt;Form /&gt; &lt;/UserProvider&gt; &lt;/div&gt;);ReactDOM.render(&lt;App /&gt;, document.getElementById('root')); useRefuseRef è¿”å›ä¸€ä¸ªå¯å˜çš„ ref å¯¹è±¡ï¼Œå…¶ .current å±æ€§åˆå§‹åŒ–ä¸ºä¼ é€’çš„å‚æ•°ï¼ˆinitialValueï¼‰ã€‚è¿”å›çš„å¯¹è±¡å°†æŒç»­æ•´ä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€‚äº‹å®ä¸Š useRef æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„ APIï¼Œè®¸å¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ä¿å­˜ä¸€äº›æ”¹å˜çš„ä¸œè¥¿ï¼Œå®ƒä¼šæ´¾ä¸Šå¤§ç”¨åœºçš„ã€‚ ç¤ºä¾‹ 12345678910111213function TextInputWithFocusButton() &#123; const inputEl = useRef(null); const onButtonClick = () =&gt; &#123; // `current` points to the mounted text input element inputEl.current.focus(); &#125;; return ( &lt;&gt; &lt;input ref=&#123;inputEl&#125; type=\"text\" /&gt; &lt;button onClick=&#123;onButtonClick&#125;&gt;Focus the input&lt;/button&gt; &lt;/&gt; );&#125; React çŠ¶æ€å…±äº«æ–¹æ¡ˆè¯´åˆ°çŠ¶æ€å…±äº«ï¼Œæœ€ç®€å•å’Œç›´æ¥çš„æ–¹å¼å°±æ˜¯é€šè¿‡ props é€çº§è¿›è¡ŒçŠ¶æ€çš„ä¼ é€’ï¼Œè¿™ç§æ–¹å¼è€¦åˆäºç»„ä»¶çš„çˆ¶å­å…³ç³»ï¼Œä¸€æ—¦ç»„ä»¶åµŒå¥—ç»“æ„å‘ç”Ÿå˜åŒ–ï¼Œå°±éœ€è¦é‡æ–°ç¼–å†™ä»£ç ï¼Œç»´æŠ¤æˆæœ¬éå¸¸æ˜‚è´µã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå®˜æ–¹æ¨å‡ºäº†å„ç§æ–¹æ¡ˆæ¥è§£å†³çŠ¶æ€å…±äº«å’Œä»£ç å¤ç”¨çš„é—®é¢˜ã€‚ MixinsReact ä¸­ï¼Œåªæœ‰é€šè¿‡ createClass åˆ›å»ºçš„ç»„ä»¶æ‰èƒ½ä½¿ç”¨ mixinsã€‚è¿™ç§é«˜è€¦åˆï¼Œä¾èµ–éš¾ä»¥æ§åˆ¶ï¼Œå¤æ‚åº¦é«˜çš„æ–¹å¼éšç€ ES6 çš„æµªæ½®é€æ¸æ·¡å‡ºäº†å†å²èˆå°ã€‚ HOCé«˜é˜¶ç»„ä»¶æºäºå‡½æ•°å¼ç¼–ç¨‹ï¼Œç”±äº React ä¸­çš„ç»„ä»¶ä¹Ÿå¯ä»¥è§†ä¸ºå‡½æ•°ï¼ˆç±»ï¼‰ï¼Œå› æ­¤å¤©ç”Ÿå°±å¯ä»¥é€šè¿‡ HOC çš„æ–¹å¼æ¥å®ç°ä»£ç å¤ç”¨ã€‚å¯ä»¥é€šè¿‡å±æ€§ä»£ç†å’Œåå‘ç»§æ‰¿æ¥å®ç°ï¼ŒHOC å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ“æ§æ¸²æŸ“çš„ç»“æœï¼Œä¹Ÿå¯ä»¥å¯¹ç»„ä»¶çš„ props / state è¿›è¡Œæ“ä½œï¼Œä»è€Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œå¤æ‚çš„ä»£ç é€»è¾‘å¤ç”¨ã€‚ 12345678910111213141516171819202122232425262728293031323334import React from 'react';import PropTypes from 'prop-types';// å±æ€§ä»£ç†class Show extends React.Component &#123; static propTypes = &#123; children: PropTypes.element, visible: PropTypes.bool, &#125;; render() &#123; const &#123; visible, children &#125; = this.props; return visible ? children : null; &#125;&#125;// åå‘ç»§æ‰¿function Show2(WrappedComponent) &#123; return class extends WrappedComponent &#123; render() &#123; if (this.props.visible === false) &#123; return null; &#125; else &#123; return super.render(); &#125; &#125; &#125;&#125;function App() &#123; return ( &lt;Show visible=&#123;Math.random() &gt; 0.5&#125;&gt;hello&lt;/Show&gt; );&#125; Redux ä¸­çš„çŠ¶æ€å¤ç”¨æ˜¯ä¸€ç§å…¸å‹çš„ HOC çš„å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ compose æ¥å°†æ•°æ®ç»„è£…åˆ°ç›®æ ‡ç»„ä»¶ä¸­ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥é€šè¿‡è£…é¥°å™¨çš„æ–¹å¼è¿›è¡Œå¤„ç†ã€‚ 12345678910111213import React from 'react';import &#123; connect &#125; from 'react-redux';// use decorator@connect(state =&gt; (&#123; name: state.user.name &#125;))class App extends React.Component&#123; render() &#123; return &lt;div&gt;hello, &#123;this.props.name&#125;&lt;/div&gt; &#125;&#125;// use composeconnect((state) =&gt; (&#123; name: state.user.name &#125;))(App); Render Propsæ˜¾è€Œæ˜“è§ï¼ŒrenderProps å°±æ˜¯ä¸€ç§å°† render æ–¹æ³•ä½œä¸º props ä¼ é€’åˆ°å­ç»„ä»¶çš„æ–¹æ¡ˆï¼Œç›¸æ¯” HOC çš„æ–¹æ¡ˆï¼ŒrenderProps å¯ä»¥ä¿æŠ¤åŸæœ‰çš„ç»„ä»¶å±‚æ¬¡ç»“æ„ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940import React from 'react';import ReactDOM from 'react-dom';import PropTypes from 'prop-types';// ä¸ HOC ä¸åŒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…·æœ‰ render prop çš„æ™®é€šç»„ä»¶æ¥å…±äº«ä»£ç class Mouse extends React.Component &#123; static propTypes = &#123; render: PropTypes.func.isRequired &#125; state = &#123; x: 0, y: 0 &#125;; handleMouseMove = (event) =&gt; &#123; this.setState(&#123; x: event.clientX, y: event.clientY &#125;); &#125; render() &#123; return ( &lt;div style=&#123;&#123; height: '100%' &#125;&#125; onMouseMove=&#123;this.handleMouseMove&#125;&gt; &#123;this.props.render(this.state)&#125; &lt;/div&gt; ); &#125;&#125;function App() &#123; return ( &lt;div style=&#123;&#123; height: '100%' &#125;&#125;&gt; &lt;Mouse render=&#123;(&#123; x, y &#125;) =&gt; ( // render prop ç»™äº†æˆ‘ä»¬æ‰€éœ€è¦çš„ state æ¥æ¸²æŸ“æˆ‘ä»¬æƒ³è¦çš„ &lt;h1&gt;The mouse position is (&#123;x&#125;, &#123;y&#125;)&lt;/h1&gt; )&#125;/&gt; &lt;/div&gt; );&#125;ReactDOM.render(&lt;App/&gt;, document.getElementById('root')); Hooksé€šè¿‡ç»„åˆ Hooks API å’Œ React å†…ç½®çš„ Contextï¼Œä»å‰é¢çš„ç¤ºä¾‹å¯ä»¥çœ‹åˆ°é€šè¿‡ Hook è®©ç»„ä»¶ä¹‹é—´çš„çŠ¶æ€å…±äº«æ›´æ¸…æ™°å’Œç®€å•ã€‚ React Hooks è®¾è®¡ç†å¿µ åŸºæœ¬åŸç† 12345function FunctionalComponent () &#123; const [state1, setState1] = useState(1); const [state2, setState2] = useState(2); const [state3, setState3] = useState(3);&#125; 12345678910&#123; memoizedState: 'foo', next: &#123; memoizedState: 'bar', next: &#123; memoizedState: 'bar', next: null &#125; &#125;&#125; å‡½æ•°å¼è´¯å½»åˆ°åº• capture propså‡½æ•°ç»„ä»¶å¤©ç”Ÿå°±æ˜¯æ”¯æŒ props çš„ï¼ŒåŸºæœ¬ç”¨æ³•ä¸Šå’Œ class ç»„ä»¶æ²¡æœ‰å¤ªå¤§çš„å·®åˆ«ã€‚éœ€è¦æ³¨æ„çš„ä¸¤ä¸ªåŒºåˆ«æ˜¯ï¼š class ç»„ä»¶ props æŒ‚è½½åœ¨ this ä¸Šä¸‹æ–‡ä¸­ï¼Œè€Œå‡½æ•°å¼ç»„ä»¶é€šè¿‡å½¢å‚ä¼ å…¥ï¼› ç”±äºæŒ‚è½½ä½ç½®çš„å·®å¼‚ï¼Œclass ç»„ä»¶ä¸­å¦‚æœ this å‘ç”Ÿäº†å˜åŒ–ï¼Œé‚£ä¹ˆ this.props ä¹Ÿä¼šéšä¹‹æ”¹å˜ï¼›è€Œåœ¨å‡½æ•°ç»„ä»¶é‡Œ props å§‹ç»ˆæ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤éµå®ˆ capture value åŸåˆ™ï¼ˆå³è·å–çš„å€¼å§‹ç»ˆæ˜¯æŸä¸€æ—¶åˆ»çš„ï¼‰ï¼ŒHooks ä¹Ÿéµå¾ªè¿™ä¸ªåŸåˆ™ã€‚ é€šè¿‡ä¸€ä¸ªç¤ºä¾‹æ¥ç†è§£ä¸€ä¸‹ capture valueï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ useRef æ¥è§„é¿ capture valueï¼Œå› ä¸º useRef æ˜¯å¯å˜çš„ã€‚ state class ç»„ä»¶ å‡½æ•°ç»„ä»¶ åˆ›å»ºçŠ¶æ€ this.state = {} useState, useReducer ä¿®æ”¹çŠ¶æ€ this.setState() set function æ›´æ–°æœºåˆ¶ å¼‚æ­¥æ›´æ–°ï¼Œå¤šæ¬¡ä¿®æ”¹åˆå¹¶åˆ°ä¸Šä¸€ä¸ªçŠ¶æ€ï¼Œäº§ç”Ÿä¸€ä¸ªå‰¯æœ¬ åŒæ­¥æ›´æ–°ï¼Œç›´æ¥ä¿®æ”¹ä¸ºç›®æ ‡çŠ¶æ€ çŠ¶æ€ç®¡ç† ä¸€ä¸ª state é›†ä¸­å¼ç®¡ç†å¤šä¸ªçŠ¶æ€ å¤šä¸ª stateï¼Œå¯ä»¥é€šè¿‡ useReducer è¿›è¡ŒçŠ¶æ€åˆå¹¶ï¼ˆæ‰‹åŠ¨ï¼‰ æ€§èƒ½ é«˜ å¦‚æœ useState åˆå§‹åŒ–çŠ¶æ€éœ€è¦é€šè¿‡éå¸¸å¤æ‚çš„è®¡ç®—å¾—åˆ°ï¼Œè¯·ä½¿ç”¨å‡½æ•°çš„å£°æ˜æ–¹å¼ï¼Œå¦åˆ™æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šé‡å¤æ‰§è¡Œ ç”Ÿå‘½å‘¨æœŸ componentDidMount / componentDidUpdate / componentWillUnMount useEffect åœ¨æ¯ä¸€æ¬¡æ¸²æŸ“éƒ½ä¼šè¢«è°ƒç”¨ï¼Œç¨å¾®åŒ…è£…ä¸€ä¸‹å°±å¯ä»¥ä½œä¸ºè¿™äº›ç”Ÿå‘½å‘¨æœŸä½¿ç”¨ï¼› shouldComponentUpdate é€šå¸¸æˆ‘ä»¬ä¼˜åŒ–ç»„ä»¶æ€§èƒ½æ—¶ï¼Œä¼šä¼˜å…ˆé‡‡ç”¨çº¯ç»„ä»¶çš„æ–¹å¼æ¥å‡å°‘å•ä¸ªç»„ä»¶çš„æ¸²æŸ“æ¬¡æ•°ã€‚ 1class Button extends React.PureComponent &#123;&#125; React Hooks ä¸­å¯ä»¥é‡‡ç”¨ useMemo ä»£æ›¿ï¼Œå¯ä»¥å®ç°ä»…åœ¨æŸäº›æ•°æ®å˜åŒ–æ—¶é‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Œç­‰åŒäºè‡ªå¸¦äº† shallowEqual çš„ shouldComponentUpdateã€‚ å¼ºåˆ¶æ¸²æŸ“ forceUpdateç”±äºé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸€æ¬¡ä¿®æ”¹çŠ¶æ€éƒ½ä¼šé€ æˆé‡æ–°æ¸²æŸ“ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªä¸ä½¿ç”¨çš„ set å‡½æ•°æ¥å½“æˆ forceUpdateã€‚ 1const forceUpdate = () =&gt; useState(0)[1]; å®ç°åŸç† åŸºäº Hooksï¼Œå¢å¼º Hooks æ¥ä¸€å¥—ç»„åˆæ‹³å§ï¼ç”±äºæ¯ä¸€ä¸ª Hooks API éƒ½æ˜¯çº¯å‡½æ•°çš„æ¦‚å¿µï¼Œä½¿ç”¨æ—¶æ›´å…³æ³¨è¾“å…¥ (input) å’Œè¾“å‡º (output)ï¼Œå› æ­¤å¯ä»¥æ›´å¥½çš„é€šè¿‡ç»„è£…å‡½æ•°çš„æ–¹å¼ï¼Œå¯¹ä¸åŒç‰¹æ€§çš„åŸºç¡€ Hooks API è¿›è¡Œç»„åˆï¼Œåˆ›é€ æ‹¥æœ‰æ–°ç‰¹æ€§çš„ Hooksã€‚ useState ç»´æŠ¤ç»„ä»¶çŠ¶æ€ useEffect å¤„ç†å‰¯ä½œç”¨ useContext ç›‘å¬ provider æ›´æ–°å˜åŒ– useDidMount12345import &#123; useEffect &#125; from 'react';const useDidMount = fn =&gt; useEffect(() =&gt; fn &amp;&amp; fn(), []);export default useDidMount; useDidUpdate123456789101112131415import &#123; useEffect, useRef &#125; from 'react';const useDidUpdate = (fn, conditions) =&gt; &#123; const didMoutRef = useRef(false); useEffect(() =&gt; &#123; if (!didMoutRef.current) &#123; didMoutRef.current = true; return; &#125; // Cleanup effects when fn returns a function return fn &amp;&amp; fn(); &#125;, conditions);&#125;;export default useDidUpdate useWillUnmountåœ¨è®²åˆ° useEffect æ—¶å·²ç»æåŠè¿‡ï¼Œå…¶å…è®¸è¿”å›ä¸€ä¸ª cleanup å‡½æ•°ï¼Œç»„ä»¶åœ¨å–æ¶ˆæŒ‚è½½æ—¶å°†ä¼šæ‰§è¡Œè¯¥ cleanup å‡½æ•°ï¼Œå› æ­¤ useWillUnmount ä¹Ÿèƒ½è½»æ¾å®ç°~ 12345import &#123; useEffect &#125; from 'react';const useWillUnmount = fn =&gt; useEffect(() =&gt; () =&gt; fn &amp;&amp; fn(), []);export default useWillUnmount; useHoverç¤ºä¾‹ 123456789101112131415// lib/onHover.jsimport &#123; useState &#125; from 'react';const useHover = () =&gt; &#123; const [hovered, set] = useState(false); return &#123; hovered, bind: &#123; onMouseEnter: () =&gt; set(true), onMouseLeave: () =&gt; set(false), &#125;, &#125;;&#125;;export default useHover; 12345678910111213import &#123; useHover &#125; from './lib/onHover.js';function Hover() &#123; const &#123; hovered, bind &#125; = useHover(); return ( &lt;div&gt; &lt;div &#123;...bind&#125;&gt; hovered: &#123;String(hovered)&#125; &lt;/div&gt; &lt;/div&gt; );&#125; useFieldç¤ºä¾‹ 12345678910111213141516171819// lib/useField.jsimport &#123; useState &#125; from 'react';const useField = (initial) =&gt; &#123; const [value, set] = useState(initial); return &#123; value, set, reset: () =&gt; set(initial), bind: &#123; value, onChange: e =&gt; set(e.target.value), &#125;, &#125;;&#125;export default useField; 123456789101112131415161718192021222324252627import &#123; useField &#125; from 'lib/useField';function Input &#123; const &#123; value, bind &#125; = useField('Type Here...'); return ( &lt;div&gt; input text: &#123;value&#125; &lt;input type=\"text\" &#123;...bind&#125; /&gt; &lt;/div&gt; );&#125;function Select() &#123; const &#123; value, bind &#125; = useField('apple') return ( &lt;div&gt; selected: &#123;value&#125; &lt;select &#123;...bind&#125;&gt; &lt;option value=\"apple\"&gt;apple&lt;/option&gt; &lt;option value=\"orange\"&gt;orange&lt;/option&gt; &lt;/select&gt; &lt;/div&gt; );&#125; æ³¨æ„äº‹é¡¹ Hook çš„ä½¿ç”¨èŒƒå›´ï¼šå‡½æ•°å¼çš„ React ç»„ä»¶ä¸­ã€è‡ªå®šä¹‰çš„ Hook å‡½æ•°é‡Œï¼› Hook å¿…é¡»å†™åœ¨å‡½æ•°çš„æœ€å¤–å±‚ï¼Œæ¯ä¸€æ¬¡ useState éƒ½ä¼šæ”¹å˜å…¶ä¸‹æ ‡ (cursor)ï¼ŒReact æ ¹æ®å…¶é¡ºåºæ¥æ›´æ–°çŠ¶æ€ï¼› å°½ç®¡æ¯ä¸€æ¬¡æ¸²æŸ“éƒ½ä¼šæ‰§è¡Œ Hook APIï¼Œä½†æ˜¯äº§ç”Ÿçš„çŠ¶æ€ (state) å§‹ç»ˆæ˜¯ä¸€ä¸ªå¸¸é‡ï¼ˆä½œç”¨åŸŸåœ¨å‡½æ•°å†…éƒ¨ï¼‰ï¼› ç»“è¯­React Hooks æä¾›ä¸ºçŠ¶æ€ç®¡ç†æä¾›äº†æ–°çš„å¯èƒ½æ€§ï¼Œå°½ç®¡æˆ‘ä»¬å¯èƒ½éœ€è¦é¢å¤–å»ç»´æŠ¤ä¸€äº›å†…éƒ¨çš„çŠ¶æ€ï¼Œä½†æ˜¯å¯ä»¥é¿å…é€šè¿‡ renderProps / HOC ç­‰å¤æ‚çš„æ–¹å¼æ¥å¤„ç†çŠ¶æ€ç®¡ç†çš„é—®é¢˜ã€‚Hooks å¸¦æ¥çš„å¥½å¤„å¦‚ä¸‹ï¼š æ›´ç»†ç²’åº¦çš„ä»£ç å¤ç”¨ï¼Œå¹¶ä¸”ä¸ä¼šäº§ç”Ÿè¿‡å¤šçš„å‰¯ä½œç”¨ å‡½æ•°å¼ç¼–ç¨‹é£æ ¼ï¼Œä»£ç æ›´ç®€æ´ï¼ŒåŒæ—¶é™ä½äº†ä½¿ç”¨å’Œç†è§£é—¨æ§› å‡å°‘ç»„ä»¶åµŒå¥—å±‚æ•° ç»„ä»¶æ•°æ®æµå‘æ›´æ¸…æ™° äº‹å®ä¸Šï¼Œé€šè¿‡å®šåˆ¶å„ç§åœºæ™¯ä¸‹çš„è‡ªå®šä¹‰ Hooksï¼Œèƒ½è®©æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ›´æ–¹ä¾¿å’Œç®€æ´ï¼Œç»„ä»¶çš„å±‚æ¬¡ç»“æ„ä¹Ÿèƒ½ä¿è¯å®Œå¥½ï¼Œè¿˜æœ‰å¦‚æ­¤ä»¤äººæ„‰æ‚¦çš„å‡½æ•°å¼ç¼–ç¨‹é£æ ¼ï¼ŒHooks åœ¨ React 16.8.0 ç‰ˆæœ¬å·²ç»æ­£å¼å‘å¸ƒç¨³å®šç‰ˆæœ¬ï¼Œç°åœ¨å¼€å§‹ç”¨èµ·æ¥å§ï¼ï¼ï¼ å‚è€ƒèµ„æ–™ hooks-reference react-hooks-lib ã€Reactæ·±å…¥ã€‘ä»Mixinåˆ°HOCå†åˆ°Hook How Are Function Components Different from Classes? under-the-hood-of-reacts-hooks-system é˜…è¯»æºç åï¼Œæ¥è®²è®²React Hooksæ˜¯æ€ä¹ˆå®ç°çš„ è½¬è½½è‡³ æ·±å…¥æµ…å‡º React Hooks","categories":[{"name":"learn","slug":"learn","permalink":"https://blog.xiaoz.site/categories/learn/"}],"tags":[{"name":"react","slug":"react","permalink":"https://blog.xiaoz.site/tags/react/"}]},{"title":"typescriptå­¦ä¹ (7) é«˜çº§ç±»å‹","slug":"learn-ts7","date":"2019-05-18T14:00:09.000Z","updated":"2019-09-06T06:15:25.723Z","comments":true,"path":"2019/05/18/learn-ts7/","link":"","permalink":"https://blog.xiaoz.site/2019/05/18/learn-ts7/","excerpt":"äº¤å‰ç±»å‹å°†å¤šä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹ï¼ŒMan &amp; Student è¯´æ˜è¿™ä¸ªç±»å‹åŒæ—¶æ‹¥æœ‰ Man å’Œ Student ç±»å‹çš„æˆå‘˜ 123456789101112type Man = &#123; name: string;&#125;;type Student = &#123; grade: number;&#125;;type Jack = Man &amp; Student;let jack: Jack = &#123; name: 'jack', grade: 5 // å¦‚æœç¼ºå°‘å…¶ä¸­ä¸€ä¸ªæˆå‘˜ä¼šæŠ¥é”™&#125;; æœ‰æ—¶å€™äº¤å‰ç±»å‹ä¸èƒ½äº¤å‰ä¸€äº›åŸºæœ¬ç±»å‹ï¼Œå¦‚ string &amp; boolean ä¸€ä¸ªå€¼ä¸å¯èƒ½æ—¢æ˜¯ string ä¹Ÿæ˜¯ booleanï¼Œä¼šè¢«æ¨æ–­æˆ never æˆ–åªèƒ½èµ‹å€¼ä¸º undefined æˆ– null","text":"äº¤å‰ç±»å‹å°†å¤šä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹ï¼ŒMan &amp; Student è¯´æ˜è¿™ä¸ªç±»å‹åŒæ—¶æ‹¥æœ‰ Man å’Œ Student ç±»å‹çš„æˆå‘˜ 123456789101112type Man = &#123; name: string;&#125;;type Student = &#123; grade: number;&#125;;type Jack = Man &amp; Student;let jack: Jack = &#123; name: 'jack', grade: 5 // å¦‚æœç¼ºå°‘å…¶ä¸­ä¸€ä¸ªæˆå‘˜ä¼šæŠ¥é”™&#125;; æœ‰æ—¶å€™äº¤å‰ç±»å‹ä¸èƒ½äº¤å‰ä¸€äº›åŸºæœ¬ç±»å‹ï¼Œå¦‚ string &amp; boolean ä¸€ä¸ªå€¼ä¸å¯èƒ½æ—¢æ˜¯ string ä¹Ÿæ˜¯ booleanï¼Œä¼šè¢«æ¨æ–­æˆ never æˆ–åªèƒ½èµ‹å€¼ä¸º undefined æˆ– null è”åˆç±»å‹å½“ä¸€ä¸ªå€¼å¯èƒ½æ˜¯å¤šç§ä¸åŒç±»å‹æ—¶ï¼Œä½¿ç”¨è”åˆç±»å‹ 12345type strOrNum = string | number;let str: strOrNum = '';let num: strOrNum = 0;let bool: strOrNum = true; // error: Type 'true' is not assignable to type 'strOrNum' å½“è”åˆç±»å‹æ˜¯å‡½æ•°è¿”å›å€¼ä¸”æˆå‘˜æ˜¯å¯¹è±¡æ—¶ï¼Œæ˜¯æ±‚äº¤é›† 1234567891011121314151617interface Bird &#123; fly(); layEggs();&#125;interface Fish &#123; swim(); layEggs();&#125;function getSmallPet(): Fish | Bird &#123; // ...&#125;let pet = getSmallPet();pet.layEggs(); // okaypet.swim(); // error ç±»å‹ä¿æŠ¤è”åˆç±»å‹é€‚åˆäºé‚£äº›å€¼å¯ä»¥ä¸ºä¸åŒç±»å‹çš„æƒ…å†µã€‚ ä½†å½“æˆ‘ä»¬æƒ³ç¡®åˆ‡åœ°äº†è§£æ˜¯å¦ä¸º Fish æˆ–è€…æ˜¯ Bird æ—¶æ€ä¹ˆåŠï¼Ÿ JavaScript é‡Œå¸¸ç”¨æ¥åŒºåˆ†è¿™ 2 ä¸ªå¯èƒ½å€¼çš„æ–¹æ³•æ˜¯æ£€æŸ¥æˆå‘˜æ˜¯å¦å­˜åœ¨ã€‚å¦‚ä¹‹å‰æåŠçš„ï¼Œæˆ‘ä»¬åªèƒ½è®¿é—®è”åˆç±»å‹ä¸­å…±åŒæ‹¥æœ‰çš„æˆå‘˜ã€‚ 12345678let pet = getSmallPet();// æ¯ä¸€ä¸ªæˆå‘˜è®¿é—®éƒ½ä¼šæŠ¥é”™if (pet.swim) &#123; pet.swim();&#125; else if (pet.fly) &#123; pet.fly();&#125; ä¸ºäº†è®©è¿™æ®µä»£ç å·¥ä½œï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ç±»å‹æ–­è¨€ï¼š 1234567let pet = getSmallPet();if ((pet as Fish).swim) &#123; (pet as Fish).swim();&#125; else &#123; (pet as Bird).fly();&#125; ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»å‹ä¿æŠ¤è¿™é‡Œå¯ä»¥æ³¨æ„åˆ°æˆ‘ä»¬ä¸å¾—ä¸å¤šæ¬¡ä½¿ç”¨ç±»å‹æ–­è¨€ã€‚å¦‚æœæˆ‘ä»¬ä¸€æ—¦æ£€æŸ¥è¿‡ç±»å‹ï¼Œå°±èƒ½åœ¨ä¹‹åçš„æ¯ä¸ªåˆ†æ”¯é‡Œæ¸…æ¥šåœ°çŸ¥é“ pet çš„ç±»å‹çš„è¯å°±å¥½äº†ã€‚ TypeScript é‡Œçš„ç±»å‹ä¿æŠ¤æœºåˆ¶è®©å®ƒæˆä¸ºäº†ç°å®ã€‚ ç±»å‹ä¿æŠ¤å°±æ˜¯ä¸€äº›è¡¨è¾¾å¼ï¼Œå®ƒä»¬ä¼šåœ¨è¿è¡Œæ—¶æ£€æŸ¥ä»¥ç¡®ä¿åœ¨æŸä¸ªä½œç”¨åŸŸé‡Œçš„ç±»å‹ã€‚å®šä¹‰ä¸€ä¸ªç±»å‹ä¿æŠ¤ï¼Œæˆ‘ä»¬åªè¦ç®€å•åœ°å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªç±»å‹è°“è¯ï¼š 123function isFish(pet: Fish | Bird): pet is Fish &#123; return (pet as Fish).swim !== undefined;&#125; åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œpet is Fish å°±æ˜¯ç±»å‹è°“è¯ã€‚è°“è¯ä¸º parameterName is Type è¿™ç§å½¢å¼ï¼Œ parameterName å¿…é¡»æ˜¯æ¥è‡ªäºå½“å‰å‡½æ•°ç­¾åé‡Œçš„ä¸€ä¸ªå‚æ•°åã€‚ æ¯å½“ä½¿ç”¨ä¸€äº›å˜é‡è°ƒç”¨ isFish æ—¶ï¼ŒTypeScript ä¼šå°†å˜é‡ç¼©å‡ä¸ºé‚£ä¸ªå…·ä½“çš„ç±»å‹ã€‚ 12345if (isFish(pet)) &#123; pet.swim();&#125; else &#123; pet.fly();&#125; æ³¨æ„ TypeScript ä¸ä»…çŸ¥é“åœ¨ if åˆ†æ”¯é‡Œ pet æ˜¯ Fish ç±»å‹ï¼›å®ƒè¿˜æ¸…æ¥šåœ¨ else åˆ†æ”¯é‡Œï¼Œä¸€å®šä¸æ˜¯ Fish ç±»å‹è€Œæ˜¯ Bird ç±»å‹ã€‚ typeof ç±»å‹ä¿æŠ¤ç°åœ¨æˆ‘ä»¬å›è¿‡å¤´æ¥çœ‹çœ‹æ€ä¹ˆä½¿ç”¨è”åˆç±»å‹ä¹¦å†™ padLeft ä»£ç ã€‚æˆ‘ä»¬å¯ä»¥åƒä¸‹é¢è¿™æ ·åˆ©ç”¨ç±»å‹æ–­è¨€æ¥å†™ï¼š 1234567891011121314151617function isNumber(x: any): x is string &#123; return typeof x === 'number';&#125;function isString(x: any): x is string &#123; return typeof x === 'string';&#125;function padLeft(value: string, padding: string | number) &#123; if (isNumber(padding)) &#123; return Array(padding + 1).join(' ') + value; &#125; if (isString(padding)) &#123; return padding + value; &#125; throw new Error(`Expected string or number, got '$&#123;padding&#125;'.`);&#125; ç„¶è€Œï¼Œä½ å¿…é¡»è¦å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­ç±»å‹æ˜¯å¦æ˜¯åŸå§‹ç±»å‹ï¼Œä½†è¿™å¹¶ä¸å¿…è¦ã€‚å…¶å®æˆ‘ä»¬ä¸å¿…å°† typeof x === &#39;number&#39;æŠ½è±¡æˆä¸€ä¸ªå‡½æ•°ï¼Œå› ä¸º TypeScript å¯ä»¥å°†å®ƒè¯†åˆ«ä¸ºä¸€ä¸ªç±»å‹ä¿æŠ¤ã€‚ ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ä»£ç é‡Œæ£€æŸ¥ç±»å‹äº†ã€‚ 123456789function padLeft(value: string, padding: string | number) &#123; if (typeof padding === 'number') &#123; return Array(padding + 1).join(' ') + value; &#125; if (typeof padding === 'string') &#123; return padding + value; &#125; throw new Error(`Expected string or number, got '$&#123;padding&#125;'.`);&#125; è¿™äº› typeof ç±»å‹ä¿æŠ¤åªæœ‰ä¸¤ç§å½¢å¼èƒ½è¢«è¯†åˆ«ï¼štypeof v === &quot;typename&quot; å’Œ typeof v !== &quot;typename&quot;ï¼Œ &quot;typename&quot;å¿…é¡»æ˜¯ &quot;number&quot;ï¼Œ &quot;string&quot;ï¼Œ&quot;boolean&quot; æˆ– &quot;symbol&quot;ã€‚ ä½†æ˜¯ TypeScript å¹¶ä¸ä¼šé˜»æ­¢ä½ ä¸å…¶å®ƒå­—ç¬¦ä¸²æ¯”è¾ƒï¼Œåªæ˜¯ TypeScript ä¸ä¼šæŠŠé‚£äº›è¡¨è¾¾å¼è¯†åˆ«ä¸ºç±»å‹ä¿æŠ¤ã€‚ instanceof ç±»å‹ä¿æŠ¤å¦‚æœä½ å·²ç»é˜…è¯»äº† typeof ç±»å‹ä¿æŠ¤å¹¶ä¸”å¯¹ JavaScript é‡Œçš„ instanceof æ“ä½œç¬¦ç†Ÿæ‚‰çš„è¯ï¼Œä½ å¯èƒ½å·²ç»çŒœåˆ°äº†è¿™èŠ‚è¦è®²çš„å†…å®¹ã€‚ instanceof ç±»å‹ä¿æŠ¤æ˜¯é€šè¿‡æ„é€ å‡½æ•°æ¥ç»†åŒ–ç±»å‹çš„ä¸€ç§æ–¹å¼ã€‚æˆ‘ä»¬æŠŠä¹‹å‰çš„ä¾‹å­åšä¸€ä¸ªå°å°çš„æ”¹é€ ï¼š 1234567891011121314151617181920212223242526272829303132class Bird &#123; fly() &#123; console.log('bird fly'); &#125; layEggs() &#123; console.log('bird lay eggs'); &#125;&#125;class Fish &#123; swim() &#123; console.log('fish swim'); &#125; layEggs() &#123; console.log('fish lay eggs'); &#125;&#125;function getRandomPet() &#123; return Math.random() &gt; 0.5 ? new Bird() : new Fish();&#125;let pet = getRandomPet();if (pet instanceof Bird) &#123; pet.fly();&#125;if (pet instanceof Fish) &#123; pet.swim();&#125; å¯ä»¥ä¸º null çš„ç±»å‹TypeScript å…·æœ‰ä¸¤ç§ç‰¹æ®Šçš„ç±»å‹ï¼Œnull å’Œ undefinedï¼Œå®ƒä»¬åˆ†åˆ«å…·æœ‰å€¼ null å’Œ undefinedã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œç±»å‹æ£€æŸ¥å™¨è®¤ä¸º null ä¸ undefined å¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ã€‚ null ä¸ undefined æ˜¯æ‰€æœ‰å…¶å®ƒç±»å‹çš„ä¸€ä¸ªæœ‰æ•ˆå€¼ã€‚ è¿™ä¹Ÿæ„å‘³ç€ï¼Œä½ é˜»æ­¢ä¸äº†å°†å®ƒä»¬èµ‹å€¼ç»™å…¶å®ƒç±»å‹ï¼Œå°±ç®—æ˜¯ä½ æƒ³è¦é˜»æ­¢è¿™ç§æƒ…å†µä¹Ÿä¸è¡Œã€‚nullçš„å‘æ˜è€…ï¼ŒTony Hoareï¼Œç§°å®ƒä¸ºä»·å€¼äº¿ä¸‡ç¾é‡‘çš„é”™è¯¯ã€‚ --strictNullChecks æ ‡è®°å¯ä»¥è§£å†³æ­¤é”™è¯¯ï¼šå½“ä½ å£°æ˜ä¸€ä¸ªå˜é‡æ—¶ï¼Œå®ƒä¸ä¼šè‡ªåŠ¨åœ°åŒ…å« null æˆ– undefinedã€‚ ä½ å¯ä»¥ä½¿ç”¨è”åˆç±»å‹æ˜ç¡®çš„åŒ…å«å®ƒä»¬ï¼š 123456let s = 'foo';s = null; // é”™è¯¯, 'null'ä¸èƒ½èµ‹å€¼ç»™'string'let sn: string | null = 'bar';sn = null; // å¯ä»¥sn = undefined; // error, 'undefined'ä¸èƒ½èµ‹å€¼ç»™'string | null' æ³¨æ„ï¼ŒæŒ‰ç…§ JavaScript çš„è¯­ä¹‰ï¼ŒTypeScript ä¼šæŠŠ null å’Œ undefined åŒºåˆ«å¯¹å¾…ã€‚string | nullï¼Œstring | undefined å’Œ string | undefined | null æ˜¯ä¸åŒçš„ç±»å‹ã€‚ å¯é€‰å‚æ•°å’Œå¯é€‰å±æ€§ä½¿ç”¨äº† --strictNullChecksï¼Œå¯é€‰å‚æ•°ä¼šè¢«è‡ªåŠ¨åœ°åŠ ä¸Š | undefined: 1234567function f(x: number, y?: number) &#123; return x + (y || 0);&#125;f(1, 2);f(1);f(1, undefined);f(1, null); // error, 'null' ä¸èƒ½èµ‹å€¼ç»™ 'number | undefined' å¯é€‰å±æ€§ä¹Ÿä¼šæœ‰åŒæ ·çš„å¤„ç†ï¼š 12345678910class C &#123; a: number; b?: number;&#125;let c = new C();c.a = 12;c.a = undefined; // error, 'undefined' ä¸èƒ½èµ‹å€¼ç»™ 'number'c.b = 13;c.b = undefined; // okc.b = null; // error, 'null' ä¸èƒ½èµ‹å€¼ç»™ 'number | undefined' ç±»å‹ä¿æŠ¤å’Œç±»å‹æ–­è¨€ç”±äºå¯ä»¥ä¸º null çš„ç±»å‹èƒ½å’Œå…¶å®ƒç±»å‹å®šä¹‰ä¸ºè”åˆç±»å‹ï¼Œé‚£ä¹ˆä½ éœ€è¦ä½¿ç”¨ç±»å‹ä¿æŠ¤æ¥å»é™¤ nullã€‚å¹¸è¿åœ°æ˜¯è¿™ä¸åœ¨ JavaScript é‡Œå†™çš„ä»£ç ä¸€è‡´ï¼š 1234567function f(sn: string | null): string &#123; if (sn === null) &#123; return 'default'; &#125; else &#123; return sn; &#125;&#125; è¿™é‡Œå¾ˆæ˜æ˜¾åœ°å»é™¤äº† nullï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨çŸ­è·¯è¿ç®—ç¬¦ï¼š 123function f(sn: string | null): string &#123; return sn || 'default';&#125; å¦‚æœç¼–è¯‘å™¨ä¸èƒ½å¤Ÿå»é™¤ null æˆ– undefinedï¼Œä½ å¯ä»¥ä½¿ç”¨ç±»å‹æ–­è¨€æ‰‹åŠ¨å»é™¤ã€‚è¯­æ³•æ˜¯æ·»åŠ  ! åç¼€ï¼š identifier! ä» identifier çš„ç±»å‹é‡Œå»é™¤äº† null å’Œ undefinedï¼š 1234567891011121314151617function broken(name: string | null): string &#123; function postfix(epithet: string) &#123; return name.charAt(0) + '. the ' + epithet; // error, 'name' å¯èƒ½ä¸º null &#125; name = name || 'Bob'; return postfix('great');&#125;function fixed(name: string | null): string &#123; function postfix(epithet: string) &#123; return name!.charAt(0) + '. the ' + epithet; // ok &#125; name = name || 'Bob'; return postfix('great');&#125;broken(null); æœ¬ä¾‹ä½¿ç”¨äº†åµŒå¥—å‡½æ•°ï¼Œå› ä¸ºç¼–è¯‘å™¨æ— æ³•å»é™¤åµŒå¥—å‡½æ•°çš„ nullï¼ˆé™¤éæ˜¯ç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼ï¼‰ã€‚å› ä¸ºå®ƒæ— æ³•è·Ÿè¸ªæ‰€æœ‰å¯¹åµŒå¥—å‡½æ•°çš„è°ƒç”¨ï¼Œå°¤å…¶æ˜¯ä½ å°†å†…å±‚å‡½æ•°åšä¸ºå¤–å±‚å‡½æ•°çš„è¿”å›å€¼ã€‚å¦‚æœæ— æ³•çŸ¥é“å‡½æ•°åœ¨å“ªé‡Œè¢«è°ƒç”¨ï¼Œå°±æ— æ³•çŸ¥é“è°ƒç”¨æ—¶ name çš„ç±»å‹ã€‚ å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹å…è®¸ä½ æŒ‡å®šå­—ç¬¦ä¸²å¿…é¡»å…·æœ‰çš„ç¡®åˆ‡å€¼ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹å¯ä»¥ä¸è”åˆç±»å‹ï¼Œç±»å‹ä¿æŠ¤å¾ˆå¥½çš„é…åˆã€‚é€šè¿‡ç»“åˆä½¿ç”¨è¿™äº›ç‰¹æ€§ï¼Œä½ å¯ä»¥å®ç°ç±»ä¼¼æšä¸¾ç±»å‹çš„å­—ç¬¦ä¸²ã€‚ 1234567891011121314151617type Easing = 'ease-in' | 'ease-out' | 'ease-in-out';class UIElement &#123; animate(dx: number, dy: number, easing: Easing) &#123; if (easing === 'ease-in') &#123; // ... &#125; else if (easing === 'ease-out') &#123; &#125; else if (easing === 'ease-in-out') &#123; &#125; else &#123; // error! ä¸èƒ½ä¼ å…¥ null æˆ–è€… undefined. &#125; &#125;&#125;let button = new UIElement();button.animate(0, 0, 'ease-in');button.animate(0, 0, 'uneasy'); // error: Argument of type '\"uneasy\"' is not assignable to parameter of type '\"ease-in\" | \"ease-out\" | \"ease-in-out\"' ä½ åªèƒ½ä»ä¸‰ç§å…è®¸çš„å­—ç¬¦ä¸­é€‰æ‹©å…¶ä¸€æ¥åšä¸ºå‚æ•°ä¼ é€’ï¼Œä¼ å…¥å…¶å®ƒå€¼åˆ™ä¼šäº§ç”Ÿé”™è¯¯ã€‚ æ€»ç»“åŸºç¡€ ts å­¦ä¹ å®Œæˆäº†ï¼Œå…¶å®åŸºæœ¬ä¸Šæ˜¯æŠŠæ…•è¯¾ç½‘çš„æ•™ç¨‹ä¸€æ®µä¸€æ®µå¤åˆ¶è¿‡æ¥çš„ï¼Œä¸è¿‡ä¹Ÿæ˜¯ä¸ºäº†åŠ æ·±è‡ªå·±çš„å°è±¡ï¼Œç®€å•é—®é¢˜å¯ä»¥ç›´æ¥çœ‹æ­¤ç¬”è®°ï¼Œå¦‚æœè¦æŸ¥æ¼è¡¥ç¼ºè¿˜æ˜¯å®˜ç½‘æ–‡æ¡£é è°± å‚è€ƒts ä¸­æ–‡æ–‡æ¡£ts å®˜æ–¹æ–‡æ¡£","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://blog.xiaoz.site/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"typescript","slug":"å­¦ä¹ ç¬”è®°/typescript","permalink":"https://blog.xiaoz.site/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/typescript/"}],"tags":[{"name":"typescript","slug":"typescript","permalink":"https://blog.xiaoz.site/tags/typescript/"}]},{"title":"typescriptå­¦ä¹ (6) ç±»å‹æ¨æ–­","slug":"learn-ts6","date":"2019-05-18T13:46:27.000Z","updated":"2019-09-06T06:15:25.723Z","comments":true,"path":"2019/05/18/learn-ts6/","link":"","permalink":"https://blog.xiaoz.site/2019/05/18/learn-ts6/","excerpt":"åŸºç¡€TypeScript é‡Œï¼Œåœ¨æœ‰äº›æ²¡æœ‰æ˜ç¡®æŒ‡å‡ºç±»å‹çš„åœ°æ–¹ï¼Œç±»å‹æ¨æ–­ä¼šå¸®åŠ©æä¾›ç±»å‹ã€‚å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š 1let x = 3; å˜é‡ x çš„ç±»å‹è¢«æ¨æ–­ä¸º number ã€‚è¿™ç§æ¨æ–­å‘ç”Ÿåœ¨åˆå§‹åŒ–å˜é‡å’Œæˆå‘˜ï¼Œè®¾ç½®é»˜è®¤å‚æ•°å€¼å’Œå†³å®šå‡½æ•°è¿”å›å€¼æ—¶ã€‚ æœ€ä½³é€šç”¨ç±»å‹æœ‰äº›æ—¶å€™æˆ‘ä»¬éœ€è¦ä»å‡ ä¸ªè¡¨è¾¾å¼ä¸­æ¨æ–­ç±»å‹ï¼Œä¼šä½¿ç”¨è¿™äº›è¡¨è¾¾å¼çš„ç±»å‹æ¥æ¨æ–­å‡ºä¸€ä¸ªæœ€åˆé€‚çš„é€šç”¨ç±»å‹ã€‚ä¾‹å¦‚ï¼Œ 1let x = [0, 1, null]; ä¸ºäº†æ¨æ–­ x çš„ç±»å‹ï¼Œæˆ‘ä»¬å¿…é¡»è€ƒè™‘æ‰€æœ‰å…ƒç´ çš„ç±»å‹ã€‚ è¿™é‡Œæœ‰ä¸¤ç§é€‰æ‹©ï¼šnumber å’Œ nullã€‚ è®¡ç®—é€šç”¨ç±»å‹ç®—æ³•ä¼šè€ƒè™‘æ‰€æœ‰çš„å€™é€‰ç±»å‹ï¼Œå¹¶ç»™å‡ºä¸€ä¸ªå…¼å®¹æ‰€æœ‰å€™é€‰ç±»å‹çš„ç±»å‹ã€‚ ç”±äºæœ€ç»ˆçš„é€šç”¨ç±»å‹å–è‡ªå€™é€‰ç±»å‹ï¼Œæœ‰äº›æ—¶å€™å€™é€‰ç±»å‹å…±äº«ä¸€ä¸ªå…¬å…±ç»“æ„ï¼Œä½†æ˜¯å´æ²¡æœ‰ä¸€ä¸ªç±»å‹èƒ½åšä¸ºæ‰€æœ‰å€™é€‰ç±»å‹çš„è¶…çº§ç±»å‹ã€‚ä¾‹å¦‚ï¼š","text":"åŸºç¡€TypeScript é‡Œï¼Œåœ¨æœ‰äº›æ²¡æœ‰æ˜ç¡®æŒ‡å‡ºç±»å‹çš„åœ°æ–¹ï¼Œç±»å‹æ¨æ–­ä¼šå¸®åŠ©æä¾›ç±»å‹ã€‚å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š 1let x = 3; å˜é‡ x çš„ç±»å‹è¢«æ¨æ–­ä¸º number ã€‚è¿™ç§æ¨æ–­å‘ç”Ÿåœ¨åˆå§‹åŒ–å˜é‡å’Œæˆå‘˜ï¼Œè®¾ç½®é»˜è®¤å‚æ•°å€¼å’Œå†³å®šå‡½æ•°è¿”å›å€¼æ—¶ã€‚ æœ€ä½³é€šç”¨ç±»å‹æœ‰äº›æ—¶å€™æˆ‘ä»¬éœ€è¦ä»å‡ ä¸ªè¡¨è¾¾å¼ä¸­æ¨æ–­ç±»å‹ï¼Œä¼šä½¿ç”¨è¿™äº›è¡¨è¾¾å¼çš„ç±»å‹æ¥æ¨æ–­å‡ºä¸€ä¸ªæœ€åˆé€‚çš„é€šç”¨ç±»å‹ã€‚ä¾‹å¦‚ï¼Œ 1let x = [0, 1, null]; ä¸ºäº†æ¨æ–­ x çš„ç±»å‹ï¼Œæˆ‘ä»¬å¿…é¡»è€ƒè™‘æ‰€æœ‰å…ƒç´ çš„ç±»å‹ã€‚ è¿™é‡Œæœ‰ä¸¤ç§é€‰æ‹©ï¼šnumber å’Œ nullã€‚ è®¡ç®—é€šç”¨ç±»å‹ç®—æ³•ä¼šè€ƒè™‘æ‰€æœ‰çš„å€™é€‰ç±»å‹ï¼Œå¹¶ç»™å‡ºä¸€ä¸ªå…¼å®¹æ‰€æœ‰å€™é€‰ç±»å‹çš„ç±»å‹ã€‚ ç”±äºæœ€ç»ˆçš„é€šç”¨ç±»å‹å–è‡ªå€™é€‰ç±»å‹ï¼Œæœ‰äº›æ—¶å€™å€™é€‰ç±»å‹å…±äº«ä¸€ä¸ªå…¬å…±ç»“æ„ï¼Œä½†æ˜¯å´æ²¡æœ‰ä¸€ä¸ªç±»å‹èƒ½åšä¸ºæ‰€æœ‰å€™é€‰ç±»å‹çš„è¶…çº§ç±»å‹ã€‚ä¾‹å¦‚ï¼š 123456789class Animal &#123; numLegs: number;&#125;class Bee extends Animal &#123;&#125;class Lion extends Animal &#123;&#125;let zoo = [new Bee(), new Lion()]; è¿™é‡Œï¼Œæˆ‘ä»¬æƒ³è®© zoo è¢«æ¨æ–­ä¸º Animal[] ç±»å‹ï¼Œä½†æ˜¯è¿™ä¸ªæ•°ç»„é‡Œæ²¡æœ‰å¯¹è±¡æ˜¯ Animal ç±»å‹çš„ï¼Œå› æ­¤ä¸èƒ½æ¨æ–­å‡ºè¿™ä¸ªç»“æœã€‚ ä¸ºäº†æ›´æ­£ï¼Œæˆ‘ä»¬å¯ä»¥æ˜ç¡®çš„å£°æ˜æˆ‘ä»¬æœŸæœ›çš„ç±»å‹ï¼š 1let zoo: Animal[] = [new Bee(), new Lion()]; å¦‚æœæ²¡æœ‰æ‰¾åˆ°æœ€ä½³é€šç”¨ç±»å‹çš„è¯ï¼Œç±»å‹æ¨æ–­çš„ç»“æœä¸ºè”åˆæ•°ç»„ç±»å‹ï¼Œ(Bee | Lion)[] ä¸Šä¸‹æ–‡ç±»å‹æœ‰äº›æ—¶å€™ï¼ŒTypeScript ç±»å‹æ¨æ–­ä¼šæŒ‰å¦å¤–ä¸€ç§æ–¹å¼ï¼Œæˆ‘ä»¬ç§°ä½œâ€œä¸Šä¸‹æ–‡ç±»å‹â€ï¼›ä¸Šä¸‹æ–‡ç±»å‹çš„å‡ºç°å’Œè¡¨è¾¾å¼çš„ç±»å‹ä»¥åŠæ‰€å¤„çš„ä½ç½®ç›¸å…³ã€‚æ¯”å¦‚ï¼š 123window.onmousedown = function(mouseEvent) &#123; console.log(mouseEvent.clickTime); // Error&#125;; è¿™ä¸ªä¾‹å­ä¼šå¾—åˆ°ä¸€ä¸ªç±»å‹é”™è¯¯ï¼ŒTypeScript ç±»å‹æ£€æŸ¥å™¨ä½¿ç”¨ window.onmousedown å‡½æ•°çš„ç±»å‹æ¥æ¨æ–­å³è¾¹å‡½æ•°è¡¨è¾¾å¼çš„ç±»å‹ã€‚ å› æ­¤ï¼Œå°±èƒ½æ¨æ–­å‡º mouseEvent å‚æ•°çš„ç±»å‹äº†ï¼Œæ‰€ä»¥ mouseEvent è®¿é—®äº†ä¸€ä¸ªä¸å­˜åœ¨çš„å±æ€§ï¼Œå°±æŠ¥é”™äº†ã€‚ å¦‚æœä¸Šä¸‹æ–‡ç±»å‹è¡¨è¾¾å¼åŒ…å«äº†æ˜ç¡®çš„ç±»å‹ä¿¡æ¯ï¼Œä¸Šä¸‹æ–‡çš„ç±»å‹è¢«å¿½ç•¥ã€‚é‡å†™ä¸Šé¢çš„ä¾‹å­ï¼š 123window.onmousedown = function(mouseEvent: any) &#123; console.log(mouseEvent.clickTime); // OK&#125;; è¿™ä¸ªå‡½æ•°è¡¨è¾¾å¼æœ‰æ˜ç¡®çš„å‚æ•°ç±»å‹æ³¨è§£ï¼Œä¸Šä¸‹æ–‡ç±»å‹è¢«å¿½ç•¥ã€‚è¿™æ ·çš„è¯å°±ä¸æŠ¥é”™äº†ï¼Œå› ä¸ºè¿™é‡Œä¸ä¼šä½¿ç”¨åˆ°ä¸Šä¸‹æ–‡ç±»å‹ã€‚ ä¸Šä¸‹æ–‡ç±»å‹ä¼šåœ¨å¾ˆå¤šæƒ…å†µä¸‹ä½¿ç”¨åˆ°ã€‚é€šå¸¸åŒ…å«å‡½æ•°çš„å‚æ•°ï¼Œèµ‹å€¼è¡¨è¾¾å¼çš„å³è¾¹ï¼Œç±»å‹æ–­è¨€ï¼Œå¯¹è±¡æˆå‘˜ï¼Œæ•°ç»„å­—é¢é‡å’Œè¿”å›å€¼è¯­å¥ã€‚ä¸Šä¸‹æ–‡ç±»å‹ä¹Ÿä¼šåšä¸ºæœ€ä½³é€šç”¨ç±»å‹çš„å€™é€‰ç±»å‹ã€‚æ¯”å¦‚ï¼š 12345function createZoo(): Animal[] &#123; return [new Bee(), new Lion()];&#125;let zoo = createZoo(); è¿™ä¸ªä¾‹å­é‡Œï¼Œæœ€ä½³é€šç”¨ç±»å‹æœ‰ 3 ä¸ªå€™é€‰è€…ï¼šAnimalï¼ŒBee å’Œ Lionã€‚ å…¶ä¸­ï¼ŒAnimal ä¼šè¢«åšä¸ºæœ€ä½³é€šç”¨ç±»å‹ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://blog.xiaoz.site/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"typescript","slug":"å­¦ä¹ ç¬”è®°/typescript","permalink":"https://blog.xiaoz.site/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/typescript/"}],"tags":[{"name":"typescript","slug":"typescript","permalink":"https://blog.xiaoz.site/tags/typescript/"}]},{"title":"WSL é€šè¿‡SSHç™»å½•","slug":"wslssh","date":"2019-05-17T05:24:40.000Z","updated":"2019-09-06T06:15:25.725Z","comments":true,"path":"2019/05/17/wslssh/","link":"","permalink":"https://blog.xiaoz.site/2019/05/17/wslssh/","excerpt":"é…ç½®ssh serverè‡ªå¸¦çš„ssh serverä¸å¥½ç”¨ï¼ˆå¥½ä¸å¥½ç”¨ä¸çŸ¥é“ï¼Œåæ­£ç½‘ä¸Šçš„æ•™ç¨‹éƒ½æ˜¯è¿™ä¹ˆè¯´çš„ï¼‰ï¼Œå…ˆå¸è½½å†å®‰è£…å³å¯ã€‚ 12345678910111213// å¸è½½sudo apt-get remove openssh-server// å®‰è£…sudo apt-get install openssh-server// ç¼–è¾‘é…ç½®æ–‡ä»¶// vim /etc/ssh/sshd_config Port 22222 # é»˜è®¤çš„æ˜¯22ï¼Œä½†æ˜¯windowsæœ‰è‡ªå·±çš„sshæœåŠ¡ç”¨çš„ä¹Ÿæ˜¯22ç«¯å£ï¼Œä¿®æ”¹ä¸€ä¸‹ PubkeyAuthentication yes PermitRootLogin prohibit-password// é‡å¯sshæœåŠ¡sudo service ssh --full-restart ç”Ÿæˆå…¬é’¥ç§˜é’¥xshell &gt; å·¥å…· &gt; æ–°å»ºç”¨æˆ·ç§˜é’¥ç”Ÿæˆå‘å¯¼ &gt; ä¸‹ä¸€æ­¥ï¼Œå…·ä½“å¦‚å›¾ã€‚ ç¬¬ä¸€æ­¥","text":"é…ç½®ssh serverè‡ªå¸¦çš„ssh serverä¸å¥½ç”¨ï¼ˆå¥½ä¸å¥½ç”¨ä¸çŸ¥é“ï¼Œåæ­£ç½‘ä¸Šçš„æ•™ç¨‹éƒ½æ˜¯è¿™ä¹ˆè¯´çš„ï¼‰ï¼Œå…ˆå¸è½½å†å®‰è£…å³å¯ã€‚ 12345678910111213// å¸è½½sudo apt-get remove openssh-server// å®‰è£…sudo apt-get install openssh-server// ç¼–è¾‘é…ç½®æ–‡ä»¶// vim /etc/ssh/sshd_config Port 22222 # é»˜è®¤çš„æ˜¯22ï¼Œä½†æ˜¯windowsæœ‰è‡ªå·±çš„sshæœåŠ¡ç”¨çš„ä¹Ÿæ˜¯22ç«¯å£ï¼Œä¿®æ”¹ä¸€ä¸‹ PubkeyAuthentication yes PermitRootLogin prohibit-password// é‡å¯sshæœåŠ¡sudo service ssh --full-restart ç”Ÿæˆå…¬é’¥ç§˜é’¥xshell &gt; å·¥å…· &gt; æ–°å»ºç”¨æˆ·ç§˜é’¥ç”Ÿæˆå‘å¯¼ &gt; ä¸‹ä¸€æ­¥ï¼Œå…·ä½“å¦‚å›¾ã€‚ ç¬¬ä¸€æ­¥ ç¬¬äºŒæ­¥ï¼Œé»˜è®¤å³å¯ ç¬¬ä¸‰æ­¥ï¼Œè®°ä½ä½ çš„å¯†ç  ç¬¬å››æ­¥ï¼Œç”Ÿæˆå¯†é’¥æˆåŠŸï¼Œè¿™é‡Œå±•ç¤ºçš„æ˜¯å…¬é’¥ï¼Œç‚¹å‡»ä¿å­˜ä¸ºæ–‡ä»¶,ï¼Œæ¯”å¦‚d:\\download\\key.pub ä¸Šä¼ å…¬é’¥åˆ°serverç›®æ ‡åœ°å€æ˜¯/root/.ssh/authorized_keysæ–‡ä»¶ï¼Œæ²¡æœ‰åˆ™æ–°å»º 1234cd /rootmkdir .sshmv /mnt/d/download/key.pub /root/.sshcat key.pub &gt; authorized_keys wslå¯ä»¥ç›´æ¥è®¿é—®åˆ°windowsçš„æ–‡ä»¶ï¼Œåœ¨ /mnt ç›®å½•ä¸‹ è®¾ç½®æ–‡ä»¶æƒé™è¿™ä¸€æ­¥å¾ˆé‡è¦ï¼Œä¹‹å‰çœ‹çš„æœ‰äº›æ•™ç¨‹æ²¡æœ‰å†™è¿™ä¸€æ­¥ï¼Œå¯¼è‡´ä¸€ç›´è¿æ¥ä¸ä¸Š 12chmod 600 authorized_keyschmod 700 ~/.ssh é‡å¯ssh1sudo service ssh --full-restart xshell è¿æ¥ssh ç¬¬ä¸€æ­¥ï¼Œå¡«å†™ä¸»æœºå’Œç«¯å£ ç¬¬äºŒæ­¥ï¼Œè®¾ç½®éªŒè¯æ–¹å¼ï¼Œé€‰æ‹© Public Keyï¼Œé€‰æ‹©ç›¸åº”ç§˜é’¥ï¼Œè¾“å…¥ä¹‹å‰è®¾ç½®çš„å¯†ç  ç¬¬ä¸‰æ­¥ï¼Œç‚¹å‡»è¿æ¥ï¼Œæå®š å‚è€ƒä½¿ç”¨xshellç™»å½•ubuntu on windows(wsl) WSL é€šè¿‡SSHç™»å½•","categories":[{"name":"learn","slug":"learn","permalink":"https://blog.xiaoz.site/categories/learn/"}],"tags":[{"name":"tips","slug":"tips","permalink":"https://blog.xiaoz.site/tags/tips/"}]},{"title":"eslint ç¦ç”¨è§„åˆ™","slug":"doc/eslintDisable","date":"2019-05-17T01:52:35.000Z","updated":"2019-09-06T06:15:25.720Z","comments":true,"path":"2019/05/17/doc/eslintDisable/","link":"","permalink":"https://blog.xiaoz.site/2019/05/17/doc/eslintDisable/","excerpt":"å—ç¦ç”¨123/* eslint-disable */alert('foo');/* eslint-enable */ å—æŒ‡å®šçš„è§„åˆ™ç¦ç”¨123/* eslint-disable no-alert, no-console */alert('foo');console.log('bar');/* eslint-enable no-alert, no-console */","text":"å—ç¦ç”¨123/* eslint-disable */alert('foo');/* eslint-enable */ å—æŒ‡å®šçš„è§„åˆ™ç¦ç”¨123/* eslint-disable no-alert, no-console */alert('foo');console.log('bar');/* eslint-enable no-alert, no-console */ æ•´ä¸ªæ–‡ä»¶ç¦ç”¨12/* eslint-disable */alert('foo'); æ•´ä¸ªæ–‡ä»¶ç¦ç”¨æŒ‡å®šçš„è§„åˆ™12/* eslint-disable no-alert */alert('foo'); è¡Œæ³¨é‡Š123alert('foo'); // eslint-disable-line// eslint-disable-next-linealert('foo'); è¡Œç¦ç”¨ç¦ç”¨æŒ‡å®šçš„è§„åˆ™123alert('foo'); // eslint-disable-line no-alert, quotes, semi// eslint-disable-next-line no-alert, quotes, semialert('foo'); ç¦ç”¨æ’ä»¶è§„åˆ™1foo(123); // eslint-disable-line æ’ä»¶å/è§„åˆ™å","categories":[{"name":"work","slug":"work","permalink":"https://blog.xiaoz.site/categories/work/"}],"tags":[{"name":"tips","slug":"tips","permalink":"https://blog.xiaoz.site/tags/tips/"}]},{"title":"typescriptå­¦ä¹ (5) æ³›å‹","slug":"learn-ts5","date":"2019-05-16T13:56:03.000Z","updated":"2019-09-06T06:15:25.722Z","comments":true,"path":"2019/05/16/learn-ts5/","link":"","permalink":"https://blog.xiaoz.site/2019/05/16/learn-ts5/","excerpt":"æ³›å‹ä¸ºå®šä¹‰æä¾›äº†é‡ç”¨æ€§ï¼Œåœ¨åˆ›å»ºå¤§å‹ç³»ç»Ÿæ—¶ä¸ºä½ æä¾›äº†ååˆ†çµæ´»çš„åŠŸèƒ½ åŸºç¡€å®ä¾‹åˆ›å»ºä¸€ä¸ª identity å‡½æ•°ï¼Œå®ƒä¼šè¿”å›ä»»ä½•ä¼ å…¥å€¼ï¼Œå¦‚æœä¸ç”¨æ³›å‹ 123function identity(arg: any): any &#123; return arg;&#125; ä½†æ˜¯ä½¿ç”¨ any ä¼šå¯¼è‡´ ts ä¸æä¾›ç±»å‹æ£€æŸ¥ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ä¼ å…¥ç±»å‹å’Œè¿”å›ç±»å‹æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨æ³›å‹ï¼Œæ³›å‹æ˜¯ä¸€ç§ ç±»å‹å˜é‡ ï¼Œå®ƒå€¼ç”¨äºè¡¨ç¤ºç±»å‹è€Œä¸æ˜¯å€¼ 123function identity&lt;T&gt;(arg: T): T &#123; return arg;&#125;","text":"æ³›å‹ä¸ºå®šä¹‰æä¾›äº†é‡ç”¨æ€§ï¼Œåœ¨åˆ›å»ºå¤§å‹ç³»ç»Ÿæ—¶ä¸ºä½ æä¾›äº†ååˆ†çµæ´»çš„åŠŸèƒ½ åŸºç¡€å®ä¾‹åˆ›å»ºä¸€ä¸ª identity å‡½æ•°ï¼Œå®ƒä¼šè¿”å›ä»»ä½•ä¼ å…¥å€¼ï¼Œå¦‚æœä¸ç”¨æ³›å‹ 123function identity(arg: any): any &#123; return arg;&#125; ä½†æ˜¯ä½¿ç”¨ any ä¼šå¯¼è‡´ ts ä¸æä¾›ç±»å‹æ£€æŸ¥ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ä¼ å…¥ç±»å‹å’Œè¿”å›ç±»å‹æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨æ³›å‹ï¼Œæ³›å‹æ˜¯ä¸€ç§ ç±»å‹å˜é‡ ï¼Œå®ƒå€¼ç”¨äºè¡¨ç¤ºç±»å‹è€Œä¸æ˜¯å€¼ 123function identity&lt;T&gt;(arg: T): T &#123; return arg;&#125; æˆ‘ä»¬ç»™ identity æ·»åŠ äº†ç±»å‹å˜é‡ Tã€‚ T å¸®åŠ©æˆ‘ä»¬æ•è·ç”¨æˆ·ä¼ å…¥çš„ç±»å‹ï¼ˆæ¯”å¦‚ï¼šnumberï¼‰ï¼Œä¹‹åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªç±»å‹ã€‚ ä¹‹åæˆ‘ä»¬å†æ¬¡ä½¿ç”¨äº† T å½“åšè¿”å›å€¼ç±»å‹ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥çŸ¥é“å‚æ•°ç±»å‹ä¸è¿”å›å€¼ç±»å‹æ˜¯ç›¸åŒçš„äº†ã€‚è¿™å…è®¸æˆ‘ä»¬è·Ÿè¸ªå‡½æ•°é‡Œä½¿ç”¨çš„ç±»å‹çš„ä¿¡æ¯ã€‚ å®šä¹‰äº†æ³›å‹ä¹‹åï¼Œæœ‰ä¸¤ç§æ–¹æ³•ä½¿ç”¨ 12let output = identity&lt;string&gt;('myString');let output1 = identity('myString'); ç¬¬ä¸€ç§æ˜ç¡®åˆ¶å®šäº† T æ˜¯ string ç±»å‹ï¼Œå¹¶ä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ ç»™å‡½æ•°ç¬¬äºŒç§åˆ©ç”¨äº† ç±»å‹æ¨è®º ï¼Œts ä¼šæ ¹æ®å‚æ•°è‡ªåŠ¨ç¡®å®š T çš„ç±»å‹ä¸€èˆ¬åŒç¬¬äºŒç§å°±å¥½äº†ï¼Œå½“ ts æ— æ³•æ¨æ–­æ—¶ï¼Œç”¨ç¬¬ä¸€ç§ æ³›å‹å˜é‡æ³›å‹å˜é‡å¯ä»¥å½“åšç±»å‹çš„ä¸€éƒ¨åˆ†ä½¿ç”¨ 1234function loggingIdentity&lt;T&gt;(arg: T): T &#123; console.log(arg.length); // error: Property 'length' does not exist on type 'T'. return arg;&#125; ç±»å‹å˜é‡ T ä»£è¡¨çš„æ˜¯ä»»æ„ç±»å‹ï¼Œæ‰€ä»¥ä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„äººå¯èƒ½ä¼ å…¥çš„æ˜¯ä¸ªæ•°å­—ï¼Œè€Œæ•°å­—æ˜¯æ²¡æœ‰ .length å±æ€§çš„ï¼Œts ä¼šæŠ¥é”™ 1234function loggingIdentity&lt;T&gt;(arg: T[]): T[] &#123; console.log(arg.length); return arg;&#125; ç”¨ä»¥ä¸Šæ–¹å¼å†™ï¼Œå‚æ•° arg æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥æœ‰ length å±æ€§ï¼Œæ­¤æ—¶ T è¡¨ç¤ºæ•°ç»„å…ƒç´ çš„ç±»å‹ æ³›å‹ç±»å‹å‡½æ•°1234function identity&lt;T&gt;(arg: T): T &#123; return arg;&#125;let myIdentity: &lt;U&gt;(arg: U) =&gt; U = identity; å¯ä»¥ä½¿ç”¨ä¸åŒçš„æ³›å‹å‚æ•°åï¼Œåªè¦åœ¨æ•°é‡ä¸Šå’Œä½¿ç”¨æ–¹å¼ä¸Šèƒ½å¯¹åº”ä¸Šå°±å¯ä»¥ã€‚ æ³›å‹æ¥å£1234567891011interface GenericIdentityFn &#123; &lt;T&gt;(arg: T): T;&#125;// ç¼–è¾‘å™¨ä¼šå»ºè®®ä¿®æ”¹ä¸ºç±»å‹åˆ«åçš„å†™æ³•// type GenericIdentityFn = &lt;T&gt;(arg: T) =&gt; Tfunction identity&lt;T&gt;(arg: T): T &#123; return arg;&#125;let myIdentity: GenericIdentityFn = identity; æˆ‘ä»¬è¿˜å¯ä»¥æŠŠæ³›å‹å‚æ•°å½“ä½œæ•´ä¸ªæ¥å£çš„ä¸€ä¸ªå‚æ•°ã€‚ è¿™æ ·æˆ‘ä»¬å°±èƒ½æ¸…æ¥šçš„çŸ¥é“ä½¿ç”¨çš„å…·ä½“æ˜¯å“ªä¸ªæ³›å‹ç±»å‹ï¼ˆæ¯”å¦‚ï¼š Dictionary&lt;string&gt; è€Œä¸åªæ˜¯ Dictionary ï¼‰ã€‚è¿™æ ·æ¥å£é‡Œçš„å…¶å®ƒæˆå‘˜ä¹Ÿèƒ½çŸ¥é“è¿™ä¸ªå‚æ•°çš„ç±»å‹äº† 1234567891011interface GenericIdentityFn&lt;T&gt; &#123; (arg: T): T;&#125;// ç¼–è¾‘å™¨ä¼šå»ºè®®ä¿®æ”¹ä¸ºï¼š// type GenericIdentityFn&lt;T&gt; = (arg: T) =&gt; T;function identity&lt;T&gt;(arg: T): T &#123; return arg;&#125;let myIdentity: GenericIdentityFn&lt;number&gt; = identity; æ³¨æ„ï¼Œæˆ‘ä»¬çš„ç¤ºä¾‹åšäº†å°‘è®¸æ”¹åŠ¨ã€‚ ä¸å†æè¿°æ³›å‹å‡½æ•°ï¼Œè€Œæ˜¯æŠŠéæ³›å‹å‡½æ•°ç­¾åä½œä¸ºæ³›å‹ç±»å‹ä¸€éƒ¨åˆ†ã€‚ å½“æˆ‘ä»¬ä½¿ç”¨ GenericIdentityFn çš„æ—¶å€™ï¼Œè¿˜å¾—ä¼ å…¥ä¸€ä¸ªç±»å‹å‚æ•°æ¥æŒ‡å®šæ³›å‹ç±»å‹ï¼ˆè¿™é‡Œæ˜¯ï¼š number ï¼‰ï¼Œé”å®šäº†ä¹‹åä»£ç é‡Œä½¿ç”¨çš„ç±»å‹ã€‚å¯¹äºæè¿°å“ªéƒ¨åˆ†ç±»å‹å±äºæ³›å‹éƒ¨åˆ†æ¥è¯´ï¼Œç†è§£ä½•æ—¶æŠŠå‚æ•°æ”¾åœ¨è°ƒç”¨ç­¾åé‡Œå’Œä½•æ—¶æ”¾åœ¨æ¥å£ä¸Šæ˜¯å¾ˆæœ‰å¸®åŠ©çš„ æ³›å‹ç±»æ³›å‹ç±»çœ‹ä¸Šå»ä¸æ³›å‹æ¥å£å·®ä¸å¤šã€‚ æ³›å‹ç±»ä½¿ç”¨ &lt;&gt; æ‹¬èµ·æ³›å‹ç±»å‹ï¼Œè·Ÿåœ¨ç±»ååé¢ 12345678910class GenericNumber&lt;T&gt; &#123; zeroValue: T; add: (x: T, y: T) =&gt; T;&#125;let myGenericNumber = new GenericNumber&lt;number&gt;();myGenericNumber.zeroValue = 0;myGenericNumber.add = function(x, y) &#123; return x + y;&#125;; ä¸æ¥å£ä¸€æ ·ï¼Œç›´æ¥æŠŠæ³›å‹ç±»å‹æ”¾åœ¨ç±»åé¢ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¡®è®¤ç±»çš„æ‰€æœ‰å±æ€§éƒ½åœ¨ä½¿ç”¨ç›¸åŒçš„ç±»å‹ã€‚ ç±»æœ‰ä¸¤éƒ¨åˆ†ï¼šé™æ€éƒ¨åˆ†å’Œå®ä¾‹éƒ¨åˆ†ã€‚ æ³›å‹ç±»æŒ‡çš„æ˜¯å®ä¾‹éƒ¨åˆ†çš„ç±»å‹ï¼Œæ‰€ä»¥ç±»çš„é™æ€å±æ€§ä¸èƒ½ä½¿ç”¨è¿™ä¸ªæ³›å‹ç±»å‹ æ³›å‹çº¦æŸ1234function loggingIdentity&lt;T&gt;(arg: T): T &#123; console.log(arg.length); // error: Property 'length' does not exist on type 'T' return arg;&#125; è¦ä¿®æ­£ä¸Šé¢çš„ä¾‹å­ä¸­çš„é”™è¯¯ï¼Œå¯ä»¥ä½¿ç”¨åˆ°æ³›å‹çº¦æŸ æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ¥å£æ¥æè¿°çº¦æŸæ¡ä»¶ï¼Œåˆ›å»ºä¸€ä¸ªåŒ…å« .length å±æ€§çš„æ¥å£ï¼Œä½¿ç”¨è¿™ä¸ªæ¥å£å’Œ extends å…³é”®å­—æ¥å®ç°çº¦æŸ 1234567891011interface Lengthwise &#123; length: number;&#125;function loggingIdentity&lt;T extends Lengthwise&gt;(arg: T): T &#123; console.log(arg.length); // OK return arg;&#125;loggingIdentity(3); // ErrorloggingIdentity(&#123; length: 10, value: 3 &#125;); // OK æˆ‘ä»¬éœ€è¦ä¼ å…¥ç¬¦åˆçº¦æŸç±»å‹çš„å€¼ï¼Œå¿…é¡»åŒ…å«å¿…é¡»çš„å±æ€§ åœ¨æ³›å‹çº¦æŸä¸­ä½¿ç”¨ç±»å‹å‚æ•°ä½ å¯ä»¥å£°æ˜ä¸€ä¸ªç±»å‹å‚æ•°ï¼Œä¸”å®ƒè¢«å¦ä¸€ä¸ªç±»å‹å‚æ•°æ‰€çº¦æŸã€‚ æ¯”å¦‚ï¼Œç°åœ¨æˆ‘ä»¬æƒ³è¦ç”¨å±æ€§åä»å¯¹è±¡é‡Œè·å–è¿™ä¸ªå±æ€§ã€‚ å¹¶ä¸”æˆ‘ä»¬æƒ³è¦ç¡®ä¿è¿™ä¸ªå±æ€§å­˜åœ¨äºå¯¹è±¡ obj ä¸Šï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨è¿™ä¸¤ä¸ªç±»å‹ä¹‹é—´ä½¿ç”¨çº¦æŸã€‚ 12345678function getProperty&lt;T, K extends keyof T&gt;(obj: T, key: K) &#123; return obj[key];&#125;let x = &#123; a: 1, b: 2, c: 3, d: 4 &#125;;getProperty(x, 'a'); // okaygetProperty(x, 'm'); // error","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://blog.xiaoz.site/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"typescript","slug":"å­¦ä¹ ç¬”è®°/typescript","permalink":"https://blog.xiaoz.site/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/typescript/"}],"tags":[{"name":"typescript","slug":"typescript","permalink":"https://blog.xiaoz.site/tags/typescript/"}]},{"title":"React & Redux in TypeScript","slug":"doc/ReactReduxInTypeScript","date":"2019-05-16T03:34:58.000Z","updated":"2019-09-06T06:15:25.720Z","comments":true,"path":"2019/05/16/doc/ReactReduxInTypeScript/","link":"","permalink":"https://blog.xiaoz.site/2019/05/16/doc/ReactReduxInTypeScript/","excerpt":"xiaOzçš„ç¿»è¯‘è®¡åˆ’ç¬¬ä¸€æ³¢ï¼è®¡åˆ’ä¸­ï¼Œå…ˆæ…¢æ…¢æ¥å“ˆğŸ¤£ï¼Œè¿‘æœŸå¼€å§‹æ›´æ–°","text":"xiaOzçš„ç¿»è¯‘è®¡åˆ’ç¬¬ä¸€æ³¢ï¼è®¡åˆ’ä¸­ï¼Œå…ˆæ…¢æ…¢æ¥å“ˆğŸ¤£ï¼Œè¿‘æœŸå¼€å§‹æ›´æ–° React &amp; Redux in TypeScript - Static Typing Guideâ€œThis guide is a living compendium documenting the most important patterns and recipes on how to use React (and its Ecosystem) in a functional style using TypeScript. It will help you make your code completely type-safe while focusing on inferring the types from implementation so there is less noise coming from excessive type annotations and itâ€™s easier to write and maintain correct types in the long run.â€ :star: Found it useful? Want more updates? Show your support by giving a :star: :tada: Now updated to support TypeScript v3.4 :tada: Goals Complete type safety (with --strict flag) without losing type information downstream through all the layers of our application (e.g. no type assertions or hacking with any type) Make type annotations concise by eliminating redundancy in types using advanced TypeScript Language features like Type Inference and Control flow analysis Reduce repetition and complexity of types with TypeScript focused complementary libraries React, Redux, Typescript Ecosystem typesafe-actions - Typesafe utilities for â€œaction-creatorsâ€ in Redux / Flux Architecture utility-types - Collection of generic types for TypeScript, complementing built-in mapped types and aliases - think lodash for reusable types. react-redux-typescript-scripts - dev-tools configuration files shared between projects based on this guide Codesandbox links Reference Todo-App implementation using React, Redux, Typescript Guide: Link Playground Project You should check out Playground Project located in the /playground folder. It is a source of all the code examples found in the guide. They are all tested with the most recent version of TypeScript and 3rd party type-definitions (like @types/react or @types/react-redux) to ensure the examples are up-to-date and not broken with updated definitions. Itâ€™s based on create-react-app --typescript. Playground project was created so that you can simply clone the repository locally and immediately play around with all the component patterns found in the guide. It will help you to learn all the examples from this guide in a real project environment without the need to create complicated environment setup by yourself. Contributing GuideWe are open for contributions. If youâ€™re planning to contribute please make sure to read the contributing guide: CONTRIBUTING.md FundingThis is an independent open-source project created by people investing their free time for the benefit of our community. If you are using it please consider donating as this will guarantee the project will be updated and maintained in the long run. Issues can be funded by anyone interested in them being resolved. Reward will be transparently distributed to the contributor handling the task through the IssueHunt platform. ğŸŒŸ - New or updated section Table of Contents Installation React - Type-Definitions Cheatsheet React - Typing Patterns Function Components - FC Class Components Generic Components Render Props Higher-Order Components Redux Connected Components Context Hooks ğŸŒŸ Redux - Typing Patterns Store Configuration Action Creators Reducers State with Type-level Immutability Typing regular reducer Typing reducer with typesafe-actions ğŸŒŸ Testing reducer Async Flow with redux-observable Typing Epics Testing Epics Selectors with reselect Connect with react-redux Typing connected component Typing connected component using redux-thunk action creators ğŸŒŸ Configuration &amp; Dev Tools Common Npm Scripts TypeScript TSLib TSLint ESLint ğŸŒŸ Jest Style Guide Recipes General Tips Ambient Modules Tips Type-Definitions Tips Type Augmentation Tips Tutorials &amp; Articles Contributors InstallationType-Definitions for React &amp; Redux1npm i -D @types&#x2F;react @types&#x2F;react-dom @types&#x2F;react-redux â€œreactâ€ - @types/reactâ€œreact-domâ€ - @types/react-domâ€œreduxâ€ - (types included with npm package)*â€œreact-reduxâ€ - @types/react-redux *NB: Guide is based on types for Redux &gt;= v4.x.x. To make it work with Redux v3.x.x please refer to this config) â‡§ back to top React - Type-Definitions CheatsheetReact.FunctionComponent&lt;P&gt; or React.FC&lt;P&gt;Type representing a functional component 1const MyComponent: React.FC&lt;Props&gt; &#x3D; ... React.Component&lt;P, S&gt;Type representing a class component 1class MyComponent extends React.Component&lt;Props, State&gt; &#123; ... React.ComponentProps&lt;typeof Component&gt;Gets type of Component Props, so you donâ€™t need to export Props from your component ever! (Works for both FC and Class components) 1type MyComponentProps &#x3D; React.ComponentProps&lt;typeof MyComponent&gt;; React.ComponentType&lt;P&gt;Type representing union type of (React.FC | React.Component) 123const withState &#x3D; &lt;P extends WrappedComponentProps&gt;( WrappedComponent: React.ComponentType&lt;P&gt;,) &#x3D;&gt; &#123; ... React.ReactElement or JSX.ElementType representing a concept of React Element - representation of a native DOM component (e.g. &lt;div /&gt;), or a user-defined composite component (e.g. &lt;MyComponent /&gt;) 1const elementOnly: React.ReactElement &#x3D; &lt;div &#x2F;&gt; || &lt;MyComponent &#x2F;&gt;; React.ReactNodeType representing any possible type of React node (basically ReactElement (including Fragments and Portals) + primitive JS types) 12const elementOrPrimitive: React.ReactNode &#x3D; &#39;string&#39; || 0 || false || null || undefined || &lt;div &#x2F;&gt; || &lt;MyComponent &#x2F;&gt;;const Component &#x3D; (&#123; children: React.ReactNode &#125;) &#x3D;&gt; ... React.CSSPropertiesType representing style object in JSX (useful for css-in-js styles) 12const styles: React.CSSProperties &#x3D; &#123; flexDirection: &#39;row&#39;, ...const element &#x3D; &lt;div style&#x3D;&#123;styles&#125; ... React.ReactEventHandler&lt;E&gt;Type representing generic event handler 123const handleChange: React.ReactEventHandler&lt;HTMLInputElement&gt; &#x3D; (ev) &#x3D;&gt; &#123; ... &#125; &lt;input onChange&#x3D;&#123;handleChange&#125; ... &#x2F;&gt; React.MouseEvent&lt;E&gt; | React.KeyboardEvent&lt;E&gt; | React.TouchEvent&lt;E&gt; etcâ€¦Type representing more specific event handler 123const handleChange &#x3D; (ev: React.MouseEvent&lt;HTMLDivElement&gt;) &#x3D;&gt; &#123; ... &#125;&lt;div onMouseMove&#x3D;&#123;handleChange&#125; ... &#x2F;&gt; â‡§ back to top React - Typing PatternsFunction Components - FC- FC counter1234567891011121314151617181920212223242526import * as React from &#39;react&#39;;type Props &#x3D; &#123; label: string; count: number; onIncrement: () &#x3D;&gt; void;&#125;;export const FCCounter: React.FC&lt;Props&gt; &#x3D; props &#x3D;&gt; &#123; const &#123; label, count, onIncrement &#125; &#x3D; props; const handleIncrement &#x3D; () &#x3D;&gt; &#123; onIncrement(); &#125;; return ( &lt;div&gt; &lt;span&gt; &#123;label&#125;: &#123;count&#125; &lt;&#x2F;span&gt; &lt;button type&#x3D;&quot;button&quot; onClick&#x3D;&#123;handleIncrement&#125;&gt; &#123;&#96;Increment&#96;&#125; &lt;&#x2F;button&gt; &lt;&#x2F;div&gt; );&#125;; âŸ©âŸ©âŸ© demo â‡§ back to top - spread attributes link123456789101112import * as React from &#39;react&#39;;type Props &#x3D; &#123; className?: string; style?: React.CSSProperties;&#125;;export const FCSpreadAttributes: React.FC&lt;Props&gt; &#x3D; props &#x3D;&gt; &#123; const &#123; children, ...restProps &#125; &#x3D; props; return &lt;div &#123;...restProps&#125;&gt;&#123;children&#125;&lt;&#x2F;div&gt;;&#125;; âŸ©âŸ©âŸ© demo â‡§ back to top Class Components- class counter123456789101112131415161718192021222324252627282930313233343536import * as React from &#39;react&#39;;type Props &#x3D; &#123; label: string;&#125;;type State &#x3D; &#123; count: number;&#125;;export class ClassCounter extends React.Component&lt;Props, State&gt; &#123; readonly state: State &#x3D; &#123; count: 0, &#125;; handleIncrement &#x3D; () &#x3D;&gt; &#123; this.setState(&#123; count: this.state.count + 1 &#125;); &#125;; render() &#123; const &#123; handleIncrement &#125; &#x3D; this; const &#123; label &#125; &#x3D; this.props; const &#123; count &#125; &#x3D; this.state; return ( &lt;div&gt; &lt;span&gt; &#123;label&#125;: &#123;count&#125; &lt;&#x2F;span&gt; &lt;button type&#x3D;&quot;button&quot; onClick&#x3D;&#123;handleIncrement&#125;&gt; &#123;&#96;Increment&#96;&#125; &lt;&#x2F;button&gt; &lt;&#x2F;div&gt; ); &#125;&#125; âŸ©âŸ©âŸ© demo â‡§ back to top - with default props1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950import * as React from &#39;react&#39;;type Props &#x3D; &#123; label: string; initialCount: number;&#125;;type State &#x3D; &#123; count: number;&#125;;export class ClassCounterWithDefaultProps extends React.Component&lt; Props, State&gt; &#123; static defaultProps &#x3D; &#123; initialCount: 0, &#125;; readonly state: State &#x3D; &#123; count: this.props.initialCount, &#125;; componentWillReceiveProps(&#123; initialCount &#125;: Props) &#123; if (initialCount !&#x3D; null &amp;&amp; initialCount !&#x3D;&#x3D; this.props.initialCount) &#123; this.setState(&#123; count: initialCount &#125;); &#125; &#125; handleIncrement &#x3D; () &#x3D;&gt; &#123; this.setState(&#123; count: this.state.count + 1 &#125;); &#125;; render() &#123; const &#123; handleIncrement &#125; &#x3D; this; const &#123; label &#125; &#x3D; this.props; const &#123; count &#125; &#x3D; this.state; return ( &lt;div&gt; &lt;span&gt; &#123;label&#125;: &#123;count&#125; &lt;&#x2F;span&gt; &lt;button type&#x3D;&quot;button&quot; onClick&#x3D;&#123;handleIncrement&#125;&gt; &#123;&#96;Increment&#96;&#125; &lt;&#x2F;button&gt; &lt;&#x2F;div&gt; ); &#125;&#125; âŸ©âŸ©âŸ© demo â‡§ back to top Generic Components easily create typed component variations and reuse common logic common use case is a generic list components - generic list123456789101112131415161718import * as React from &#39;react&#39;;export interface GenericListProps&lt;T&gt; &#123; items: T[]; itemRenderer: (item: T) &#x3D;&gt; JSX.Element;&#125;export class GenericList&lt;T&gt; extends React.Component&lt;GenericListProps&lt;T&gt;, &#123;&#125;&gt; &#123; render() &#123; const &#123; items, itemRenderer &#125; &#x3D; this.props; return ( &lt;div&gt; &#123;items.map(itemRenderer)&#125; &lt;&#x2F;div&gt; ); &#125;&#125; âŸ©âŸ©âŸ© demo â‡§ back to top Render Props https://reactjs.org/docs/render-props.html - name provider simple component using children as a render prop 1234567891011121314151617import * as React from &#39;react&#39;;interface NameProviderProps &#123; children: (state: NameProviderState) &#x3D;&gt; React.ReactNode;&#125;interface NameProviderState &#123; readonly name: string;&#125;export class NameProvider extends React.Component&lt;NameProviderProps, NameProviderState&gt; &#123; readonly state: NameProviderState &#x3D; &#123; name: &#39;Piotr&#39; &#125;; render() &#123; return this.props.children(this.state); &#125;&#125; âŸ©âŸ©âŸ© demo â‡§ back to top - mouse provider Mouse component found in Render Props React Docs 123456789101112131415161718192021222324252627282930313233import * as React from &#39;react&#39;;export interface MouseProviderProps &#123; render: (state: MouseProviderState) &#x3D;&gt; React.ReactNode;&#125;interface MouseProviderState &#123; readonly x: number; readonly y: number;&#125;export class MouseProvider extends React.Component&lt;MouseProviderProps, MouseProviderState&gt; &#123; readonly state: MouseProviderState &#x3D; &#123; x: 0, y: 0 &#125;; handleMouseMove &#x3D; (event: React.MouseEvent&lt;HTMLDivElement&gt;) &#x3D;&gt; &#123; this.setState(&#123; x: event.clientX, y: event.clientY, &#125;); &#125;; render() &#123; return ( &lt;div style&#x3D;&#123;&#123; height: &#39;100%&#39; &#125;&#125; onMouseMove&#x3D;&#123;this.handleMouseMove&#125;&gt; &#123;&#x2F;* Instead of providing a static representation of what &lt;Mouse&gt; renders, use the &#96;render&#96; prop to dynamically determine what to render. *&#x2F;&#125; &#123;this.props.render(this.state)&#125; &lt;&#x2F;div&gt; ); &#125;&#125; âŸ©âŸ©âŸ© demo â‡§ back to top Higher-Order Components https://reactjs.org/docs/higher-order-components.html - withStateAdds state to a stateless counter 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051import * as React from &#39;react&#39;;import &#123; Subtract &#125; from &#39;utility-types&#39;;&#x2F;&#x2F; These props will be subtracted from base component propsinterface InjectedProps &#123; count: number; onIncrement: () &#x3D;&gt; void;&#125;export const withState &#x3D; &lt;BaseProps extends InjectedProps&gt;( _BaseComponent: React.ComponentType&lt;BaseProps&gt;) &#x3D;&gt; &#123; &#x2F;&#x2F; fix for TypeScript issues: https:&#x2F;&#x2F;github.com&#x2F;piotrwitek&#x2F;react-redux-typescript-guide&#x2F;issues&#x2F;111 const BaseComponent &#x3D; _BaseComponent as React.ComponentType&lt;InjectedProps&gt;; type HocProps &#x3D; Subtract&lt;BaseProps, InjectedProps&gt; &amp; &#123; &#x2F;&#x2F; here you can extend hoc with new props initialCount?: number; &#125;; type HocState &#x3D; &#123; readonly count: number; &#125;; return class Hoc extends React.Component&lt;HocProps, HocState&gt; &#123; &#x2F;&#x2F; Enhance component name for debugging and React-Dev-Tools static displayName &#x3D; &#96;withState($&#123;BaseComponent.name&#125;)&#96;; &#x2F;&#x2F; reference to original wrapped component static readonly WrappedComponent &#x3D; BaseComponent; readonly state: HocState &#x3D; &#123; count: Number(this.props.initialCount) || 0, &#125;; handleIncrement &#x3D; () &#x3D;&gt; &#123; this.setState(&#123; count: this.state.count + 1 &#125;); &#125;; render() &#123; const &#123; ...restProps &#125; &#x3D; this.props; const &#123; count &#125; &#x3D; this.state; return ( &lt;BaseComponent count&#x3D;&#123;count&#125; &#x2F;&#x2F; injected onIncrement&#x3D;&#123;this.handleIncrement&#125; &#x2F;&#x2F; injected &#123;...restProps&#125; &#x2F;&gt; ); &#125; &#125;;&#125;; Click to expand 12345678import * as React from &#39;react&#39;;import &#123; withState &#125; from &#39;..&#x2F;hoc&#39;;import &#123; FCCounter &#125; from &#39;..&#x2F;components&#39;;const FCCounterWithState &#x3D; withState(FCCounter);export default () &#x3D;&gt; &lt;FCCounterWithState label&#x3D;&#123;&#39;FCCounterWithState&#39;&#125; &#x2F;&gt;; â‡§ back to top - withErrorBoundaryAdds error handling using componentDidCatch to any component 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263import * as React from &#39;react&#39;;import &#123; Subtract &#125; from &#39;utility-types&#39;;const MISSING_ERROR &#x3D; &#39;Error was swallowed during propagation.&#39;;&#x2F;&#x2F; These props will be subtracted from base component propsinterface InjectedProps &#123; onReset: () &#x3D;&gt; void;&#125;export const withErrorBoundary &#x3D; &lt;BaseProps extends InjectedProps&gt;( _BaseComponent: React.ComponentType&lt;BaseProps&gt;) &#x3D;&gt; &#123; &#x2F;&#x2F; fix for TypeScript issues: https:&#x2F;&#x2F;github.com&#x2F;piotrwitek&#x2F;react-redux-typescript-guide&#x2F;issues&#x2F;111 const BaseComponent &#x3D; _BaseComponent as React.ComponentType&lt;InjectedProps&gt;; type HocProps &#x3D; Subtract&lt;BaseProps, InjectedProps&gt; &amp; &#123; &#x2F;&#x2F; here you can extend hoc with new props &#125;; type HocState &#x3D; &#123; readonly error: Error | null | undefined; &#125;; return class Hoc extends React.Component&lt;HocProps, HocState&gt; &#123; &#x2F;&#x2F; Enhance component name for debugging and React-Dev-Tools static displayName &#x3D; &#96;withErrorBoundary($&#123;BaseComponent.name&#125;)&#96;; &#x2F;&#x2F; reference to original wrapped component static readonly WrappedComponent &#x3D; BaseComponent; readonly state: HocState &#x3D; &#123; error: undefined, &#125;; componentDidCatch(error: Error | null, info: object) &#123; this.setState(&#123; error: error || new Error(MISSING_ERROR) &#125;); this.logErrorToCloud(error, info); &#125; logErrorToCloud &#x3D; (error: Error | null, info: object) &#x3D;&gt; &#123; &#x2F;&#x2F; TODO: send error report to service provider &#125;; handleReset &#x3D; () &#x3D;&gt; &#123; this.setState(&#123; error: undefined &#125;); &#125;; render() &#123; const &#123; children, ...restProps &#125; &#x3D; this.props; const &#123; error &#125; &#x3D; this.state; if (error) &#123; return ( &lt;BaseComponent onReset&#x3D;&#123;this.handleReset&#125; &#x2F;&#x2F; injected &#123;...restProps&#125; &#x2F;&gt; ); &#125; return children; &#125; &#125;;&#125;; Click to expand 12345678910111213141516171819202122232425262728293031323334353637import React, &#123;useState&#125; from &#39;react&#39;;import &#123; withErrorBoundary &#125; from &#39;..&#x2F;hoc&#39;;import &#123; ErrorMessage &#125; from &#39;..&#x2F;components&#39;;const ErrorMessageWithErrorBoundary &#x3D; withErrorBoundary(ErrorMessage);const BrokenComponent &#x3D; () &#x3D;&gt; &#123; throw new Error(&#39;I\\&#39;m broken! Don\\&#39;t render me.&#39;);&#125;;const BrokenButton &#x3D; () &#x3D;&gt; &#123; const [shouldRenderBrokenComponent, setShouldRenderBrokenComponent] &#x3D; useState(false); if (shouldRenderBrokenComponent) &#123; return &lt;BrokenComponent &#x2F;&gt;; &#125; return ( &lt;button type&#x3D;&quot;button&quot; onClick&#x3D;&#123;() &#x3D;&gt; &#123; setShouldRenderBrokenComponent(true); &#125;&#125; &gt; &#123;&#96;Throw nasty error&#96;&#125; &lt;&#x2F;button&gt; );&#125;;export default () &#x3D;&gt; ( &lt;ErrorMessageWithErrorBoundary&gt; &lt;BrokenButton &#x2F;&gt; &lt;&#x2F;ErrorMessageWithErrorBoundary&gt;); â‡§ back to top Redux Connected Components- redux connected counter123456789101112131415161718import Types from &#39;MyTypes&#39;;import &#123; connect &#125; from &#39;react-redux&#39;;import &#123; countersActions, countersSelectors &#125; from &#39;..&#x2F;features&#x2F;counters&#39;;import &#123; FCCounter &#125; from &#39;..&#x2F;components&#39;;const mapStateToProps &#x3D; (state: Types.RootState) &#x3D;&gt; (&#123; count: countersSelectors.getReduxCounter(state.counters),&#125;);const dispatchProps &#x3D; &#123; onIncrement: countersActions.increment,&#125;;export const FCCounterConnected &#x3D; connect( mapStateToProps, dispatchProps)(FCCounter); Click to expand 12345import * as React from &#39;react&#39;;import &#123; FCCounterConnected &#125; from &#39;.&#39;;export default () &#x3D;&gt; &lt;FCCounterConnected label&#x3D;&#123;&#39;FCCounterConnected&#39;&#125; &#x2F;&gt;; â‡§ back to top - redux connected counter with own props123456789101112131415161718192021222324import Types from &#39;MyTypes&#39;;import &#123; connect &#125; from &#39;react-redux&#39;;import &#123; countersActions, countersSelectors &#125; from &#39;..&#x2F;features&#x2F;counters&#39;;import &#123; FCCounter &#125; from &#39;..&#x2F;components&#39;;type OwnProps &#x3D; &#123; initialCount?: number;&#125;;const mapStateToProps &#x3D; (state: Types.RootState, ownProps: OwnProps) &#x3D;&gt; (&#123; count: countersSelectors.getReduxCounter(state.counters) + (ownProps.initialCount || 0),&#125;);const dispatchProps &#x3D; &#123; onIncrement: countersActions.increment,&#125;;export const FCCounterConnectedOwnProps &#x3D; connect( mapStateToProps, dispatchProps)(FCCounter); Click to expand 12345678910import * as React from &#39;react&#39;;import &#123; FCCounterConnectedOwnProps &#125; from &#39;.&#39;;export default () &#x3D;&gt; ( &lt;FCCounterConnectedOwnProps label&#x3D;&#123;&#39;FCCounterConnectedOwnProps&#39;&#125; initialCount&#x3D;&#123;10&#125; &#x2F;&gt;); â‡§ back to top - redux connected counter with redux-thunk integration12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455import Types from &#39;MyTypes&#39;;import &#123; bindActionCreators, Dispatch &#125; from &#39;redux&#39;;import &#123; connect &#125; from &#39;react-redux&#39;;import * as React from &#39;react&#39;;import &#123; countersActions &#125; from &#39;..&#x2F;features&#x2F;counters&#39;;&#x2F;&#x2F; Thunk Actionconst incrementWithDelay &#x3D; () &#x3D;&gt; async (dispatch: Dispatch): Promise&lt;void&gt; &#x3D;&gt; &#123; setTimeout(() &#x3D;&gt; dispatch(countersActions.increment()), 1000);&#125;;const mapStateToProps &#x3D; (state: Types.RootState) &#x3D;&gt; (&#123; count: state.counters.reduxCounter,&#125;);const mapDispatchToProps &#x3D; (dispatch: Dispatch&lt;Types.RootAction&gt;) &#x3D;&gt; bindActionCreators( &#123; onIncrement: incrementWithDelay, &#125;, dispatch );type Props &#x3D; ReturnType&lt;typeof mapStateToProps&gt; &amp; ReturnType&lt;typeof mapDispatchToProps&gt; &amp; &#123; label: string; &#125;;export const FCCounter: React.FC&lt;Props&gt; &#x3D; props &#x3D;&gt; &#123; const &#123; label, count, onIncrement &#125; &#x3D; props; const handleIncrement &#x3D; () &#x3D;&gt; &#123; &#x2F;&#x2F; Thunk action is correctly typed as promise onIncrement().then(() &#x3D;&gt; &#123; &#x2F;&#x2F; ... &#125;); &#125;; return ( &lt;div&gt; &lt;span&gt; &#123;label&#125;: &#123;count&#125; &lt;&#x2F;span&gt; &lt;button type&#x3D;&quot;button&quot; onClick&#x3D;&#123;handleIncrement&#125;&gt; &#123;&#96;Increment&#96;&#125; &lt;&#x2F;button&gt; &lt;&#x2F;div&gt; );&#125;;export const FCCounterConnectedBindActionCreators &#x3D; connect( mapStateToProps, mapDispatchToProps)(FCCounter); Click to expand 123456789import * as React from &#39;react&#39;;import &#123; FCCounterConnectedBindActionCreators &#125; from &#39;.&#39;;export default () &#x3D;&gt; ( &lt;FCCounterConnectedBindActionCreators label&#x3D;&#123;&#39;FCCounterConnectedBindActionCreators&#39;&#125; &#x2F;&gt;); â‡§ back to top Context https://reactjs.org/docs/context.html ThemeContext123456789101112131415161718192021222324import * as React from &#39;react&#39;;export type Theme &#x3D; React.CSSProperties;type Themes &#x3D; &#123; dark: Theme; light: Theme;&#125;;export const themes: Themes &#x3D; &#123; dark: &#123; color: &#39;black&#39;, backgroundColor: &#39;white&#39;, &#125;, light: &#123; color: &#39;white&#39;, backgroundColor: &#39;black&#39;, &#125;,&#125;;export type ThemeContextProps &#x3D; &#123; theme: Theme; toggleTheme?: () &#x3D;&gt; void &#125;;const ThemeContext &#x3D; React.createContext&lt;ThemeContextProps&gt;(&#123; theme: themes.light &#125;);export default ThemeContext; â‡§ back to top ThemeProvider1234567891011121314151617181920212223242526import React from &#39;react&#39;;import ThemeContext, &#123; themes, Theme &#125; from &#39;.&#x2F;theme-context&#39;;import ToggleThemeButton from &#39;.&#x2F;theme-consumer&#39;;interface State &#123; theme: Theme;&#125;export class ThemeProvider extends React.Component&lt;&#123;&#125;, State&gt; &#123; readonly state: State &#x3D; &#123; theme: themes.light &#125;; toggleTheme &#x3D; () &#x3D;&gt; &#123; this.setState(state &#x3D;&gt; (&#123; theme: state.theme &#x3D;&#x3D;&#x3D; themes.light ? themes.dark : themes.light, &#125;)); &#125; render() &#123; const &#123; theme &#125; &#x3D; this.state; const &#123; toggleTheme &#125; &#x3D; this; return ( &lt;ThemeContext.Provider value&#x3D;&#123;&#123; theme, toggleTheme &#125;&#125;&gt; &lt;ToggleThemeButton &#x2F;&gt; &lt;&#x2F;ThemeContext.Provider&gt; ); &#125;&#125; â‡§ back to top ThemeConsumer123456789101112import * as React from &#39;react&#39;;import ThemeContext from &#39;.&#x2F;theme-context&#39;;type Props &#x3D; &#123;&#125;;export default function ToggleThemeButton(props: Props) &#123; return ( &lt;ThemeContext.Consumer&gt; &#123;(&#123; theme, toggleTheme &#125;) &#x3D;&gt; &lt;button style&#x3D;&#123;theme&#125; onClick&#x3D;&#123;toggleTheme&#125; &#123;...props&#125; &#x2F;&gt;&#125; &lt;&#x2F;ThemeContext.Consumer&gt; );&#125; ThemeConsumer in class component123456789101112131415161718import * as React from &#39;react&#39;;import ThemeContext from &#39;.&#x2F;theme-context&#39;;type Props &#x3D; &#123;&#125;;export class ToggleThemeButtonClass extends React.Component&lt;Props&gt; &#123; static contextType &#x3D; ThemeContext; context!: React.ContextType&lt;typeof ThemeContext&gt;; render() &#123; const &#123; theme, toggleTheme &#125; &#x3D; this.context; return ( &lt;button style&#x3D;&#123;theme&#125; onClick&#x3D;&#123;toggleTheme&#125;&gt; Toggle Theme &lt;&#x2F;button&gt; ); &#125;&#125; Implementation with Hooks â‡§ back to top Hooks https://reactjs.org/docs/hooks-intro.html - useState https://reactjs.org/docs/hooks-reference.html#usestate 123456789101112131415import * as React from &#39;react&#39;;type Props &#x3D; &#123; initialCount: number &#125;;export default function Counter(&#123;initialCount&#125;: Props) &#123; const [count, setCount] &#x3D; React.useState(initialCount); return ( &lt;&gt; Count: &#123;count&#125; &lt;button onClick&#x3D;&#123;() &#x3D;&gt; setCount(initialCount)&#125;&gt;Reset&lt;&#x2F;button&gt; &lt;button onClick&#x3D;&#123;() &#x3D;&gt; setCount(prevCount &#x3D;&gt; prevCount + 1)&#125;&gt;+&lt;&#x2F;button&gt; &lt;button onClick&#x3D;&#123;() &#x3D;&gt; setCount(prevCount &#x3D;&gt; prevCount - 1)&#125;&gt;-&lt;&#x2F;button&gt; &lt;&#x2F;&gt; );&#125; â‡§ back to top - useReducerHook for state management like Redux in a function component. 1234567891011121314151617181920212223242526272829303132333435363738394041import * as React from &#39;react&#39;;interface State &#123; count: number;&#125;type Action &#x3D; &#123; type: &#39;reset&#39; &#125; | &#123; type: &#39;increment&#39; &#125; | &#123; type: &#39;decrement&#39; &#125;;function reducer(state: State, action: Action): State &#123; switch (action.type) &#123; case &#39;increment&#39;: return &#123; count: state.count + 1 &#125;; case &#39;decrement&#39;: return &#123; count: state.count - 1 &#125;; case &#39;reset&#39;: return &#123; count: 0 &#125;; default: throw new Error(); &#125;&#125;interface CounterProps &#123; initialCount: number;&#125;function Counter(&#123; initialCount &#125;: CounterProps) &#123; const [state, dispatch] &#x3D; React.useReducer(reducer, &#123; count: initialCount, &#125;); return ( &lt;&gt; Count: &#123;state.count&#125; &lt;button onClick&#x3D;&#123;() &#x3D;&gt; dispatch(&#123; type: &#39;reset&#39; &#125;)&#125;&gt;Reset&lt;&#x2F;button&gt; &lt;button onClick&#x3D;&#123;() &#x3D;&gt; dispatch(&#123; type: &#39;increment&#39; &#125;)&#125;&gt;+&lt;&#x2F;button&gt; &lt;button onClick&#x3D;&#123;() &#x3D;&gt; dispatch(&#123; type: &#39;decrement&#39; &#125;)&#125;&gt;-&lt;&#x2F;button&gt; &lt;&#x2F;&gt; );&#125;export default Counter; â‡§ back to top - useContext https://reactjs.org/docs/hooks-reference.html#usecontext 12345678910111213import * as React from &#39;react&#39;;import ThemeContext from &#39;..&#x2F;context&#x2F;theme-context&#39;;type Props &#x3D; &#123;&#125;;export default function ThemeToggleButton(props: Props) &#123; const &#123; theme, toggleTheme &#125; &#x3D; React.useContext(ThemeContext); return ( &lt;button onClick&#x3D;&#123;toggleTheme&#125; style&#x3D;&#123;theme&#125; &gt; Toggle Theme &lt;&#x2F;button&gt; );&#125; â‡§ back to top Redux - Typing PatternsStore ConfigurationCreate Global RootState and RootAction TypesRootState - type representing root state-treeCan be imported in connected components to provide type-safety to Redux connect function RootAction - type representing union type of all action objectsCan be imported in various layers receiving or sending redux actions like: reducers, sagas or redux-observables epics 12345678910111213import &#123; StateType, ActionType &#125; from &#39;typesafe-actions&#39;;declare module &#39;MyTypes&#39; &#123; export type Store &#x3D; StateType&lt;typeof import(&#39;.&#x2F;index&#39;).default&gt;; export type RootAction &#x3D; ActionType&lt;typeof import(&#39;.&#x2F;root-action&#39;).default&gt;; export type RootState &#x3D; StateType&lt;typeof import(&#39;.&#x2F;root-reducer&#39;).default&gt;;&#125;declare module &#39;typesafe-actions&#39; &#123; interface Types &#123; RootAction: ActionType&lt;typeof import(&#39;.&#x2F;root-action&#39;).default&gt;; &#125;&#125; â‡§ back to top Create StoreWhen creating a store instance we donâ€™t need to provide any additional types. It will set-up a type-safe Store instance using type inference. The resulting store instance methods like getState or dispatch will be type checked and will expose all type errors 123456789101112131415161718192021222324252627282930313233import &#123; RootAction, RootState, Services &#125; from &#39;MyTypes&#39;;import &#123; createStore, applyMiddleware &#125; from &#39;redux&#39;;import &#123; createEpicMiddleware &#125; from &#39;redux-observable&#39;;import &#123; composeEnhancers &#125; from &#39;.&#x2F;utils&#39;;import rootReducer from &#39;.&#x2F;root-reducer&#39;;import rootEpic from &#39;.&#x2F;root-epic&#39;;import services from &#39;..&#x2F;services&#39;;export const epicMiddleware &#x3D; createEpicMiddleware&lt; RootAction, RootAction, RootState, Services&gt;(&#123; dependencies: services,&#125;);&#x2F;&#x2F; configure middlewaresconst middlewares &#x3D; [epicMiddleware];&#x2F;&#x2F; compose enhancersconst enhancer &#x3D; composeEnhancers(applyMiddleware(...middlewares));&#x2F;&#x2F; rehydrate state on app startconst initialState &#x3D; &#123;&#125;;&#x2F;&#x2F; create storeconst store &#x3D; createStore(rootReducer, initialState, enhancer);epicMiddleware.run(rootEpic);&#x2F;&#x2F; export store singleton instanceexport default store; Action Creators Weâ€™ll be using a battle-tested library thatâ€™ll help retain complete type soundness and simplify maintenace of types in Redux Architectures typesafe-actions You can find more real-world examples and in-depth tutorial in: Typesafe-Actions - Tutorial! A solution below is using a simple factory function to automate the creation of type-safe action creators. The goal is to decrease maintenance effort and reduce code repetition of type annotations for actions and creators. The result is completely typesafe action-creators and their actions. 123456789101112131415161718192021222324import &#123; action &#125; from &#39;typesafe-actions&#39;;import &#123; ADD, INCREMENT &#125; from &#39;.&#x2F;constants&#39;;&#x2F;&#x2F; CLASSIC APIexport const increment &#x3D; () &#x3D;&gt; action(INCREMENT);export const add &#x3D; (amount: number) &#x3D;&gt; action(ADD, amount);&#x2F;&#x2F; ALTERNATIVE API - allow to use reference to &quot;action-creator&quot; function instead of &quot;type constant&quot;&#x2F;&#x2F; e.g. case getType(increment): return &#123; ... &#125;&#x2F;&#x2F; This will allow to completely eliminate need for &quot;constants&quot; in your application, more info here:&#x2F;&#x2F; https:&#x2F;&#x2F;github.com&#x2F;piotrwitek&#x2F;typesafe-actions#behold-the-mighty-tutorial&#x2F;&#x2F; OPTION 1 (with generics):&#x2F;&#x2F; import &#123; createStandardAction &#125; from &#39;typesafe-actions&#39;;&#x2F;&#x2F; export const increment &#x3D; createStandardAction(INCREMENT)&lt;void&gt;();&#x2F;&#x2F; export const add &#x3D; createStandardAction(ADD)&lt;number&gt;();&#x2F;&#x2F; OPTION 2 (with resolve callback):&#x2F;&#x2F; import &#123; createAction &#125; from &#39;typesafe-actions&#39;;&#x2F;&#x2F; export const increment &#x3D; createAction(INCREMENT);&#x2F;&#x2F; export const add &#x3D; createAction(ADD, resolve &#x3D;&gt; &#123;&#x2F;&#x2F; return (amount: number) &#x3D;&gt; resolve(amount);&#x2F;&#x2F; &#125;); Click to expand 12345678import store from &#39;..&#x2F;..&#x2F;store&#39;;import &#123; countersActions as counter &#125; from &#39;..&#x2F;counters&#39;;&#x2F;&#x2F; store.dispatch(counter.increment(1)); &#x2F;&#x2F; Error: Expected 0 arguments, but got 1.store.dispatch(counter.increment()); &#x2F;&#x2F; OK&#x2F;&#x2F; store.dispatch(counter.add()); &#x2F;&#x2F; Error: Expected 1 arguments, but got 0.store.dispatch(counter.add(1)); &#x2F;&#x2F; OK â‡§ back to top ReducersState with Type-level ImmutabilityDeclare reducer State type with readonly modifier to get compile time immutability 1234export type State = &#123; readonly counter: number; readonly todos: ReadonlyArray&lt;string&gt;;&#125;; Readonly modifier allow initialization, but will not allow reassignment by highlighting compiler errors 12345export const initialState: State = &#123; counter: 0,&#125;; // OKinitialState.counter = 3; // TS Error: cannot be mutated Itâ€™s great for Arrays in JS because it will error when using mutator methods like (push, pop, splice, â€¦), but itâ€™ll still allow immutable methods like (concat, map, slice,â€¦). 12state.todos.push('Learn about tagged union types') // TS Error: Property 'push' does not exist on type 'ReadonlyArray&lt;string&gt;'const newTodos = state.todos.concat('Learn about tagged union types') // OK Caveat - Readonly is not recursiveThis means that the readonly modifier doesnâ€™t propagate immutability down the nested structure of objects. Youâ€™ll need to mark each property on each level explicitly. TIP: use Readonly or ReadonlyArray Mapped types 12345678910export type State = Readonly&lt;&#123; counterPairs: ReadonlyArray&lt;Readonly&lt;&#123; immutableCounter1: number, immutableCounter2: number, &#125;&gt;&gt;,&#125;&gt;;state.counterPairs[0] = &#123; immutableCounter1: 1, immutableCounter2: 1 &#125;; // TS Error: cannot be mutatedstate.counterPairs[0].immutableCounter1 = 1; // TS Error: cannot be mutatedstate.counterPairs[0].immutableCounter2 = 1; // TS Error: cannot be mutated Solution - recursive Readonly is called DeepReadonlyTo fix this we can use DeepReadonly type (available from utility-types). 123456789101112import &#123; DeepReadonly &#125; from 'utility-types';export type State = DeepReadonly&lt;&#123; containerObject: &#123; innerValue: number, numbers: number[], &#125;&#125;&gt;;state.containerObject = &#123; innerValue: 1 &#125;; // TS Error: cannot be mutatedstate.containerObject.innerValue = 1; // TS Error: cannot be mutatedstate.containerObject.numbers.push(1); // TS Error: cannot use mutator methods â‡§ back to top Typing reducer to understand following section make sure to learn about Type Inference, Control flow analysis and Tagged union types 123456789101112131415161718192021222324252627282930313233343536373839404142434445import &#123; combineReducers &#125; from &#39;redux&#39;;import &#123; ActionType &#125; from &#39;typesafe-actions&#39;;import &#123; Todo, TodosFilter &#125; from &#39;.&#x2F;models&#39;;import * as actions from &#39;.&#x2F;actions&#39;;import &#123; ADD, CHANGE_FILTER, TOGGLE &#125; from &#39;.&#x2F;constants&#39;;export type TodosAction &#x3D; ActionType&lt;typeof actions&gt;;export type TodosState &#x3D; Readonly&lt;&#123; todos: Todo[]; todosFilter: TodosFilter;&#125;&gt;;const initialState: TodosState &#x3D; &#123; todos: [], todosFilter: TodosFilter.All,&#125;;export default combineReducers&lt;TodosState, TodosAction&gt;(&#123; todos: (state &#x3D; initialState.todos, action) &#x3D;&gt; &#123; switch (action.type) &#123; case ADD: return [...state, action.payload]; case TOGGLE: return state.map(item &#x3D;&gt; item.id &#x3D;&#x3D;&#x3D; action.payload ? &#123; ...item, completed: !item.completed &#125; : item ); default: return state; &#125; &#125;, todosFilter: (state &#x3D; initialState.todosFilter, action) &#x3D;&gt; &#123; switch (action.type) &#123; case CHANGE_FILTER: return action.payload; default: return state; &#125; &#125;,&#125;); â‡§ back to top Typing reducer with typesafe-actions Notice we are not required to use any generic type parameter in the API. Try to compare it with regular reducer as they are equivalent. 12345678910111213141516171819202122232425262728293031323334import &#123; combineReducers &#125; from &#39;redux&#39;;import &#123; createReducer &#125; from &#39;typesafe-actions&#39;;import &#123; Todo, TodosFilter &#125; from &#39;.&#x2F;models&#39;;import &#123; ADD, CHANGE_FILTER, TOGGLE &#125; from &#39;.&#x2F;constants&#39;;export type TodosState &#x3D; Readonly&lt;&#123; todos: Todo[]; todosFilter: TodosFilter;&#125;&gt;;const initialState: TodosState &#x3D; &#123; todos: [], todosFilter: TodosFilter.All,&#125;;const todos &#x3D; createReducer(initialState.todos) .handleAction(ADD, (state, action) &#x3D;&gt; [...state, action.payload]) .handleAction(TOGGLE, (state, action) &#x3D;&gt; state.map(item &#x3D;&gt; item.id &#x3D;&#x3D;&#x3D; action.payload ? &#123; ...item, completed: !item.completed &#125; : item ) );const todosFilter &#x3D; createReducer(initialState.todosFilter).handleAction( CHANGE_FILTER, (state, action) &#x3D;&gt; action.payload);export default combineReducers(&#123; todos, todosFilter,&#125;); â‡§ back to top Testing reducer12345678910111213141516171819202122232425262728293031323334353637383940414243import &#123; todosReducer as reducer, todosActions as actions, TodosState,&#125; from &#39;.&#x2F;&#39;;&#x2F;** * FIXTURES *&#x2F;const getInitialState &#x3D; (initial?: Partial&lt;TodosState&gt;) &#x3D;&gt; reducer(initial as TodosState, &#123;&#125; as any);&#x2F;** * STORIES *&#x2F;describe(&#39;Todos Stories&#39;, () &#x3D;&gt; &#123; describe(&#39;initial state&#39;, () &#x3D;&gt; &#123; it(&#39;should match a snapshot&#39;, () &#x3D;&gt; &#123; const initialState &#x3D; getInitialState(); expect(initialState).toMatchSnapshot(); &#125;); &#125;); describe(&#39;adding todos&#39;, () &#x3D;&gt; &#123; it(&#39;should add a new todo as the first element&#39;, () &#x3D;&gt; &#123; const initialState &#x3D; getInitialState(); expect(initialState.todos).toHaveLength(0); const state &#x3D; reducer(initialState, actions.add(&#39;new todo&#39;)); expect(state.todos).toHaveLength(1); expect(state.todos[0].title).toEqual(&#39;new todo&#39;); &#125;); &#125;); describe(&#39;toggling completion state&#39;, () &#x3D;&gt; &#123; it(&#39;should mark active todo as complete&#39;, () &#x3D;&gt; &#123; const activeTodo &#x3D; &#123; id: &#39;1&#39;, completed: false, title: &#39;active todo&#39; &#125;; const initialState &#x3D; getInitialState(&#123; todos: [activeTodo] &#125;); expect(initialState.todos[0].completed).toBeFalsy(); const state1 &#x3D; reducer(initialState, actions.toggle(activeTodo.id)); expect(state1.todos[0].completed).toBeTruthy(); &#125;); &#125;);&#125;); â‡§ back to top Async Flow with redux-observableTyping epics12345678910111213141516171819202122import &#123; RootAction, RootState, Services &#125; from &#39;MyTypes&#39;;import &#123; Epic &#125; from &#39;redux-observable&#39;;import &#123; tap, ignoreElements, filter &#125; from &#39;rxjs&#x2F;operators&#39;;import &#123; isOfType &#125; from &#39;typesafe-actions&#39;;import &#123; todosConstants &#125; from &#39;..&#x2F;todos&#39;;&#x2F;&#x2F; contrived example!!!export const logAddAction: Epic&lt;RootAction, RootAction, RootState, Services&gt; &#x3D; ( action$, state$, &#123; logger &#125;) &#x3D;&gt; action$.pipe( filter(isOfType(todosConstants.ADD)), &#x2F;&#x2F; action is narrowed to: &#123; type: &quot;ADD_TODO&quot;; payload: string; &#125; tap(action &#x3D;&gt; &#123; logger.log( &#96;action type must be equal: $&#123;todosConstants.ADD&#125; &#x3D;&#x3D;&#x3D; $&#123;action.type&#125;&#96; ); &#125;), ignoreElements() ); â‡§ back to top Testing epics12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152import &#123; StateObservable, ActionsObservable &#125; from &#39;redux-observable&#39;;import &#123; RootState, Services, RootAction &#125; from &#39;MyTypes&#39;;import &#123; Subject &#125; from &#39;rxjs&#39;;import &#123; add &#125; from &#39;.&#x2F;actions&#39;;import &#123; logAddAction &#125; from &#39;.&#x2F;epics&#39;;&#x2F;&#x2F; Simple typesafe mock of all the services, you dont&#39;t need to mock anything else&#x2F;&#x2F; It is decoupled and reusable for all your tests, just put it in a separate fileconst services &#x3D; &#123; logger: &#123; log: jest.fn&lt;Services[&#39;logger&#39;][&#39;log&#39;]&gt;(), &#125;, localStorage: &#123; loadState: jest.fn&lt;Services[&#39;localStorage&#39;][&#39;loadState&#39;]&gt;(), saveState: jest.fn&lt;Services[&#39;localStorage&#39;][&#39;saveState&#39;]&gt;(), &#125;,&#125;;describe(&#39;Todos Epics&#39;, () &#x3D;&gt; &#123; let state$: StateObservable&lt;RootState&gt;; beforeEach(() &#x3D;&gt; &#123; state$ &#x3D; new StateObservable&lt;RootState&gt;( new Subject&lt;RootState&gt;(), undefined as any ); &#125;); describe(&#39;logging todos actions&#39;, () &#x3D;&gt; &#123; beforeEach(() &#x3D;&gt; &#123; services.logger.log.mockClear(); &#125;); it(&#39;should call the logger service when adding a new todo&#39;, done &#x3D;&gt; &#123; const addTodoAction &#x3D; add(&#39;new todo&#39;); const action$ &#x3D; ActionsObservable.of(addTodoAction); logAddAction(action$, state$, services) .toPromise() .then((outputAction: RootAction) &#x3D;&gt; &#123; expect(services.logger.log).toHaveBeenCalledTimes(1); expect(services.logger.log).toHaveBeenCalledWith( &#39;action type must be equal: todos&#x2F;ADD &#x3D;&#x3D;&#x3D; todos&#x2F;ADD&#39; ); &#x2F;&#x2F; expect output undefined because we&#39;re using &quot;ignoreElements&quot; in epic expect(outputAction).toEqual(undefined); done(); &#125;); &#125;); &#125;);&#125;); â‡§ back to top Selectors with reselect12345678910111213141516171819import &#123; createSelector &#125; from &#39;reselect&#39;;import &#123; TodosState &#125; from &#39;.&#x2F;reducer&#39;;export const getTodos &#x3D; (state: TodosState) &#x3D;&gt; state.todos;export const getTodosFilter &#x3D; (state: TodosState) &#x3D;&gt; state.todosFilter;export const getFilteredTodos &#x3D; createSelector(getTodos, getTodosFilter, (todos, todosFilter) &#x3D;&gt; &#123; switch (todosFilter) &#123; case &#39;completed&#39;: return todos.filter(t &#x3D;&gt; t.completed); case &#39;active&#39;: return todos.filter(t &#x3D;&gt; !t.completed); default: return todos; &#125;&#125;); â‡§ back to top Connect with react-reduxTyping connected componentNOTE: Below youâ€™ll find only a short explanation of concepts behind typing connect. For more real-world examples please check Redux Connected Components section. 12345678910111213141516171819202122232425262728293031323334353637383940import MyTypes from &#39;MyTypes&#39;;import &#123; bindActionCreators, Dispatch, ActionCreatorsMapObject &#125; from &#39;redux&#39;;import &#123; connect &#125; from &#39;react-redux&#39;;import &#123; countersActions &#125; from &#39;..&#x2F;features&#x2F;counters&#39;;import &#123; FCCounter &#125; from &#39;..&#x2F;components&#39;;&#x2F;&#x2F; Type annotation for &quot;state&quot; argument is mandatory to check &#x2F;&#x2F; the correct shape of state object and injected props you can also&#x2F;&#x2F; extend connected component Props interface by annotating &#96;ownProps&#96; argumentconst mapStateToProps &#x3D; (state: MyTypes.RootState, ownProps: FCCounterProps) &#x3D;&gt; (&#123; count: state.counters.reduxCounter,&#125;);&#x2F;&#x2F; &quot;dispatch&quot; argument needs an annotation to check the correct shape&#x2F;&#x2F; of an action object when using dispatch functionconst mapDispatchToProps &#x3D; (dispatch: Dispatch&lt;MyTypes.RootAction&gt;) &#x3D;&gt; bindActionCreators(&#123; onIncrement: countersActions.increment, &#125;, dispatch);&#x2F;&#x2F; shorter alternative is to use an object instead of mapDispatchToProps functionconst dispatchToProps &#x3D; &#123; onIncrement: countersActions.increment,&#125;;&#x2F;&#x2F; Notice we don&#39;t need to pass any generic type parameters to neither&#x2F;&#x2F; the connect function below nor map functions declared above&#x2F;&#x2F; because type inference will infer types from arguments annotations automatically&#x2F;&#x2F; This is much cleaner and idiomatic approachexport const FCCounterConnected &#x3D; connect(mapStateToProps, mapDispatchToProps)(FCCounter);&#x2F;&#x2F; You can add extra layer of validation of your action creators&#x2F;&#x2F; by using bindActionCreators generic type parameter and RootAction typeconst mapDispatchToProps &#x3D; (dispatch: Dispatch&lt;MyTypes.RootAction&gt;) &#x3D;&gt; bindActionCreators&lt;ActionCreatorsMapObject&lt;Types.RootAction&gt;&gt;(&#123; invalidActionCreator: () &#x3D;&gt; 1, &#x2F;&#x2F; Error: Type &#39;number&#39; is not assignable to type &#39;&#123; type: &quot;todos&#x2F;ADD&quot;; payload: Todo; &#125; | &#123; ... &#125; &#125;, dispatch); Typing connected component using redux-thunk action creatorsNOTE: When using thunk action creators you need to use bindActionCreators. Only this way you can get corrected dispatch props type signature like below. WARNING: As of now (Apr 2019) bindActionCreators signature of the latest redux-thunk release will not work as below, you need to use updated type definitions that you can find here /playground/typings/redux-thunk/index.d.ts and then add paths overload in your tsconfig like this: &quot;paths&quot;:{&quot;redux-thunk&quot;:[&quot;typings/redux-thunk&quot;]}. 1234567891011121314151617const thunkAsyncAction &#x3D; () &#x3D;&gt; async (dispatch: Dispatch): Promise&lt;void&gt; &#x3D;&gt; &#123; &#x2F;&#x2F; dispatch actions, return Promise, etc.&#125;const mapDispatchToProps &#x3D; (dispatch: Dispatch&lt;Types.RootAction&gt;) &#x3D;&gt; bindActionCreators( &#123; thunkAsyncAction, &#125;, dispatch );type DispatchProps &#x3D; ReturnType&lt;typeof mapDispatchToProps&gt;;&#x2F;&#x2F; &#123; thunkAsyncAction: () &#x3D;&gt; Promise&lt;void&gt;; &#125;&#x2F;* Without &quot;bindActionCreators&quot; fix signature will be the same as the original &quot;unbound&quot; thunk function: *&#x2F;&#x2F;&#x2F; &#123; thunkAsyncAction: () &#x3D;&gt; (dispatch: Dispatch&lt;AnyAction&gt;) &#x3D;&gt; Promise&lt;void&gt;; &#125; â‡§ back to top Configuration &amp; Dev ToolsCommon Npm Scripts Common TS-related npm scripts shared across projects 123456789&quot;prettier&quot;: &quot;prettier --list-different &#39;src&#x2F;**&#x2F;*.ts&#39; || (echo &#39;\\nPlease fix code formatting by running:\\nnpm run prettier:fix\\n&#39;; exit 1)&quot;,&quot;prettier:fix&quot;: &quot;prettier --write &#39;src&#x2F;**&#x2F;*.ts&#39;&quot;,&quot;lint&quot;: &quot;tslint -p .&#x2F;&quot;,&quot;tsc&quot;: &quot;tsc -p .&#x2F; --noEmit&quot;,&quot;tsc:watch&quot;: &quot;tsc -p .&#x2F; --noEmit -w&quot;,&quot;test&quot;: &quot;jest --config jest.config.json&quot;,&quot;test:watch&quot;: &quot;jest --config jest.config.json --watch&quot;,&quot;test:update&quot;: &quot;jest --config jest.config.json -u&quot;&quot;ci-check&quot;: &quot;npm run prettier &amp;&amp; npm run lint &amp;&amp; npm run tsc &amp;&amp; npm run test&quot;, â‡§ back to top TypeScriptWe have our own recommended tsconfig.json that you can easily add to your project thanks to react-redux-typescript-scripts package. tsconfig.jsonClick to expand 1234567891011&#123; &quot;include&quot;: [ &quot;src&quot;, &quot;typings&quot; ], &quot;exclude&quot;: [ &quot;src&#x2F;**&#x2F;*.spec.*&quot; ], &quot;extends&quot;: &quot;.&#x2F;node_modules&#x2F;react-redux-typescript-scripts&#x2F;tsconfig.json&quot;, &quot;compilerOptions&quot;: &#123;&#125;&#125; â‡§ back to top TSLibhttps://www.npmjs.com/package/tslib This library will cut down on your bundle size, thanks to using external runtime helpers instead of adding them per each file. Installationnpm i tslib Then add this to your tsconfig.json: 123\"compilerOptions\": &#123; \"importHelpers\": true&#125; â‡§ back to top TSLinthttps://palantir.github.io/tslint/ Installationnpm i -D tslint For React project you should add additional react specific rules: npm i -D tslint-react https://github.com/palantir/tslint-react We have our own recommended config that you can easily add to your project thanks to react-redux-typescript-scripts package. tslint.jsonClick to expand 123456789&#123; &quot;extends&quot;: [ &quot;react-redux-typescript-scripts&#x2F;tslint.json&quot;, &quot;react-redux-typescript-scripts&#x2F;tslint-react.json&quot; ], &quot;rules&quot;: &#123; &#x2F;&#x2F; you can further customize options here &#125;&#125; â‡§ back to top ESLinthttps://eslint.org/https://typescript-eslint.io Installationnpm i -D eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin We have our own recommended config that will automatically add a parser &amp; plugin for TypeScript thanks to react-redux-typescript-scripts package. .eslintrcClick to expand 123456789&#123; &quot;extends&quot;: [ &quot;react-app&quot;, &quot;.&#x2F;node_modules&#x2F;react-redux-typescript-scripts&#x2F;eslint.js&quot; ], &quot;rules&quot;: &#123; &#x2F;&#x2F; you can further customize options here &#125;&#125; â‡§ back to top Jesthttps://jestjs.io/ Installationnpm i -D jest ts-jest @types/jest jest.config.jsonClick to expand 12345678910111213141516171819&#123; &quot;verbose&quot;: true, &quot;transform&quot;: &#123; &quot;.(ts|tsx)&quot;: &quot;ts-jest&quot; &#125;, &quot;testRegex&quot;: &quot;(&#x2F;spec&#x2F;.*|\\\\.(test|spec))\\\\.(ts|tsx|js)$&quot;, &quot;moduleFileExtensions&quot;: [&quot;ts&quot;, &quot;tsx&quot;, &quot;js&quot;], &quot;moduleNameMapper&quot;: &#123; &quot;^Components&#x2F;(.*)&quot;: &quot;.&#x2F;src&#x2F;components&#x2F;$1&quot; &#125;, &quot;globals&quot;: &#123; &quot;window&quot;: &#123;&#125;, &quot;ts-jest&quot;: &#123; &quot;tsConfig&quot;: &quot;.&#x2F;tsconfig.json&quot; &#125; &#125;, &quot;setupFiles&quot;: [&quot;.&#x2F;jest.stubs.js&quot;], &quot;testURL&quot;: &quot;http:&#x2F;&#x2F;localhost&#x2F;&quot;&#125; jest.stubs.jsClick to expand 12345678910111213141516171819&#x2F;&#x2F; Global&#x2F;Window object Stubs for Jestwindow.matchMedia &#x3D; window.matchMedia || function () &#123; return &#123; matches: false, addListener: function () &#123; &#125;, removeListener: function () &#123; &#125;, &#125;;&#125;;window.requestAnimationFrame &#x3D; function (callback) &#123; setTimeout(callback);&#125;;window.localStorage &#x3D; &#123; getItem: function () &#123; &#125;, setItem: function () &#123; &#125;,&#125;;Object.values &#x3D; () &#x3D;&gt; []; â‡§ back to top Style Guideâ€œreact-styleguidistâ€âŸ©âŸ©âŸ© styleguide.config.js âŸ©âŸ©âŸ© demo â‡§ back to top RecipesGeneral Tips- should I still use React.PropTypes in TS?No. With TypeScript, using PropTypes is an unnecessary overhead. When declaring Props and State interfaces, you will get complete intellisense and design-time safety with static type checking. This way youâ€™ll be safe from runtime errors and you will save a lot of time on debugging. Additional benefit is an elegant and standardized method of documenting your component public API in the source code. â‡§ back to top - when to use interface declarations and when type aliases?From practical side, using interface declaration will create an identity (interface name) in compiler errors, on the contrary type aliases doesnâ€™t create an identity and will be unwinded to show all the properties and nested types it consists of.Although I prefer to use type most of the time there are some places this can become too noisy when reading compiler errors and thatâ€™s why I like to leverage this distinction to hide some of not so important type details in errors using interfaces identity.Related ts-lint rule: https://palantir.github.io/tslint/rules/interface-over-type-literal/ â‡§ back to top - whatâ€™s better default or named exports?A common flexible solution is to use module folder pattern, because you can leverage both named and default import when you see fit.With this solution youâ€™ll achieve better encapsulation and be able to safely refactor internal naming and folders structure without breaking your consumer code: 1234567891011121314151617181920// 1. create your component files (`select.tsx`) using default export in some folder:// components/select.tsxconst Select: React.FC&lt;Props&gt; = (props) =&gt; &#123;...export default Select;// 2. in this folder create an `index.ts` file that will re-export components with named exports:// components/index.tsexport &#123; default as Select &#125; from './select';...// 3. now you can import your components in both ways, with named export (better encapsulation) or using default export (internal access):// containers/container.tsximport &#123; Select &#125; from '@src/components';orimport Select from '@src/components/select';... â‡§ back to top - how to best initialize class instance or static properties?Prefered modern syntax is to use class Property Initializers 12345678910111213class ClassCounterWithInitialCount extends React.Component&lt;Props, State&gt; &#123; &#x2F;&#x2F; default props using Property Initializers static defaultProps: DefaultProps &#x3D; &#123; className: &#39;default-class&#39;, initialCount: 0, &#125;; &#x2F;&#x2F; initial state using Property Initializers state: State &#x3D; &#123; count: this.props.initialCount, &#125;; ...&#125; â‡§ back to top - how to best declare component handler functions?Prefered modern syntax is to use Class Fields with arrow functions 1234567class ClassCounter extends React.Component&lt;Props, State&gt; &#123;&#x2F;&#x2F; handlers using Class Fields with arrow functions handleIncrement &#x3D; () &#x3D;&gt; &#123; this.setState(&#123; count: this.state.count + 1 &#125;); &#125;; ...&#125; â‡§ back to top Ambient Modules TipsImports in ambient modulesFor type augmentation imports should stay outside of module declaration. 12345678import &#123; Operator &#125; from 'rxjs/Operator';import &#123; Observable &#125; from 'rxjs/Observable';declare module 'rxjs/Subject' &#123; interface Subject&lt;T&gt; &#123; lift&lt;R&gt;(operator: Operator&lt;T, R&gt;): Observable&lt;R&gt;; &#125;&#125; When creating 3rd party type-definitions all the imports should be kept inside the module decleration, otherwise it will be treated as augmentation and show error 1234declare module \"react-custom-scrollbars\" &#123; import * as React from \"react\"; export interface positionValues &#123; ... â‡§ back to top Type-Definitions TipsMissing type-definitions errorif you cannot find types for a third-party module you can provide your own types or disable type-checking for this module using Shorthand Ambient Modules 123&#x2F;&#x2F; typings&#x2F;modules.d.tsdeclare module &#39;MyTypes&#39;;declare module &#39;react-test-renderer&#39;; Using custom d.ts files for npm modulesIf you want to use an alternative (customized) type-definitions for some npm module (that usually comes with itâ€™s own type-definitions), you can do it by adding an override in paths compiler option. 12345678910&#123; \"compilerOptions\": &#123; \"baseUrl\": \".\", \"paths\": &#123; \"redux\": [\"typings/redux\"], // use an alternative type-definitions instead of the included one ... &#125;, ..., &#125;&#125; â‡§ back to top Type Augmentation TipsStrategies to fix issues coming from external type-definitions files (*.d.ts) Augmenting library internal declarations - using relative import123456// added missing autoFocus Prop on Input component in \"antd@2.10.0\" npm packagedeclare module '../node_modules/antd/lib/input/Input' &#123; export interface InputProps &#123; autoFocus?: boolean; &#125;&#125; Augmenting library public declarations - using node_modules import123456789// fixed broken public type-definitions in \"rxjs@5.4.1\" npm packageimport &#123; Operator &#125; from 'rxjs/Operator';import &#123; Observable &#125; from 'rxjs/Observable';declare module 'rxjs/Subject' &#123; interface Subject&lt;T&gt; &#123; lift&lt;R&gt;(operator: Operator&lt;T, R&gt;): Observable&lt;R&gt;; &#125;&#125; More advanced scenarios for working with vendor type-definitions can be found here Official TypeScript Docs â‡§ back to top Tutorials &amp; Articles Curated list of relevant in-depth tutorials Higher-Order Components: https://medium.com/@jrwebdev/react-higher-order-component-patterns-in-typescript-42278f7590fb â‡§ back to top ContributorsThanks goes to these wonderful people (emoji key): Piotrek WitekğŸ’» ğŸ“– ğŸ¤” ğŸ‘€ ğŸ’¬ Kazz YokomizoğŸ’µ ğŸ” Jake BooneğŸ“– Amit DahanğŸ“– gulderovğŸ“– Erik PearsonğŸ“– Bryan MasonğŸ“– Jakub ChodorowiczğŸ’» Oleg MaslovğŸ› Aaron WestbrookğŸ› Peter BlazejewiczğŸ“– Solomon WhiteğŸ“– Levi RochağŸ“– Sudachi-kunğŸ’µ Sosuke SuzukiğŸ’» Tom RathboneğŸ“– Arshad KazmiğŸ“– JeongUkJaeğŸ“– This project follows the all-contributors specification. Contributions of any kind welcome! MIT License Copyright (c) 2017 Piotr Witek &#112;&#105;&#x6f;&#116;&#114;&#x65;&#107;&#46;&#x77;&#x69;&#x74;&#101;&#x6b;&#x40;&#x67;&#109;&#x61;&#105;&#x6c;&#x2e;&#99;&#111;&#109; (http://piotrwitek.github.io)","categories":[{"name":"æ–‡æ¡£","slug":"æ–‡æ¡£","permalink":"https://blog.xiaoz.site/categories/%E6%96%87%E6%A1%A3/"}],"tags":[{"name":"typescript","slug":"typescript","permalink":"https://blog.xiaoz.site/tags/typescript/"},{"name":"react","slug":"react","permalink":"https://blog.xiaoz.site/tags/react/"}]},{"title":"typescriptå­¦ä¹ (4) å‡½æ•°","slug":"learn-ts4","date":"2019-05-12T13:30:33.000Z","updated":"2019-09-06T06:15:25.722Z","comments":true,"path":"2019/05/12/learn-ts4/","link":"","permalink":"https://blog.xiaoz.site/2019/05/12/learn-ts4/","excerpt":"å‡½æ•°ç±»å‹123function add(x: number, y: number): number &#123; return x + y&#125; å®Œæ•´å‡½æ•°ç±»å‹1234let myAdd: (baseValue: number, increment: number) =&gt; number =function(x: number, y: number): number &#123; return x + y&#125; tsæœ‰ç±»å‹æ¨æ–­ï¼Œä¸éœ€è¦å†™çš„é‚£ä¹ˆå®Œæ•´ï¼Œä¸Šé¢çš„ä¾‹å­å¯ä»¥åªå†™å·¦è¾¹æˆ–å³è¾¹","text":"å‡½æ•°ç±»å‹123function add(x: number, y: number): number &#123; return x + y&#125; å®Œæ•´å‡½æ•°ç±»å‹1234let myAdd: (baseValue: number, increment: number) =&gt; number =function(x: number, y: number): number &#123; return x + y&#125; tsæœ‰ç±»å‹æ¨æ–­ï¼Œä¸éœ€è¦å†™çš„é‚£ä¹ˆå®Œæ•´ï¼Œä¸Šé¢çš„ä¾‹å­å¯ä»¥åªå†™å·¦è¾¹æˆ–å³è¾¹ å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°æ²¡ä¼ å‚çš„æ—¶å€™ï¼Œå®ƒçš„å€¼å°±æ˜¯ undefinedï¼Œå¯é€‰å‚æ•°å¿…é¡»è·Ÿåœ¨å¿…é¡»å‚æ•°åé¢ 1let myAdd: (baseValue: number, increment?: number) =&gt; number é»˜è®¤åˆå§‹åŒ–å€¼çš„å‚æ•°ï¼šå½“ç”¨æˆ·æ²¡æœ‰ä¼ é€’è¿™ä¸ªå‚æ•°æˆ–ä¼ é€’çš„å€¼æ˜¯ undefined æ—¶ï¼Œä¸ºå‚æ•°æä¾›ä¸€ä¸ªé»˜è®¤å€¼ 123function buildName(firstName: string, lastName = 'Smith'): string &#123; return firstName + ' ' + lastName&#125; å‰©ä½™å‚æ•°æƒ³åŒæ—¶æ“ä½œå¤šä¸ªå‚æ•°ï¼Œæˆ–è€…ä½ å¹¶ä¸çŸ¥é“ä¼šæœ‰å¤šå°‘å‚æ•°ä¼ é€’è¿›æ¥ã€‚ åœ¨ JavaScript é‡Œï¼Œä½ å¯ä»¥ä½¿ç”¨ arguments æ¥è®¿é—®æ‰€æœ‰ä¼ å…¥çš„å‚æ•°ã€‚ åœ¨ TypeScript é‡Œï¼Œä½ å¯ä»¥æŠŠæ‰€æœ‰å‚æ•°æ”¶é›†åˆ°ä¸€ä¸ªå˜é‡é‡Œï¼š 12345function buildName(firstName: string, ...restOfName: string[]): string &#123; return firstName + ' ' + restOfName.join(' ')&#125;let employeeName = buildName('Joseph', 'Samuel', 'Lucas', 'MacKinzie') thisTypeScript èƒ½é€šçŸ¥ä½ é”™è¯¯åœ°ä½¿ç”¨äº† this çš„åœ°æ–¹ this å’Œç®­å¤´å‡½æ•°ç®­å¤´å‡½æ•°èƒ½ä¿å­˜å‡½æ•°åˆ›å»ºæ—¶çš„ this å€¼ï¼Œè€Œä¸æ˜¯è°ƒç”¨æ—¶çš„å€¼ this å‚æ•°å¯ä»¥æä¾›ä¸€ä¸ªæ˜¾å¼çš„ this å‚æ•°ã€‚ this å‚æ•°æ˜¯ä¸ªå‡çš„å‚æ•°ï¼Œå®ƒå‡ºç°åœ¨å‚æ•°åˆ—è¡¨çš„æœ€å‰é¢ï¼š 123function f(this: void) &#123; // ç¡®ä¿â€œthisâ€åœ¨æ­¤ç‹¬ç«‹å‡½æ•°ä¸­ä¸å¯ç”¨&#125; ä¸€ä¸ªå®šä¹‰ this å‚æ•°çš„ä¾‹å­ 123456789101112131415161718192021222324252627282930interface Card &#123; suit: string card: number&#125;interface Deck &#123; suits: string[] cards: number[] createCardPicker (this: Deck): () =&gt; Card&#125;let deck: Deck = &#123; suits: ['hearts', 'spades', 'clubs', 'diamonds'], cards: Array(52), // NOTE: å‡½æ•°ç°åœ¨æ˜¾å¼æŒ‡å®šå…¶è¢«è°ƒç”¨æ–¹å¿…é¡»æ˜¯ deck ç±»å‹ createCardPicker: function (this: Deck) &#123; return () =&gt; &#123; let pickedCard = Math.floor(Math.random() * 52) let pickedSuit = Math.floor(pickedCard / 13) // console.log(this.a) // Property 'a' does not exist on type 'Deck' return &#123;suit: this.suits[pickedSuit], card: pickedCard % 13&#125; &#125; &#125;&#125;let cardPicker = deck.createCardPicker()let pickedCard = cardPicker()console.log('card: ' + pickedCard.card + ' of ' + pickedCard.suit) å‡½æ•°é‡è½½JavaScript æœ¬èº«æ˜¯ä¸ªåŠ¨æ€è¯­è¨€ã€‚JavaScript é‡Œå‡½æ•°æ ¹æ®ä¼ å…¥ä¸åŒçš„å‚æ•°è€Œè¿”å›ä¸åŒç±»å‹çš„æ•°æ®çš„åœºæ™¯æ˜¯å¾ˆå¸¸è§çš„ã€‚æ–¹æ³•æ˜¯ä¸ºåŒä¸€ä¸ªå‡½æ•°æä¾›å¤šä¸ªå‡½æ•°ç±»å‹å®šä¹‰æ¥è¿›è¡Œå‡½æ•°é‡è½½ã€‚ ç¼–è¯‘å™¨ä¼šæ ¹æ®è¿™ä¸ªåˆ—è¡¨å»å¤„ç†å‡½æ•°çš„è°ƒç”¨ã€‚ 1234567891011121314151617181920212223let suits = ['hearts', 'spades', 'clubs', 'diamonds']function pickCard(x: &#123;suit: string; card: number &#125;[]): numberfunction pickCard(x: number): &#123;suit: string; card: number &#125;function pickCard(x): any &#123; if (Array.isArray(x)) &#123; let pickedCard = Math.floor(Math.random() * x.length) return pickedCard &#125; else if (typeof x === 'number') &#123; let pickedSuit = Math.floor(x / 13) return &#123; suit: suits[pickedSuit], card: x % 13 &#125; &#125;&#125;let myDeck = [ &#123; suit: 'diamonds', card: 2 &#125;, &#123; suit: 'spades', card: 10 &#125;, &#123; suit: 'hearts', card: 4 &#125;]let pickedCard1 = myDeck[pickCard(myDeck)];let pickedCard2 = pickCard(15)let pickedCard3 = pickCard('aaa') // error ç±»å‹â€œ\"aaa\"â€çš„å‚æ•°ä¸èƒ½èµ‹ç»™ç±»å‹â€œnumberâ€çš„å‚æ•° é‡è½½çš„ pickCard å‡½æ•°åœ¨è°ƒç”¨çš„æ—¶å€™ä¼šè¿›è¡Œæ­£ç¡®çš„ç±»å‹æ£€æŸ¥","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://blog.xiaoz.site/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"typescript","slug":"å­¦ä¹ ç¬”è®°/typescript","permalink":"https://blog.xiaoz.site/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/typescript/"}],"tags":[{"name":"typescript","slug":"typescript","permalink":"https://blog.xiaoz.site/tags/typescript/"}]},{"title":"typescriptå­¦ä¹ (3) ç±»","slug":"learn-ts3","date":"2019-05-11T15:44:09.000Z","updated":"2019-09-06T06:15:25.722Z","comments":true,"path":"2019/05/11/learn-ts3/","link":"","permalink":"https://blog.xiaoz.site/2019/05/11/learn-ts3/","excerpt":"ç®€å•ä»‹ç»123456789class Animal &#123; name: string; constructor(name: string) &#123; this.name = name; &#125; move(distance: number = 0): void &#123; console.log(`$&#123;this.name&#125; moved $&#123;distance&#125;`); &#125;&#125; ç»§æ‰¿é¢å‘å¯¹è±¡æ¨¡å¼ï¼ŒåŸºäºç±»çš„ç¨‹åºè®¾è®¡ä¸­ä¸€ç§æœ€åŸºæœ¬çš„æ¨¡å¼æ˜¯å…è®¸ä½¿ç”¨ç»§æ‰¿æ¥æ‰©å±•ç°æœ‰çš„ç±»","text":"ç®€å•ä»‹ç»123456789class Animal &#123; name: string; constructor(name: string) &#123; this.name = name; &#125; move(distance: number = 0): void &#123; console.log(`$&#123;this.name&#125; moved $&#123;distance&#125;`); &#125;&#125; ç»§æ‰¿é¢å‘å¯¹è±¡æ¨¡å¼ï¼ŒåŸºäºç±»çš„ç¨‹åºè®¾è®¡ä¸­ä¸€ç§æœ€åŸºæœ¬çš„æ¨¡å¼æ˜¯å…è®¸ä½¿ç”¨ç»§æ‰¿æ¥æ‰©å±•ç°æœ‰çš„ç±» 1234567891011121314151617181920212223242526272829303132333435class Animal &#123; name: string constructor(name: string) &#123; this.name = name &#125; move(distance: number = 0) &#123; console.log(`$&#123;this.name&#125; moved $&#123;distance&#125;m.`) &#125;&#125;class Snake extends Animal &#123; constructor(name: string) &#123; super(name) &#125; move(distance: number = 5) &#123; console.log('Slithering...') super.move(distance) &#125;&#125;class Horse extends Animal &#123; constructor(name: string) &#123; super(name) &#125; move(distance: number = 45) &#123; console.log('Galloping...') super.move(distance) &#125;&#125;let sam = new Snake('Sammy')let tom: Animal = new Horse('Tommy')sam.move()tom.move(34) æ´¾ç”Ÿç±»åŒ…å«äº†ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå®ƒ å¿…é¡»è°ƒç”¨ super()ï¼Œå®ƒä¼šæ‰§è¡ŒåŸºç±»çš„æ„é€ å‡½æ•°ã€‚ è€Œä¸”ï¼Œåœ¨æ„é€ å‡½æ•°é‡Œè®¿é—® this çš„å±æ€§ä¹‹å‰ï¼Œæˆ‘ä»¬ ä¸€å®šè¦è°ƒç”¨ super()ã€‚ è¿™ä¸ªæ˜¯ TypeScript å¼ºåˆ¶æ‰§è¡Œçš„ä¸€æ¡é‡è¦è§„åˆ™ã€‚ è¿™ä¸ªä¾‹å­æ¼”ç¤ºäº†å¦‚ä½•åœ¨å­ç±»é‡Œå¯ä»¥é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚Snakeç±»å’Œ Horse ç±»éƒ½åˆ›å»ºäº† move æ–¹æ³•ï¼Œå®ƒä»¬é‡å†™äº†ä» Animal ç»§æ‰¿æ¥çš„ move æ–¹æ³•ï¼Œä½¿å¾— move æ–¹æ³•æ ¹æ®ä¸åŒçš„ç±»è€Œå…·æœ‰ä¸åŒçš„åŠŸèƒ½ã€‚æ³¨æ„ï¼Œå³ä½¿ tom è¢«å£°æ˜ä¸º Animal ç±»å‹ï¼Œä½†å› ä¸ºå®ƒçš„å€¼æ˜¯ Horseï¼Œè°ƒç”¨ tom.move(34) æ—¶ï¼Œå®ƒä¼šè°ƒç”¨ Horse é‡Œé‡å†™çš„æ–¹æ³•ã€‚å­ç±»æ–¹æ³•é‡Œä½¿ç”¨superè°ƒç”¨çˆ¶ç±»æ–¹æ³• å…¬å…±ï¼Œç§æœ‰ä¸å—ä¿æŠ¤çš„ä¿®é¥°ç¬¦publicTypeScript é‡Œï¼Œæˆå‘˜éƒ½é»˜è®¤ä¸º public privateå½“æˆå‘˜è¢«æ ‡è®°æˆ private æ—¶ï¼Œå®ƒå°±ä¸èƒ½åœ¨å£°æ˜å®ƒçš„ç±»çš„å¤–éƒ¨è®¿é—® 12345678class Animal &#123; private name: string constructor(name: string) &#123; this.name = name &#125;&#125;new Animal('Cat').name // é”™è¯¯: 'name' æ˜¯ç§æœ‰çš„. å¦‚æœå…¶ä¸­ä¸€ä¸ªç±»å‹é‡ŒåŒ…å«ä¸€ä¸ª private æˆå‘˜ï¼Œé‚£ä¹ˆåªæœ‰å½“å¦å¤–ä¸€ä¸ªç±»å‹ä¸­ä¹Ÿå­˜åœ¨è¿™æ ·ä¸€ä¸ª private æˆå‘˜ï¼Œå¹¶ä¸”å®ƒä»¬éƒ½æ˜¯æ¥è‡ªåŒä¸€å¤„å£°æ˜æ—¶ï¼Œæˆ‘ä»¬æ‰è®¤ä¸ºè¿™ä¸¤ä¸ªç±»å‹æ˜¯å…¼å®¹çš„ã€‚ å¯¹äº protected æˆå‘˜ä¹Ÿä½¿ç”¨è¿™ä¸ªè§„åˆ™ protectedprotected ä¿®é¥°ç¬¦ä¸ private ä¿®é¥°ç¬¦çš„è¡Œä¸ºå¾ˆç›¸ä¼¼ï¼Œä½†æœ‰ä¸€ç‚¹ä¸åŒï¼Œ protected æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­ä»ç„¶å¯ä»¥è®¿é—® 1234567891011121314151617181920212223class Person &#123; protected name: string constructor(name: string) &#123; this.name = name &#125;&#125;class Employee extends Person &#123; private department: string constructor(name: string, department: string) &#123; super(name) this.department = department &#125; getElevatorPitch() &#123; return `Hello, my name is $&#123;this.name&#125; and I work in $&#123;this.department&#125;.` &#125;&#125;let howard = new Employee('Howard', 'Sales')console.log(howard.getElevatorPitch())console.log(howard.name) // error æ³¨æ„ï¼Œæˆ‘ä»¬ä¸èƒ½åœ¨ Person ç±»å¤–ä½¿ç”¨ nameï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶å¯ä»¥é€šè¿‡ Employee ç±»çš„å®ä¾‹æ–¹æ³•è®¿é—®ï¼Œå› ä¸º Employee æ˜¯ç”± Person æ´¾ç”Ÿè€Œæ¥çš„ã€‚ æ„é€ å‡½æ•°ä¹Ÿå¯ä»¥è¢«æ ‡è®°æˆ protected, è¿™æ„å‘³ç€è¿™ä¸ªç±»ä¸èƒ½åœ¨åŒ…å«å®ƒçš„ç±»å¤–è¢«å®ä¾‹åŒ–ï¼Œä½†æ˜¯èƒ½è¢«ç»§æ‰¿ã€‚æ¯”å¦‚ï¼š 1234567891011121314151617181920212223class Person &#123; protected name: string protected constructor(name: string) &#123; this.name = name &#125;&#125;// Employee èƒ½å¤Ÿç»§æ‰¿ Personclass Employee extends Person &#123; private department: string constructor(name: string, department: string) &#123; super(name) this.department = department &#125; public getElevatorPitch() &#123; return `Hello, my name is $&#123;this.name&#125; and I work in $&#123;this.department&#125;.` &#125;&#125;let howard = new Employee('Howard', 'Sales')let john = new Person('John') // é”™è¯¯: 'Person' çš„æ„é€ å‡½æ•°æ˜¯è¢«ä¿æŠ¤çš„. readonlyä¿®é¥°ç¬¦ä½¿ç”¨ readonly å…³é”®å­—å°†å±æ€§è®¾ç½®ä¸ºåªè¯»çš„ã€‚ åªè¯»å±æ€§å¿…é¡»åœ¨å£°æ˜æ—¶æˆ–æ„é€ å‡½æ•°é‡Œè¢«åˆå§‹åŒ– 123456789class Person &#123; readonly name: string constructor(name: string) &#123; this.name = name &#125;&#125;let john = new Person('John')john.name = 'peter' // error: Cannot assign to 'name' because it is a read-only property å‚æ•°å±æ€§åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ Person ç±»é‡Œå®šä¹‰ä¸€ä¸ªåªè¯»æˆå‘˜ name å’Œä¸€ä¸ªå‚æ•°ä¸º name çš„æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”ç«‹åˆ»å°† name çš„å€¼èµ‹ç»™ this.nameï¼Œè¿™ç§æƒ…å†µç»å¸¸ä¼šé‡åˆ°ã€‚ å‚æ•°å±æ€§å¯ä»¥æ–¹ä¾¿åœ°è®©æˆ‘ä»¬åœ¨ä¸€ä¸ªåœ°æ–¹å®šä¹‰å¹¶åˆå§‹åŒ–ä¸€ä¸ªæˆå‘˜ã€‚ ä¸‹é¢çš„ä¾‹å­æ˜¯å¯¹ä¹‹å‰ Person ç±»çš„ä¿®æ”¹ç‰ˆï¼Œä½¿ç”¨äº†å‚æ•°å±æ€§ 1234class Person &#123; constructor(readonly name: string) &#123; &#125;&#125; å°±æ˜¯æŠŠå£°æ˜å’Œèµ‹å€¼åˆå¹¶è‡³ä¸€å¤„ï¼Œpublic,private,protected ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä¸å»ºè®®ä½¿ç”¨ï¼Œä¸æ¸…æ™° å­˜å–å™¨é€šè¿‡ getters/setters æ¥æˆªå–å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®ã€‚ å®ƒèƒ½å¸®åŠ©ä½ æœ‰æ•ˆçš„æ§åˆ¶å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—® 123456789101112class Human &#123; private _name!: string; // ä¸åŠ æ„Ÿå¹å·ä¼šæŠ¥é”™ï¼šå±æ€§â€œ_nameâ€æ²¡æœ‰åˆå§‹åŒ–è¡¨è¾¾å¼ï¼Œä¸”æœªåœ¨æ„é€ å‡½æ•°ä¸­æ˜ç¡®èµ‹å€¼ get name(): string &#123; return this._name; &#125; set name(newName: string) &#123; this._name = `newName:$&#123;newName&#125;`; &#125;&#125;let mike = new Human();mike.name = 'mike'; é™æ€å±æ€§é™æ€å±æ€§å­˜åœ¨äºç±»æœ¬èº«ä¸Šé¢è€Œä¸æ˜¯ç±»çš„å®ä¾‹ä¸Š 123456789class Human &#123; static age: number = 15; show() &#123; console.log(Human.age); &#125;&#125;const mike = new Human();mike.show(); æŠ½è±¡ç±»æŠ½è±¡ç±»åšä¸ºå…¶å®ƒæ´¾ç”Ÿç±»çš„åŸºç±»ä½¿ç”¨ã€‚ å®ƒä»¬ä¸€èˆ¬ä¸ä¼šç›´æ¥è¢«å®ä¾‹åŒ–ã€‚ä¸åŒäºæ¥å£ï¼ŒæŠ½è±¡ç±»å¯ä»¥åŒ…å«æˆå‘˜çš„å®ç°ç»†èŠ‚ã€‚ abstract å…³é”®å­—æ˜¯ç”¨äºå®šä¹‰æŠ½è±¡ç±»å’Œåœ¨æŠ½è±¡ç±»å†…éƒ¨å®šä¹‰æŠ½è±¡æ–¹æ³• 12345678910111213141516abstract class Animal1 &#123; abstract makeSound(): void; move(): void &#123; console.log('moving'); &#125;&#125;class Bird extends Animal1 &#123; makeSound() &#123; console.log('jiujiujiu'); &#125;&#125;const bird: Bird = new Bird();bird.makeSound();bird.move(); æŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ä¸åŒ…å«å…·ä½“å®ç°å¹¶ä¸”å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç°ã€‚ æŠ½è±¡æ–¹æ³•çš„è¯­æ³•ä¸æ¥å£æ–¹æ³•ç›¸ä¼¼ã€‚ä¸¤è€…éƒ½æ˜¯å®šä¹‰æ–¹æ³•ç­¾åä½†ä¸åŒ…å«æ–¹æ³•ä½“ã€‚ç„¶è€Œï¼ŒæŠ½è±¡æ–¹æ³•å¿…é¡»åŒ…å« abstract å…³é”®å­—å¹¶ä¸”å¯ä»¥åŒ…å«è®¿é—®ä¿®é¥°ç¬¦ï¼Œé™¤ privateï¼Œå› ä¸ºå­ç±»éœ€è¦å®ç°æŠ½è±¡æ–¹æ³• é«˜çº§æŠ€å·§æ„é€ å‡½æ•°å½“ä½ åœ¨ TypeScript é‡Œå£°æ˜äº†ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå®é™…ä¸ŠåŒæ—¶å£°æ˜äº†å¾ˆå¤šä¸œè¥¿ã€‚é¦–å…ˆå°±æ˜¯ç±»çš„ å®ä¾‹ çš„ç±»å‹ã€‚ 1234567891011121314class Greeter &#123; static standardGreeting = 'Hello, there' greeting: string constructor(message: string) &#123; this.greeting = message &#125; greet() &#123; return 'Hello, ' + this.greeting &#125;&#125;let greeter: Greetergreeter = new Greeter('world')console.log(greeter.greet()) è¿™é‡Œï¼Œæˆ‘ä»¬å†™äº† let greeter: Greeterï¼Œæ„æ€æ˜¯ Greeter ç±»çš„å®ä¾‹çš„ç±»å‹æ˜¯ Greeterã€‚ è¿™å¯¹äºç”¨è¿‡å…¶å®ƒé¢å‘å¯¹è±¡è¯­è¨€çš„ç¨‹åºå‘˜æ¥è®²å·²ç»æ˜¯è€ä¹ æƒ¯äº†ã€‚ æˆ‘ä»¬ä¹Ÿåˆ›å»ºäº†ä¸€ä¸ªå«åš æ„é€ å‡½æ•° çš„å€¼ ã€‚ è¿™ä¸ªå‡½æ•°ä¼šåœ¨æˆ‘ä»¬ä½¿ç”¨ new åˆ›å»ºç±»å®ä¾‹çš„æ—¶å€™è¢«è°ƒç”¨ã€‚ ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œä¸Šé¢çš„ä»£ç è¢«ç¼–è¯‘æˆJavaScriptåæ˜¯ä»€ä¹ˆæ ·å­çš„ï¼š 12345678910111213var Greeter = /** @class */ (function () &#123; function Greeter(message) &#123; this.greeting = message; &#125; Greeter.prototype.greet = function () &#123; return 'Hello, ' + this.greeting; &#125;; Greeter.standardGreeting = 'Hello, there'; return Greeter;&#125;());var greeter;greeter = new Greeter('world');console.log(greeter.greet()); ä¸Šé¢çš„ä»£ç é‡Œï¼Œvar Greeter å°†è¢«æ„é€ å‡½æ•°èµ‹å€¼ã€‚ å½“æˆ‘ä»¬è°ƒç”¨ new å¹¶æ‰§è¡Œäº†è¿™ä¸ªå‡½æ•°åï¼Œä¾¿ä¼šå¾—åˆ°ä¸€ä¸ªç±»çš„å®ä¾‹ã€‚è¿™ä¸ªæ„é€ å‡½æ•°ä¹ŸåŒ…å«äº†ç±»çš„æ‰€æœ‰é™æ€å±æ€§ã€‚ æ¢ä¸ªè§’åº¦è¯´ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºç±»å…·æœ‰ å®ä¾‹éƒ¨åˆ† ä¸ é™æ€éƒ¨åˆ† è¿™ä¸¤ä¸ªéƒ¨åˆ†ã€‚ è®©æˆ‘ä»¬ç¨å¾®æ”¹å†™ä¸€ä¸‹è¿™ä¸ªä¾‹å­ï¼Œçœ‹çœ‹å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ï¼š 123456789101112131415161718192021222324252627class Greeter &#123; static standardGreeting = 'Hello, there' greeting: string constructor(message?: string) &#123; this.greeting = message &#125; greet() &#123; if (this.greeting) &#123; return 'Hello, ' + this.greeting &#125; else &#123; return Greeter.standardGreeting &#125; &#125;&#125;let greeter: Greetergreeter = new Greeter()console.log(greeter.greet())let greeterMaker: typeof Greeter = GreetergreeterMaker.standardGreeting = 'Hey there'let greeter2: Greeter = new greeterMaker()console.log(greeter2.greet()) è¿™ä¸ªä¾‹å­é‡Œï¼Œ greeter1 ä¸ä¹‹å‰çœ‹åˆ°çš„ä¸€æ ·ã€‚ æˆ‘ä»¬å®ä¾‹åŒ– Greeterç±»ï¼Œå¹¶ä½¿ç”¨è¿™ä¸ªå¯¹è±¡ã€‚ ä¸æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„ä¸€æ ·ã€‚ å†ä¹‹åï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ç±»ã€‚ æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå«åš greeterMaker çš„å˜é‡ã€‚è¿™ä¸ªå˜é‡ä¿å­˜äº†è¿™ä¸ªç±»æˆ–è€…è¯´ä¿å­˜äº†ç±»æ„é€ å‡½æ•°ã€‚ ç„¶åæˆ‘ä»¬ä½¿ç”¨ typeof Greeterï¼Œæ„æ€æ˜¯å– Greeter ç±»çš„ç±»å‹ï¼Œè€Œä¸æ˜¯å®ä¾‹çš„ç±»å‹ã€‚æˆ–è€…æ›´ç¡®åˆ‡çš„è¯´ï¼Œâ€å‘Šè¯‰æˆ‘ Greeter æ ‡è¯†ç¬¦çš„ç±»å‹â€ï¼Œä¹Ÿå°±æ˜¯æ„é€ å‡½æ•°çš„ç±»å‹ã€‚ è¿™ä¸ªç±»å‹åŒ…å«äº†ç±»çš„æ‰€æœ‰é™æ€æˆå‘˜å’Œæ„é€ å‡½æ•°ã€‚ ä¹‹åï¼Œå°±å’Œå‰é¢ä¸€æ ·ï¼Œæˆ‘ä»¬åœ¨ greeterMaker ä¸Šä½¿ç”¨ newï¼Œåˆ›å»º Greeter çš„å®ä¾‹ã€‚ æŠŠç±»å½“åšæ¥å£ä½¿ç”¨å¦‚ä¸Šä¸€èŠ‚é‡Œæ‰€è®²çš„ï¼Œç±»å®šä¹‰ä¼šåˆ›å»ºä¸¤ä¸ªä¸œè¥¿ï¼šç±»çš„å®ä¾‹ç±»å‹å’Œä¸€ä¸ªæ„é€ å‡½æ•°ã€‚ å› ä¸ºç±»å¯ä»¥åˆ›å»ºå‡ºç±»å‹ï¼Œæ‰€ä»¥ä½ èƒ½å¤Ÿåœ¨å…è®¸ä½¿ç”¨æ¥å£çš„åœ°æ–¹ä½¿ç”¨ç±»ã€‚ 12345678910class Point &#123; x: number y: number&#125;interface Point3d extends Point &#123; z: number&#125;let point3d: Point3d = &#123;x: 1, y: 2, z: 3&#125;","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://blog.xiaoz.site/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"typescript","slug":"å­¦ä¹ ç¬”è®°/typescript","permalink":"https://blog.xiaoz.site/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/typescript/"}],"tags":[{"name":"typescript","slug":"typescript","permalink":"https://blog.xiaoz.site/tags/typescript/"}]},{"title":"typescriptå­¦ä¹ (2) æ¥å£","slug":"learn-ts2","date":"2019-05-09T13:45:30.000Z","updated":"2019-09-06T06:15:25.721Z","comments":true,"path":"2019/05/09/learn-ts2/","link":"","permalink":"https://blog.xiaoz.site/2019/05/09/learn-ts2/","excerpt":"ç®€å•ä»‹ç»TypeScript çš„æ ¸å¿ƒåŸåˆ™ä¹‹ä¸€æ˜¯å¯¹å€¼æ‰€å…·æœ‰çš„ç»“æ„è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œæ¥å£å°±æ˜¯å¯¹è§£æ„çš„ä¸€ç§æè¿° 1234interface Square &#123; color: string, area?: number // å¯é€‰&#125; åªè¯»å±æ€§åœ¨å±æ€§åå‰ç”¨ readonly æ¥æŒ‡å®šåªè¯»å±æ€§ 123456interface Point &#123; readonly x: number readonly y: number&#125;let p1: Point = &#123; x: 10, y: 20 &#125;p1.x = 5 // error!","text":"ç®€å•ä»‹ç»TypeScript çš„æ ¸å¿ƒåŸåˆ™ä¹‹ä¸€æ˜¯å¯¹å€¼æ‰€å…·æœ‰çš„ç»“æ„è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œæ¥å£å°±æ˜¯å¯¹è§£æ„çš„ä¸€ç§æè¿° 1234interface Square &#123; color: string, area?: number // å¯é€‰&#125; åªè¯»å±æ€§åœ¨å±æ€§åå‰ç”¨ readonly æ¥æŒ‡å®šåªè¯»å±æ€§ 123456interface Point &#123; readonly x: number readonly y: number&#125;let p1: Point = &#123; x: 10, y: 20 &#125;p1.x = 5 // error! TypeScript å…·æœ‰ ReadonlyArray ç±»å‹ï¼Œå®ƒä¸ Array ç›¸ä¼¼ï¼Œåªæ˜¯æŠŠæ‰€æœ‰å¯å˜æ–¹æ³•å»æ‰äº†ï¼Œå› æ­¤å¯ä»¥ç¡®ä¿æ•°ç»„åˆ›å»ºåå†ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹ 1234let arr: ReadonlyArray&lt;number&gt; = [1, 2, 3, 4]arr[0] = 66 // error!let arr1: number[] = [1, 2, 3]arr1 = arr // error! å¯ä»¥çœ‹åˆ°å°±ç®—æŠŠæ•´ä¸ª ReadonlyArray èµ‹å€¼åˆ°ä¸€ä¸ªæ™®é€šæ•°ç»„ä¹Ÿæ˜¯ä¸å¯ä»¥çš„ã€‚ ä½†æ˜¯ä½ å¯ä»¥ç”¨ç±»å‹æ–­è¨€é‡å†™ 1arr1 = arr as number[] é¢å¤–çš„å±æ€§æ£€æŸ¥12345interface SquareConfig &#123; color?: string width?: number [propName: string]: any&#125; å‡½æ•°æ¥å£123interface Func &#123; (param: string): boolean&#125; å¯¹äºå‡½æ•°ç±»å‹çš„ç±»å‹æ£€æŸ¥æ¥è¯´ï¼Œå‡½æ•°çš„å‚æ•°åä¸éœ€è¦ä¸æ¥å£é‡Œå®šä¹‰çš„åå­—ç›¸åŒ¹é… 12345let func: Funcfunc = function(src: string): boolean &#123; let result = src.search('123'); return result &gt; -1&#125; å¯ç´¢å¼•çš„ç±»å‹ä¸ä½¿ç”¨æ¥å£æè¿°å‡½æ•°ç±»å‹å·®ä¸å¤šï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æè¿°é‚£äº›èƒ½å¤Ÿâ€œé€šè¿‡ç´¢å¼•å¾—åˆ°â€çš„ç±»å‹ï¼Œæ¯”å¦‚ a[10] æˆ– ageMap[&#39;daniel&#39;]ã€‚ å¯ç´¢å¼•ç±»å‹å…·æœ‰ä¸€ä¸ª ç´¢å¼•ç­¾åï¼Œå®ƒæè¿°äº†å¯¹è±¡ç´¢å¼•çš„ç±»å‹ï¼Œè¿˜æœ‰ç›¸åº”çš„ç´¢å¼•è¿”å›å€¼ç±»å‹ã€‚ è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼š 12345678interface StringArray &#123; [index: number]: string&#125;let myArray: StringArraymyArray = ['Bob', 'Fred']let myStr: string = myArray[0] ä¸Šé¢ä¾‹å­é‡Œï¼Œæˆ‘ä»¬å®šä¹‰äº† StringArray æ¥å£ï¼Œå®ƒå…·æœ‰ç´¢å¼•ç­¾åã€‚ è¿™ä¸ªç´¢å¼•ç­¾åè¡¨ç¤ºäº†å½“ç”¨ number å»ç´¢å¼• StringArray æ—¶ä¼šå¾—åˆ° string ç±»å‹çš„è¿”å›å€¼ã€‚ TypeScript æ”¯æŒä¸¤ç§ç´¢å¼•ç­¾åï¼šå­—ç¬¦ä¸²å’Œæ•°å­—ã€‚ å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤ç§ç±»å‹çš„ç´¢å¼•ï¼Œä½†æ˜¯æ•°å­—ç´¢å¼•çš„è¿”å›å€¼å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç´¢å¼•è¿”å›å€¼ç±»å‹çš„å­ç±»å‹ã€‚ è¿™æ˜¯å› ä¸ºå½“ä½¿ç”¨ number æ¥ç´¢å¼•æ—¶ï¼ŒJavaScript ä¼šå°†å®ƒè½¬æ¢æˆstring ç„¶åå†å»ç´¢å¼•å¯¹è±¡ã€‚ ä¹Ÿå°±æ˜¯è¯´ç”¨ 100ï¼ˆä¸€ä¸ª numberï¼‰å»ç´¢å¼•ç­‰åŒäºä½¿ç”¨&#39;100&#39;ï¼ˆä¸€ä¸ª string ï¼‰å»ç´¢å¼•ï¼Œå› æ­¤ä¸¤è€…éœ€è¦ä¿æŒä¸€è‡´ã€‚ 123456789101112class Animal &#123; name: string&#125;class Dog extends Animal &#123; breed: string&#125;// é”™è¯¯ï¼šä½¿ç”¨æ•°å€¼å‹çš„å­—ç¬¦ä¸²ç´¢å¼•ï¼Œæœ‰æ—¶ä¼šå¾—åˆ°å®Œå…¨ä¸åŒçš„Animal!interface NotOkay &#123; [x: number]: Animal [x: string]: Dog&#125; å­—ç¬¦ä¸²ç´¢å¼•ç­¾åèƒ½å¤Ÿå¾ˆå¥½çš„æè¿° dictionary æ¨¡å¼ï¼Œå¹¶ä¸”å®ƒä»¬ä¹Ÿä¼šç¡®ä¿æ‰€æœ‰å±æ€§ä¸å…¶è¿”å›å€¼ç±»å‹ç›¸åŒ¹é…ã€‚ å› ä¸ºå­—ç¬¦ä¸²ç´¢å¼•å£°æ˜äº† obj.property å’Œ obj[&#39;property&#39;] ä¸¤ç§å½¢å¼éƒ½å¯ä»¥ã€‚ ä¸‹é¢çš„ä¾‹å­é‡Œï¼Œ name çš„ç±»å‹ä¸å­—ç¬¦ä¸²ç´¢å¼•ç±»å‹ä¸åŒ¹é…ï¼Œæ‰€ä»¥ç±»å‹æ£€æŸ¥å™¨ç»™å‡ºä¸€ä¸ªé”™è¯¯æç¤ºï¼š 12345interface NumberDictionary &#123; [index: string]: number; length: number; // å¯ä»¥ï¼Œlengthæ˜¯numberç±»å‹ name: string // é”™è¯¯ï¼Œ`name`çš„ç±»å‹ä¸ç´¢å¼•ç±»å‹è¿”å›å€¼çš„ç±»å‹ä¸åŒ¹é…&#125; æœ€åï¼Œä½ å¯ä»¥å°†ç´¢å¼•ç­¾åè®¾ç½®ä¸ºåªè¯»ï¼Œè¿™æ ·å°±é˜²æ­¢äº†ç»™ç´¢å¼•èµ‹å€¼ï¼š 12345interface ReadonlyStringArray &#123; readonly [index: number]: string;&#125;let myArray: ReadonlyStringArray = ['Alice', 'Bob'];myArray[2] = 'Mallory'; // error! ç±»å®ä¾‹æ¥å£implements å…³é”®å­—çš„å«ä¹‰æ˜¯â€œå®ç°â€ 123456789101112interface ClockInterface &#123; currentTime: Date setTime(d: Date):void&#125;class Clock implements ClockInterface &#123; currentTime: Date setTime(d: Date) &#123; this.currentTime = d &#125; constructor(h: number, m: number) &#123; &#125;&#125; ç±»ç±»å‹æ¥å£123interface ClockConstructor &#123; new (hour: number, minute: number)&#125; ç»§æ‰¿æ¥å£12345678910interface Shape &#123; color: string&#125;interface Square extends Shape &#123; sideLength: number&#125;let square: Square = &#123; color: 'red', sideLength: 10&#125;; ä¸€ä¸ªæ¥å£å¯ä»¥ç»§æ‰¿å¤šä¸ªæ¥å£ï¼Œåˆ›å»ºå‡ºå¤šä¸ªæ¥å£çš„åˆæˆæ¥å£ 12345678910111213141516interface Shape &#123; color: string&#125;interface PenStroke &#123; penWidth: number&#125;interface Square extends Shape, PenStroke &#123; sideLength: number&#125;let square: Square = &#123; color: 'red', penWidth:20, sideLength: 10&#125;; æ¥å£ç»§æ‰¿ç±»å½“æ¥å£ç»§æ‰¿äº†ä¸€ä¸ªç±»ç±»å‹æ—¶ï¼Œå®ƒä¼šç»§æ‰¿ç±»çš„æˆå‘˜ä½†ä¸åŒ…æ‹¬å…¶å®ç°ã€‚ å°±å¥½åƒæ¥å£å£°æ˜äº†æ‰€æœ‰ç±»ä¸­å­˜åœ¨çš„æˆå‘˜ï¼Œä½†å¹¶æ²¡æœ‰æä¾›å…·ä½“å®ç°ä¸€æ ·ã€‚ æ¥å£åŒæ ·ä¼šç»§æ‰¿åˆ°ç±»çš„ private å’Œ protected æˆå‘˜ã€‚ è¿™æ„å‘³ç€å½“ä½ åˆ›å»ºäº†ä¸€ä¸ªæ¥å£ç»§æ‰¿äº†ä¸€ä¸ªæ‹¥æœ‰ç§æœ‰æˆ–å—ä¿æŠ¤çš„æˆå‘˜çš„ç±»æ—¶ï¼Œè¿™ä¸ªæ¥å£ç±»å‹åªèƒ½è¢«è¿™ä¸ªç±»æˆ–å…¶å­ç±»æ‰€å®ç°ï¼Œä½¿ç”¨åœºæ™¯ä¸å¤š 1234567891011121314151617181920class Control &#123; private state: any&#125;interface SelectableControl extends Control &#123; select(): void&#125;class Button extends Control implements SelectableControl &#123; select() &#123; &#125;&#125;class TextBox extends Control &#123; select() &#123; &#125;&#125;// Errorï¼šâ€œImageCâ€ç±»å‹ç¼ºå°‘â€œstateâ€å±æ€§ã€‚class ImageC implements SelectableControl &#123; select() &#123; &#125;&#125; åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼ŒSelectableControl åŒ…å«äº† Control çš„æ‰€æœ‰æˆå‘˜ï¼ŒåŒ…æ‹¬ç§æœ‰æˆå‘˜ stateã€‚ å› ä¸º state æ˜¯ç§æœ‰æˆå‘˜ï¼Œæ‰€ä»¥åªèƒ½å¤Ÿæ˜¯ Control çš„å­ç±»ä»¬æ‰èƒ½å®ç° SelectableControl æ¥å£ã€‚ å› ä¸ºåªæœ‰ Control çš„å­ç±»æ‰èƒ½å¤Ÿæ‹¥æœ‰ä¸€ä¸ªå£°æ˜äºControl çš„ç§æœ‰æˆå‘˜ stateï¼Œè¿™å¯¹ç§æœ‰æˆå‘˜çš„å…¼å®¹æ€§æ˜¯å¿…éœ€çš„ã€‚ åœ¨ Control ç±»å†…éƒ¨ï¼Œæ˜¯å…è®¸é€šè¿‡ SelectableControl çš„å®ä¾‹æ¥è®¿é—®ç§æœ‰æˆå‘˜ state çš„ã€‚ å®é™…ä¸Šï¼ŒSelectableControl æ¥å£å’Œæ‹¥æœ‰ select æ–¹æ³•çš„ Control ç±»æ˜¯ä¸€æ ·çš„ã€‚Buttonå’Œ TextBox ç±»æ˜¯ SelectableControl çš„å­ç±»ï¼ˆå› ä¸ºå®ƒä»¬éƒ½ç»§æ‰¿è‡ªControl å¹¶æœ‰ select æ–¹æ³•ï¼‰ï¼Œä½† ImageC ç±»å¹¶ä¸æ˜¯è¿™æ ·çš„ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://blog.xiaoz.site/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"typescript","slug":"å­¦ä¹ ç¬”è®°/typescript","permalink":"https://blog.xiaoz.site/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/typescript/"}],"tags":[{"name":"typescript","slug":"typescript","permalink":"https://blog.xiaoz.site/tags/typescript/"}]},{"title":"typescriptå­¦ä¹ (1) åŸºç¡€ç±»å‹","slug":"learn-ts1","date":"2019-05-09T13:24:30.000Z","updated":"2019-09-06T06:15:25.721Z","comments":true,"path":"2019/05/09/learn-ts1/","link":"","permalink":"https://blog.xiaoz.site/2019/05/09/learn-ts1/","excerpt":"è®°å½•è‡ªå·±å­¦ä¹ typescriptçš„è¿‡ç¨‹ï¼Œæœ¬èŠ‚åŸºç¡€å†…å®¹éƒ¨åˆ†æ‘˜æŠ„è‡ªæ…•è¯¾ç½‘æ•™ç¨‹ï¼Œä»¥åå¤æ‚éƒ¨åˆ†å°½é‡ä¼šç”¨è‡ªå·±çš„ç†è§£æ¥å†™ typescriptçš„åŸºæœ¬ç±»å‹TypeScript æ”¯æŒä¸ JavaScript å‡ ä¹ç›¸åŒçš„æ•°æ®ç±»å‹ï¼Œæ­¤å¤–è¿˜æä¾›äº†å®ç”¨çš„æšä¸¾ç±»å‹æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨ã€‚ å¸ƒå°”å€¼1let isDone: boolean = false","text":"è®°å½•è‡ªå·±å­¦ä¹ typescriptçš„è¿‡ç¨‹ï¼Œæœ¬èŠ‚åŸºç¡€å†…å®¹éƒ¨åˆ†æ‘˜æŠ„è‡ªæ…•è¯¾ç½‘æ•™ç¨‹ï¼Œä»¥åå¤æ‚éƒ¨åˆ†å°½é‡ä¼šç”¨è‡ªå·±çš„ç†è§£æ¥å†™ typescriptçš„åŸºæœ¬ç±»å‹TypeScript æ”¯æŒä¸ JavaScript å‡ ä¹ç›¸åŒçš„æ•°æ®ç±»å‹ï¼Œæ­¤å¤–è¿˜æä¾›äº†å®ç”¨çš„æšä¸¾ç±»å‹æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨ã€‚ å¸ƒå°”å€¼1let isDone: boolean = false æ•°å­—å’Œ JavaScript ä¸€æ ·ï¼ŒTypeScript é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½æ˜¯æµ®ç‚¹æ•°ã€‚ è¿™äº›æµ®ç‚¹æ•°çš„ç±»å‹æ˜¯ numberã€‚ é™¤äº†æ”¯æŒåè¿›åˆ¶å’Œåå…­è¿›åˆ¶å­—é¢é‡ï¼ŒTypeScript è¿˜æ”¯æŒ ECMAScript 2015ä¸­å¼•å…¥çš„äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶å­—é¢é‡ã€‚ 1234let decLiteral: number = 20let hexLiteral: number = 0x14let binaryLiteral: number = 0b10100let octalLiteral: number = 0o24 å­—ç¬¦ä¸²1let name: string = `Hello, my name is $&#123; name &#125;` æ•°ç»„ä¸¤ç§æ–¹å¼ï¼šç¬¬ä¸€ç§ï¼Œå¯ä»¥åœ¨å…ƒç´ ç±»å‹åé¢æ¥ä¸Š []ï¼›ç¬¬äºŒç§ï¼Œæ•°ç»„æ³›å‹ï¼ŒArray&lt;å…ƒç´ ç±»å‹&gt; 123let list: number[] = [1, 2, 3]// æˆ–è€…let list: Array&lt;number&gt; = [1, 2, 3] å…ƒç»„ Tupleå…ƒç»„ç±»å‹å…è®¸è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥å…ƒç´ æ•°é‡å’Œç±»å‹çš„æ•°ç»„ï¼Œå„å…ƒç´ çš„ç±»å‹ä¸å¿…ç›¸åŒã€‚ æ¯”å¦‚ï¼Œä½ å¯ä»¥å®šä¹‰ä¸€å¯¹å€¼åˆ†åˆ«ä¸º string å’Œ number ç±»å‹çš„å…ƒç»„ã€‚ 123let x: [string, number]x = ['hello', 10] // OKx = [10, 'hello'] // Error å½“è®¿é—®ä¸€ä¸ªå·²çŸ¥ç´¢å¼•çš„å…ƒç´ ï¼Œä¼šå¾—åˆ°æ­£ç¡®çš„ç±»å‹ï¼š 12console.log(x[0].substr(1)) // OKconsole.log(x[1].substr(1)) // Error, 'number' ä¸å­˜åœ¨ 'substr' æ–¹æ³• å½“è®¿é—®ä¸€ä¸ªè¶Šç•Œçš„å…ƒç´ ï¼Œä¼šä½¿ç”¨è”åˆç±»å‹æ›¿ä»£ï¼š 12345x[3] = 'world' // OK, å­—ç¬¦ä¸²å¯ä»¥èµ‹å€¼ç»™(string | number)ç±»å‹console.log(x[5].toString()) // OK, 'string' å’Œ 'number' éƒ½æœ‰ toStringx[6] = true // Error, å¸ƒå°”ä¸æ˜¯(string | number)ç±»å‹ æ³¨æ„ï¼šè‡ªä» TyeScript 3.1 ç‰ˆæœ¬ä¹‹åï¼Œè®¿é—®è¶Šç•Œå…ƒç´ ä¼šæŠ¥é”™ï¼Œæˆ‘ä»¬ä¸åº”è¯¥å†ä½¿ç”¨è¯¥ç‰¹æ€§ã€‚ æšä¸¾12enum Color &#123;Red, Green, Blue&#125;let c: Color = Color.Green é»˜è®¤æƒ…å†µä¸‹ï¼Œä» 0 å¼€å§‹ä¸ºå…ƒç´ ç¼–å·ã€‚ ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨çš„æŒ‡å®šæˆå‘˜çš„æ•°å€¼ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†ä¸Šé¢çš„ä¾‹å­æ”¹æˆä» 1 å¼€å§‹ç¼–å·ï¼š 12enum Color &#123;Red = 1, Green, Blue&#125;let c: Color = Color.Green æˆ–è€…ï¼Œå…¨éƒ¨éƒ½é‡‡ç”¨æ‰‹åŠ¨èµ‹å€¼ï¼š 12enum Color &#123;Red = 1, Green = 2, Blue = 4&#125;let c: Color = Color.Green æšä¸¾ç±»å‹æä¾›çš„ä¸€ä¸ªä¾¿åˆ©æ˜¯ä½ å¯ä»¥ç”±æšä¸¾çš„å€¼å¾—åˆ°å®ƒçš„åå­—ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬çŸ¥é“æ•°å€¼ä¸º 2ï¼Œä½†æ˜¯ä¸ç¡®å®šå®ƒæ˜ å°„åˆ° Color é‡Œçš„å“ªä¸ªåå­—ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥æ‰¾ç›¸åº”çš„åå­—ï¼š 1234enum Color &#123;Red = 1, Green, Blue&#125;let colorName: string = Color[2]console.log(colorName) // æ˜¾ç¤º'Green'å› ä¸ºä¸Šé¢ä»£ç é‡Œå®ƒçš„å€¼æ˜¯2 any1234let notSure: any = 4notSure = 'maybe a string instead'notSure = falselet list: any[] = [1, true, 'free'] voidè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ 123function warnUser(): void &#123; console.log('This is my warning message')&#125; å£°æ˜ä¸€ä¸ª void ç±»å‹çš„å˜é‡æ²¡æœ‰ä»€ä¹ˆå¤§ç”¨ï¼Œå› ä¸ºä½ åªèƒ½ä¸ºå®ƒèµ‹äºˆ undefined å’Œ nullï¼š 1let unusable: void = undefined null å’Œ undefinedTypeScript é‡Œï¼Œundefined å’Œ null ä¸¤è€…å„è‡ªæœ‰è‡ªå·±çš„ç±»å‹åˆ†åˆ«å«åš undefined å’Œ nullã€‚ å’Œ void ç›¸ä¼¼ï¼Œå®ƒä»¬çš„æœ¬èº«çš„ç±»å‹ç”¨å¤„ä¸æ˜¯å¾ˆå¤§ï¼š 12let u: undefined = undefinedlet n: null = null é»˜è®¤æƒ…å†µä¸‹ null å’Œ undefined æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚ å°±æ˜¯è¯´ä½ å¯ä»¥æŠŠ null å’Œ undefined èµ‹å€¼ç»™ number ç±»å‹çš„å˜é‡ã€‚ ç„¶è€Œï¼Œå½“ä½ æŒ‡å®šäº† --strictNullChecks æ ‡è®°ï¼Œnull å’Œ undefined åªèƒ½èµ‹å€¼ç»™ void å’Œå®ƒä»¬å„è‡ªï¼Œè¿™èƒ½é¿å… å¾ˆå¤šå¸¸è§çš„é—®é¢˜ã€‚ ä¹Ÿè®¸åœ¨æŸå¤„ä½ æƒ³ä¼ å…¥ä¸€ä¸ª string æˆ– null æˆ– undefinedï¼Œä½ å¯ä»¥ä½¿ç”¨è”åˆç±»å‹ string | null | undefinedã€‚ neverè¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚ ä¾‹å¦‚ï¼Œ never ç±»å‹æ˜¯é‚£äº›æ€»æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬å°±ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹ï¼› å˜é‡ä¹Ÿå¯èƒ½æ˜¯ never ç±»å‹ï¼Œå½“å®ƒä»¬è¢«æ°¸ä¸ä¸ºçœŸçš„ç±»å‹ä¿æŠ¤æ‰€çº¦æŸæ—¶ã€‚ never ç±»å‹æ˜¯ä»»ä½•ç±»å‹çš„å­ç±»å‹ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ï¼›ç„¶è€Œï¼Œæ²¡æœ‰ç±»å‹æ˜¯ never çš„å­ç±»å‹æˆ–å¯ä»¥èµ‹å€¼ç»™never ç±»å‹ï¼ˆé™¤äº† never æœ¬èº«ä¹‹å¤–ï¼‰ã€‚ å³ä½¿ any ä¹Ÿä¸å¯ä»¥èµ‹å€¼ç»™ neverã€‚ ä¸‹é¢æ˜¯ä¸€äº›è¿”å› never ç±»å‹çš„å‡½æ•°ï¼š 123456789101112131415// è¿”å›neverçš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹function error(message: string): never &#123; throw new Error(message)&#125;// æ¨æ–­çš„è¿”å›å€¼ç±»å‹ä¸ºneverfunction fail() &#123; return error(\"Something failed\")&#125;// è¿”å›neverçš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹function infiniteLoop(): never &#123; while (true) &#123; &#125;&#125; objectobject è¡¨ç¤ºéåŸå§‹ç±»å‹ï¼Œä¹Ÿå°±æ˜¯é™¤ numberï¼Œstringï¼Œbooleanï¼Œsymbolï¼Œnullæˆ–undefined ä¹‹å¤–çš„ç±»å‹ã€‚ ä½¿ç”¨ object ç±»å‹ï¼Œå°±å¯ä»¥æ›´å¥½çš„è¡¨ç¤ºåƒ Object.create è¿™æ ·çš„ APIã€‚ä¾‹å¦‚ï¼š 123456789declare function create(o: object | null): voidcreate(&#123; prop: 0 &#125;) // OKcreate(null) // OKcreate(42) // Errorcreate('string') // Errorcreate(false) // Errorcreate(undefined) // Error ç±»å‹æ–­è¨€é€šè¿‡ç±»å‹æ–­è¨€è¿™ç§æ–¹å¼å¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œâ€œç›¸ä¿¡æˆ‘ï¼Œæˆ‘çŸ¥é“è‡ªå·±åœ¨å¹²ä»€ä¹ˆâ€ã€‚ ç±»å‹æ–­è¨€å¥½æ¯”å…¶å®ƒè¯­è¨€é‡Œçš„ç±»å‹è½¬æ¢ï¼Œä½†æ˜¯ä¸è¿›è¡Œç‰¹æ®Šçš„æ•°æ®æ£€æŸ¥å’Œè§£æ„ã€‚ å®ƒæ²¡æœ‰è¿è¡Œæ—¶çš„å½±å“ï¼Œåªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µèµ·ä½œç”¨ã€‚ TypeScript ä¼šå‡è®¾ä½ ï¼Œç¨‹åºå‘˜ï¼Œå·²ç»è¿›è¡Œäº†å¿…é¡»çš„æ£€æŸ¥ã€‚ ç±»å‹æ–­è¨€æœ‰ä¸¤ç§å½¢å¼ã€‚ å…¶ä¸€æ˜¯â€œå°–æ‹¬å·â€è¯­æ³•ï¼š 123let someValue: any = 'this is a string'let strLength: number = (&lt;string&gt;someValue).length å¦ä¸€ä¸ªä¸º as è¯­æ³•ï¼š 123let someValue: any = 'this is a string'let strLength: number = (someValue as string).length ä¸¤ç§å½¢å¼æ˜¯ç­‰ä»·çš„ã€‚ è‡³äºä½¿ç”¨å“ªä¸ªå¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯å‡­ä¸ªäººå–œå¥½ï¼›ç„¶è€Œï¼Œå½“ä½ åœ¨ TypeScript é‡Œä½¿ç”¨ JSX æ—¶ï¼Œåªæœ‰ as è¯­æ³•æ–­è¨€æ˜¯è¢«å…è®¸çš„ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://blog.xiaoz.site/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"typescript","slug":"å­¦ä¹ ç¬”è®°/typescript","permalink":"https://blog.xiaoz.site/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/typescript/"}],"tags":[{"name":"typescript","slug":"typescript","permalink":"https://blog.xiaoz.site/tags/typescript/"}]},{"title":"å¤šiconfonté¡¹ç›®å…±ç”¨æ–¹æ¡ˆ","slug":"iconfont","date":"2019-05-08T02:11:51.000Z","updated":"2019-09-06T06:15:25.720Z","comments":true,"path":"2019/05/08/iconfont/","link":"","permalink":"https://blog.xiaoz.site/2019/05/08/iconfont/","excerpt":"å¤§å¤šæ•°æƒ…å†µä¸‹ä¸€ä¸ªé¡¹ç›®åªéœ€è¦ä¸€ä¸ªiconfonté¡¹ç›®ï¼Œä½†æ˜¯åœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œéœ€è¦ä¸æ­¢ä¸€ä¸ªiconfonté¡¹ç›®å…±åŒä½¿ç”¨ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªæ–¹æ¡ˆï¼š 1. åœ¨é¡¹ç›®ä¸­è®¾ç½®å•ç‹¬çš„å‰ç¼€å’ŒFontFamilyï¼ˆæœ€é‡è¦çš„ä¸€æ­¥ï¼‰","text":"å¤§å¤šæ•°æƒ…å†µä¸‹ä¸€ä¸ªé¡¹ç›®åªéœ€è¦ä¸€ä¸ªiconfonté¡¹ç›®ï¼Œä½†æ˜¯åœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œéœ€è¦ä¸æ­¢ä¸€ä¸ªiconfonté¡¹ç›®å…±åŒä½¿ç”¨ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªæ–¹æ¡ˆï¼š 1. åœ¨é¡¹ç›®ä¸­è®¾ç½®å•ç‹¬çš„å‰ç¼€å’ŒFontFamilyï¼ˆæœ€é‡è¦çš„ä¸€æ­¥ï¼‰ 2. æŒ‰éœ€æ±‚åœ¨é¡¹ç›®ä¸­ç”¨Unicode æˆ–è€… Font class çš„æ–¹å¼å¼•å…¥å³å¯(1) Unicodeæ–¹å¼ï¼š ä½¿ç”¨ (2) Font class æ–¹å¼ï¼š ä½¿ç”¨ (3) éœ€è¦å¤šè‰²æ—¶ä½¿ç”¨Jsæ–¹å¼ï¼š ä½¿ç”¨ æ•ˆæœ","categories":[{"name":"css","slug":"css","permalink":"https://blog.xiaoz.site/categories/css/"}],"tags":[{"name":"tips","slug":"tips","permalink":"https://blog.xiaoz.site/tags/tips/"}]},{"title":"å·¥ä½œä¸­æ€»ç»“çš„é—®é¢˜","slug":"work-tips","date":"2019-04-26T01:56:55.000Z","updated":"2019-09-06T06:15:25.724Z","comments":true,"path":"2019/04/26/work-tips/","link":"","permalink":"https://blog.xiaoz.site/2019/04/26/work-tips/","excerpt":"å„ç§æ‚é¡¹meta æ€ä¹ˆå†™1234567&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /&gt;&lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" /&gt;&lt;meta name=\"renderer\" content=\"webkit\" /&gt;&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" /&gt;&lt;meta name=\"fragment\" content=\"!\" /&gt;&lt;meta name=\"keywords\" content=\"æ”¿åºœé‡‡è´­ç½‘, æ”¿åºœé‡‡è´­, æ‹›æ ‡, æŠ•æ ‡\" /&gt;&lt;meta name=\"description\" content=\"æ”¿åºœé‡‡è´­ç½‘\" /&gt; ç¦æ­¢ a æ ‡ç­¾åŠ ä¸Š disabled åè¿˜å¯ä»¥ç‚¹å‡»123a[disabled] &#123; pointer-events: none;&#125;","text":"å„ç§æ‚é¡¹meta æ€ä¹ˆå†™1234567&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /&gt;&lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" /&gt;&lt;meta name=\"renderer\" content=\"webkit\" /&gt;&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" /&gt;&lt;meta name=\"fragment\" content=\"!\" /&gt;&lt;meta name=\"keywords\" content=\"æ”¿åºœé‡‡è´­ç½‘, æ”¿åºœé‡‡è´­, æ‹›æ ‡, æŠ•æ ‡\" /&gt;&lt;meta name=\"description\" content=\"æ”¿åºœé‡‡è´­ç½‘\" /&gt; ç¦æ­¢ a æ ‡ç­¾åŠ ä¸Š disabled åè¿˜å¯ä»¥ç‚¹å‡»123a[disabled] &#123; pointer-events: none;&#125; é˜²æ­¢åœ¨æ‰“å°æ—¶å‡ºç°é“¾æ¥åœ°å€12345@media print &#123; a[href]:after &#123; content: none !important; &#125;&#125; æ–‡å­—è¿‡é•¿æ˜¾ç¤ºçœç•¥å·(é™¤ç«ç‹)1234567.ellipsis &#123; overflow: hidden; text-overflow: ellipsis; -o-text-overflow: ellipsis; white-space: nowrap; word-break: keep-all;&#125; é˜²æ­¢ ie è‡ªåŠ¨å¼¹å‡ºç¡®è®¤æ¡†123window.opener = null;window.open('', '_self', '');window.close(); ç‚¹å‡»ä¸‹è½½12345678var downloadFile = function(fileName, filePath) &#123; var form = $(\"&lt;form style='display:none'&gt;&lt;/form&gt;\"); form.appendTo('body'); form .attr('action', '$&#123;devhost&#125;/fd0.action?filePath=' + filePath + '&amp;fileName=' + fileName) .attr('method', 'POST'); form.submit();&#125;; é‡åˆ°èµ„æºè·¯å¾„çš„é—®é¢˜æ—¶ï¼Œä½¿ç”¨ base æ ‡ç­¾1&lt;base href=\"/admin-app/\" /&gt; delete æ˜¯ ie8 çš„å…³é”®å­—ï¼Œæ–¹æ³•è°ƒç”¨æ—¶å†™æˆè¿™æ ·çš„å½¢å¼1xxx['delete'].xxx(); è§£å†³ ie8 ä¸æ”¯æŒ background-size:cover; å›¾ç‰‡è¦†ç›–1filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='*.jpg', sizingMethod='scale'); è§£å†³ ie8 ä¸èƒ½è®¿é—® https åè®®ç½‘ç«™ å¤±æ•ˆäº†ã€‚ã€‚ã€‚ ssllabs â€“&gt; å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯åŠ å¯†ç®—æ³•ä¸ä¸€è‡´ï¼Œéœ€è¦åœ¨æœåŠ¡å™¨ç«¯è¿›è¡Œé…ç½® ie8 ä¸æ”¯æŒ new Date(yyyy-mm-dd)new Date(yyyy-mm-dd.replace(/-/g, &#39;/&#39;)) ie8 ä¸æ”¯æŒ Access-Control-Allow-Origin: * ä¼šå¯¼è‡´è·¨åŸŸé—®é¢˜ ä½¿ç”¨ jsonp ie8 æ‰‹åŠ¨è®¾ç½®å…è®¸è·¨åŸŸ window.open æ‰“å¼€ ajax è¿”å›çš„é“¾æ¥ä¼šè¢«æ‹¦æˆªï¼Œç”¨ä»¥ä¸‹åŠæ³•å¤„ç†12345var newTab = window.open('about:blank');xxx.get().then(function(data) &#123; //ä½¿ç”¨replaceï¼Œæ–°é¡µé¢ä¸ä¼šå‡ºç°åé€€ï¼Œå¦‚æœç”¨ location.href='xxx'ï¼Œä¼šæœ‰åé€€ newTab.location.replace(data.content.content);&#125;); ie iframe é€æ˜&lt;iframe allowTransparency=&quot;true&quot; /&gt; iframe é‡Œ body ä¹Ÿè¦è®¾ä¸ºèƒŒæ™¯é€æ˜ https è·³è½¬åˆ° http å¼ºåˆ¶å¸¦ä¸Š referrer referrer å±æ€§å¯è¿”å›è½½å…¥å½“å‰æ–‡æ¡£çš„æ–‡æ¡£çš„ URL &lt;meta content=&quot;always&quot; name=&quot;referrer&quot;&gt; å‡½æ•°æ³¨é‡Šå†™æ³• jsdoc1234567/** * @func æ ‡è¯†ä¸€ä¸ªå‡½æ•° * @desc è¯¦ç»†æè¿°å’Œè¯´æ˜ * @global å…¨å±€æ ‡è¯† * @param &#123;number&#125; a - å‚æ•°a * @returns &#123;boolean&#125; è¿”å›å€¼ */ æŒ‰é”®æ—¶è½¬æ¢å°å†™è½¬å¤§å†™1&lt;input onkeyup=\"this.value = this.value.toUpperCase().trim();\" /&gt; å…³äºè·¨åŸŸè·¨åŸŸèµ„æºå…±äº« CORS è¯¦è§£Enable CORS å‚ç›´å±…ä¸­12345&lt;div class=\"img_wrap\"&gt; &lt;img src=\"wgs.jpg\" /&gt;&lt;/div&gt;.img_wrap&#123; // ä¸èƒ½åŠ æµ®åŠ¨ï¼ˆè‹¥å¢åŠ ä¸€ä¸ªçˆ¶çº§å…ƒç´ ï¼‰ width: 400px; height: 300px; display: table-cell;//ä¸»è¦æ˜¯è¿™ä¸ªå±æ€§ vertical-align: middle; text-align: center; &#125; ç¦»å¼€æˆ–åˆ·æ–°é¡µé¢è¿›è¡Œæç¤º1234567891011121314151617181920//æ£€æµ‹ç¦»å¼€é¡µé¢æé†’æ“ä½œvar UnloadConfirm = &#123;&#125;;UnloadConfirm.MSG_UNLOAD = 'ç¡®å®šè¦æ”¾å¼ƒç¼–è¾‘å—ï¼Ÿæ‚¨ç¦»å¼€åæ•°æ®å°†ä¸ä¼šè¢«ä¿å­˜ã€‚';UnloadConfirm.set = function(text) &#123; window.onbeforeunload = function(e) &#123; e = e || window.event; // å…¼å®¹ie8 ie8çš„é€€å‡ºæ˜¾ç¤ºè¿™é‡Œçš„æ•°æ® e.returnValue = 'ç¡®å®šè¦æ”¾å¼ƒç¼–è¾‘å—ï¼Ÿæ‚¨ç¦»å¼€åæ•°æ®å°†ä¸ä¼šè¢«ä¿å­˜ã€‚'; return text; &#125;;&#125;;UnloadConfirm.clear = function() &#123; window.onbeforeunload = function() &#123;&#125;;&#125;;UnloadConfirm.set(UnloadConfirm.MSG_UNLOAD);//é€‰æ‹©ç¦»å¼€æ‰ä¼šæ‰§è¡Œwindow.onunload = function whenUnload() &#123; // TODO&#125;; UMD: é€šç”¨æ¨¡å—è§„èŒƒ123456789101112131415161718(function(root, factory) &#123; if (typeof define === 'function' &amp;&amp; define.amd) &#123; // AMD define(['jquery'], factory); &#125; else if (typeof exports === 'object') &#123; // Node, CommonJSä¹‹ç±»çš„ module.exports = factory(require('jquery')); &#125; else &#123; // æµè§ˆå™¨å…¨å±€å˜é‡(root å³ window) root.returnExports = factory(root.jQuery); &#125;&#125;)(this, function($) &#123; // æ–¹æ³• function myFunc() &#123;&#125; // æš´éœ²å…¬å…±æ–¹æ³• return myFunc;&#125;); ç”µè¯å·ç ä¸­é—´å››ä½å˜ *1234function hideMobileMid(mobile) &#123; var reg = /^(\\d&#123;3&#125;)\\d&#123;4&#125;(\\d&#123;4&#125;)$/; return mobile.replace(reg, '$1****$2');&#125; é˜²æ­¢ body æ»šåŠ¨ï¼Œä¸” body å¸¦æœ‰æ»šåŠ¨æ¡1234567891011121314/* ä¸ºbodyæ·»åŠ æ ·å¼ */.fixed-body-hook &#123; position: fixed; width: 100%; height: 100%; left: 0; overflow-y: scroll;&#125;/* æˆ– */.fixed-body-hook &#123; overflow: hidden; /* position: relative; */ width: calc(100% - 17px);&#125; 12345678// æ‰“å¼€å¼¹çª—æ—¶ï¼Œé˜»æ­¢bodyæ»šåŠ¨top = $(document).scrollTop(); // è·å–å½“å‰æ»šåŠ¨åç§»é‡$body.css('top', -1 * top); // ä¸ºbodyè®¾ç½®top$body.addClass('fixed-body-hook'); // ä¸ºbodyå¢åŠ fixedæ ·å¼// è¿˜åŸbodyæ»šåŠ¨$body.removeClass('fixed-body-hook');$body.css('top', '');$(document).scrollTop(top); æœ€æ–°æ‰‹æœºæ­£åˆ™ChinaMobilePhoneNumberRegex è·å–å›¾ç‰‡åŸå§‹å¤§å°12345678910111213function getNaturalSize(element) &#123; var natureSize = &#123;&#125;; if (element.naturalWidth &amp;&amp; element.naturalHeight) &#123; natureSize.width = element.naturalWidth; natureSize.height = element.naturalHeight; &#125; else &#123; var img = new Image(); img.src = element.src; natureSize.width = img.width; natureSize.height = img.height; &#125; return natureSize;&#125; è·å– iframe é«˜åº¦ele.contentWindow.document.documentElement.scrollHeight åƒåˆ†ä½1234Number('1234564').toLocaleString();vartoThousands = function(number) &#123; return (number + '').replace(/(\\d)(?=(\\d&#123;3&#125;)+$)/g, '$1,');&#125;; é˜²æ­¢é»˜è®¤å¡«å……å¯†ç 12345&lt;!-- éšè—çš„input, ä¸ºäº†ç¦ç”¨æµè§ˆå™¨çš„ç”¨æˆ·åå¯†ç è¡¨å•è‡ªåŠ¨å¡«å…… --&gt;&lt;input type=\"password\" style=\"height: 0;padding: 0;width: 0;border: 0;position: absolute;\" /&gt;&lt;!-- passwordä¸ŠåŠ å±æ€§ --&gt;&lt;input type=\"password\" autocomplete=\"new-password\" /&gt; ç”Ÿæˆè¯ä¹¦12345678910111213141516171819ç¬¬ä¸€æ­¥:æ‰“å¼€: https:&#x2F;&#x2F;myssl.com&#x2F;create_test_cert.htmlç¬¬äºŒæ­¥:å¡«å†™å‚æ•°:è¯ä¹¦ç±»å‹: æœåŠ¡å™¨è¯ä¹¦åŠ å¯†ç®—æ³•: RSAåŸŸå: gmsoft.com (è¿™ä¸ªä¸é‡è¦, chrome58 ä»¥åä¸ä¼šä½¿ç”¨å®ƒæ¥éªŒè¯åŸŸåäº†)é«˜çº§è®¾ç½®:å¤‡ç”¨åç§°: å¡«å†™è¦æ³¨å†Œçš„åŸŸå(æœ€ååˆ—å‡ºäº†ç›®å‰æ³¨å†Œçš„, å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šå¢åŠ  æ›´æ–°è¯ä¹¦)å¯†é’¥å¼ºåº¦: 2048ç­¾åå“ˆå¸Œç®—æ³•: SHA256--------------------------------------------------------------------------------ç›®å‰è¯ä¹¦æ³¨å†Œçš„åŸŸå, å¦‚æœ‰éœ€è¦è¯·å¢åŠ å¹¶é‡æ–°ç”Ÿæˆè¯ä¹¦:*.gmsoft.com,*.cqzcjdev.com,*.cqzcjshow.com,*.cqzcjtest.com,*.cqzcjtestoper.com,*.gpwdevcom,*.gpwtest.com,*.gpwshow.com,*.gpwtestoper.com,*.culturedev.com,*.culturetest.com,*.culturetestoper.com,*.cultureshow.com,*.wlwculture.com,*.csmhtest.com,*.lgmhtest.com,*.yzmhtest.com,*.dgmhtest.com.conf æ ¹æ® id ä»æ ‘ç»“æ„ä¸­å–å¯¹åº”èŠ‚ç‚¹ï¼Œåˆ©ç”¨ throw è·³å‡ºé€’å½’12345678910111213141516171819202122const getNodeById = (id, menus) =&gt; &#123; // å®šä¹‰å˜é‡ä¿å­˜å½“å‰ç»“æœè·¯å¾„ let result; function getNode(nodes) &#123; forEach(nodes, item =&gt; &#123; // æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹ï¼Œé€šè¿‡throwç»ˆæ­¢æ‰é€’å½’ if (item.key === id) &#123; result = item; throw 'GOT IT!'; &#125; if (item.children &amp;&amp; item.children.length &gt; 0) &#123; getNode(item.children); &#125; &#125;); &#125; try &#123; getNode(menus); &#125; catch (e) &#123; console.log(e); &#125; return result;&#125;; angular1.xç”¨$last æ§åˆ¶æœ€åä¸€ä¸ªå…ƒç´ çš„ class12&lt;li ng-repeat=\"rule in rules | orderBy:\\'-date\\'\" class=\"ellipsis\"' 'ng-class=\"&#123;\\'last\\':$last&#125;\"ui-sref=\"rules.detail(&#123;id: rule.id&#125;)\"&gt; ç»‘å®š html1234567app.filter('to_trusted', ['$sce', function ($sce) &#123; return function (text) &#123; return $sce.trustAsHtml(text); &#125;;&#125;]);html code:&lt;p ng-bind-html=\"currentWork.description | to_trusted\"&gt;&lt;/p&gt; angular çš„ JSON å­—ç¬¦ä¸²è½¬å¯¹è±¡12s.str = angular.fromJson(s.jsonStr);s.json = angular.toJson(s.obj); ç”¨ angular çœç•¥å·ï¼š1234567&lt;label ng-if=\"!item.expand\" style=\"word-break: break-all;font-weight: normal\"&gt; &#123;&#123;item.content | limitTo:120&#125;&#125;&lt;span ng-if=\"item.content.length&gt;120\"&gt;....&lt;/span&gt; &lt;a ng- if=\"item.content.length&gt;120\" ng-click=\"item.expand=true\"&gt;æ›´å¤š&lt;/a&gt;&lt;/label&gt;&lt;label ng-if=\"item.expand\" style=\"word-break: break-all;font-weight: normal\" &gt;&#123;&#123;item.content &#125;&#125;&lt;a ng-click=\"item.expand=false\"&gt;æ”¶èµ·&lt;/a&gt;&lt;/label&gt; ng-option çš„ä½¿ç”¨ï¼Œå¯ä»¥ç»‘å®š ng-model çš„å€¼ä¸º as å‰é¢çš„å±æ€§çš„å€¼1234567&lt;select class=\"form-control\" ng-model=\"marketId\" ng-options=\"a.id as a.adminAreaName for a in areas\"&gt; &lt;option value=\"\"&gt;--è¯·é€‰æ‹©--&lt;/option&gt;&lt;/select&gt; è¿™é‡Œæœ‰ä¸€ä¸ªå‘ï¼Œå¦‚æœè¦åˆå§‹åŒ–é€‰ä¸­é¡¹ï¼Œng-model å¿…é¡»æ˜¯ String ç±»å‹ ä¸ºå¼‚æ­¥åŠ è½½çš„å…ƒç´ ç»‘å®šäº‹ä»¶,æ”¾åœ¨ $timeout é‡Œ123456789101112131415$timeout(function() &#123; var width; $('.ellipsis').each(function() &#123; width = $(this) .css('width') .slice(0, -2); if ($(this)[0].scrollWidth &gt; width) $(this).tipsy(&#123; fade: true &#125;); else &#123; $(this).removeAttr('title'); &#125; $(this).click(function() &#123; $('.tipsy').remove(); &#125;); &#125;);&#125;); ng-if çš„å‘ ng-show å’Œ ng-hide æ˜¯ä¸è‡ªå¸¦ä½œç”¨åŸŸçš„ï¼Œè€Œ ng-if åˆ™è‡ªå·±åˆ›å»ºäº†ä¸€çº§ä½œç”¨åŸŸã€‚åœ¨ç”¨çš„æ—¶å€™ï¼Œä¸¤è€…å°±æ˜¯æœ‰å·®åˆ«çš„ï¼Œæ¯”å¦‚è¯´å†…éƒ¨å…ƒç´ è®¿é—®å¤–å±‚å®šä¹‰çš„å˜é‡ï¼Œå°±éœ€è¦ä½¿ç”¨$parent è¯­æ³•äº†ã€‚ angular è‡ªå®šä¹‰éªŒè¯123456var éªŒè¯æ–¹æ³• = function(è¾“å…¥)&#123; ... //å¯¹è¾“å…¥éªŒè¯ s.editform.provider.$setValidity('has', false); &#125; s.editform.provider.$parsers.push(éªŒè¯æ–¹æ³•); s.editform.provider.$formatters.push(éªŒè¯æ–¹æ³•); angular é˜»æ­¢äº‹ä»¶å†’æ³¡1234&lt;div ng-click=\"doSomething($event)\" /&gt;;s.doSomething = function(e) &#123; e.stopPropagation();&#125;; angular è‡ªå®šä¹‰æŒ‡ä»¤å‡½æ•°ä¼ å‚angular è‡ªå®šä¹‰æŒ‡ä»¤ä½œç”¨åŸŸ&amp;â€“ä¼ é€’å¼•ç”¨ angular è‡ªå®šä¹‰æŒ‡ä»¤ scope é‡Œä¸èƒ½ç”¨ nameï¼Œå’Œ form éªŒè¯æœ‰å†²çªangular çš„å‡ ç§ watch $watchGroup çš„ç¬¬ä¸€ä¸ªå‚æ•°è¦ä¼ æ•°ç»„ï¼Œ$watchCollection çš„ç¬¬ä¸€ä¸ªå‚æ•°è¦ä¼ å¯¹è±¡ ç›‘è§†å¯¹è±¡å’Œæ•°ç»„è€Œä¸”ç›‘è§†å±‚æ¬¡ä¸æ˜¯ç‰¹åˆ«æ·±ï¼Œä¼˜å…ˆä½¿ç”¨$watchCollection, $watchCollection å¯ä»¥æ–¹ä¾¿çš„ç›‘è§†æ•°ç»„çš„æ’å…¥ï¼Œç§»é™¤ã€‚ è¦åŒæ—¶ç›‘è§†å¤šä¸ªå˜é‡å¹¶æ‰§è¡ŒåŒä¸€é€»è¾‘ä½¿ç”¨$watchGroup é™¤æ­¤ä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨$watch,å¦‚æœä½ çŸ¥é“æ•°æ®ç»“æ„çš„æ·±åº¦ï¼Œå¯ä»¥ç›´æ¥è¿™æ ·ç›‘è§†ã€‚ å½“ç¬¬ä¸‰ä¸ªå‚æ•° trueï¼Œè¡¨ç¤ºæ·±åº¦ç›‘æµ‹ï¼Œå¦‚æœ watch çš„å˜é‡æ¯”è¾ƒå¤æ‚ï¼Œæ•ˆç‡ä¼šå˜ä½ã€‚ å¥½ç”¨çš„ npm åŒ… nodemon è‡ªåŠ¨é‡æ–°å¯åŠ¨æœåŠ¡å™¨ rimraf åˆ é™¤æ–‡ä»¶ cross-env è·¨å¹³å°åœ°è®¾ç½®åŠä½¿ç”¨ç¯å¢ƒå˜é‡ concurrently åŒæ—¶å¯ç”¨å¤šä¸ªæŒä¹…æœåŠ¡ fkill è·¨å¹³å°æ€æ‰è¿›ç¨‹ install-peerdeps åŒæ—¶å®‰è£…åŒ…çš„ä¾èµ– husky åœ¨ commit ä¹‹å‰æ‰§è¡Œå…¶ä»–æ“ä½œï¼Œå¦‚ lint react-helmet ä¸º react é¡¹ç›®è®¾ç½®å¤´éƒ¨ npx ä»æœ¬åœ° node_modules/.bin ä¸­æ‰§è¡Œå‘½ä»¤ emma-cli æœç´¢æ–¹å¼å®‰è£…åŒ… æŒç»­æ›´æ–°ä¸­â€¦","categories":[{"name":"work","slug":"work","permalink":"https://blog.xiaoz.site/categories/work/"}],"tags":[{"name":"tips","slug":"tips","permalink":"https://blog.xiaoz.site/tags/tips/"}]}],"categories":[{"name":"learn","slug":"learn","permalink":"https://blog.xiaoz.site/categories/learn/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://blog.xiaoz.site/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"typescript","slug":"å­¦ä¹ ç¬”è®°/typescript","permalink":"https://blog.xiaoz.site/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/typescript/"},{"name":"work","slug":"work","permalink":"https://blog.xiaoz.site/categories/work/"},{"name":"æ–‡æ¡£","slug":"æ–‡æ¡£","permalink":"https://blog.xiaoz.site/categories/%E6%96%87%E6%A1%A3/"},{"name":"css","slug":"css","permalink":"https://blog.xiaoz.site/categories/css/"}],"tags":[{"name":"tips","slug":"tips","permalink":"https://blog.xiaoz.site/tags/tips/"},{"name":"react","slug":"react","permalink":"https://blog.xiaoz.site/tags/react/"},{"name":"typescript","slug":"typescript","permalink":"https://blog.xiaoz.site/tags/typescript/"}]}