<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  <title>React &amp; Redux in TypeScript | xiaOz&#39;s blog</title>
  
  <meta name="keywords" content="前端">
  
  

  

  <meta name="HandheldFriendly" content="True" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <!-- meta -->
  

  <!-- link -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.6.3/css/all.min.css">
  

  
  <link rel="shortcut icon" type='image/x-icon' href="https://cdn.jsdelivr.net/gh/gyxiaoz/image-hosting@master/favicon.ico">
  

  
    
<link rel="stylesheet" href="/style.css">

  

  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>

  
  
<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  
  
  <div class="cover-wrapper">
    <cover class='cover post half'>
      
        
  <h1 class='title'>xiaOz's blog</h1>


  <div class="m_search">
    <form name="searchform" class="form u-search-form">
      <input type="text" class="input u-search-input" placeholder="" />
      <i class="icon fas fa-search fa-fw"></i>
    </form>
  </div>

<div class='menu navgation'>
  <ul class='h-list'>
    
      
        <li>
          <a class="nav home" href="/"
            
            
            id="home">
            <i class='fas fa-rss fa-fw'></i>&nbsp;博文
          </a>
        </li>
      
        <li>
          <a class="nav home" href="/archives/"
            
            
            id="archives">
            <i class='fas fa-archive fa-fw'></i>&nbsp;归档
          </a>
        </li>
      
        <li>
          <a class="nav home" href="/categories/"
            
            
            id="categories">
            <i class='fas fa-folder-open fa-fw'></i>&nbsp;分类
          </a>
        </li>
      
        <li>
          <a class="nav home" href="/about/"
            
              rel="nofollow"
            
            
            id="about">
            <i class='fas fa-info-circle fa-fw'></i>&nbsp;关于
          </a>
        </li>
      
    
  </ul>
</div>

      
    </cover>
    <header class="l_header pure">
  <div id="loading-bar-wrapper">
    <div id="loading-bar" class="pure"></div>
  </div>

	<div class='wrapper'>
		<div class="nav-main container container--flex">
      <a class="logo flat-box" href='/' >
        
          xiaOz's blog
        
      </a>
			<div class='menu navgation'>
				<ul class='h-list'>
          
  					
  						<li>
								<a class="nav flat-box" href="/archives/"
                  
                    rel="nofollow"
                  
                  
                  id="archives">
									<i class='fas fa-archive fa-fw'></i>&nbsp;归档
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/categories/"
                  
                    rel="nofollow"
                  
                  
                  id="categories">
									<i class='fas fa-folder-open fa-fw'></i>&nbsp;分类
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/tags/"
                  
                    rel="nofollow"
                  
                  
                  id="tags">
									<i class='fas fa-hashtag fa-fw'></i>&nbsp;标签
								</a>
							</li>
      			
      		
				</ul>
			</div>

			
				<div class="m_search">
					<form name="searchform" class="form u-search-form">
						<input type="text" class="input u-search-input" placeholder="搜索" />
						<i class="icon fas fa-search fa-fw"></i>
					</form>
				</div>
			
			<ul class='switcher h-list'>
				
					<li class='s-search'><a class="fas fa-search fa-fw" href='javascript:void(0)'></a></li>
				
				<li class='s-menu'><a class="fas fa-bars fa-fw" href='javascript:void(0)'></a></li>
			</ul>
		</div>

		<div class='nav-sub container container--flex'>
			<a class="logo flat-box"></a>
			<ul class='switcher h-list'>
				<li class='s-comment'><a class="flat-btn fas fa-comments fa-fw" href='javascript:void(0)'></a></li>
        
          <li class='s-toc'><a class="flat-btn fas fa-list fa-fw" href='javascript:void(0)'></a></li>
        
			</ul>
		</div>
	</div>
</header>
	<aside class="menu-phone">
    <header>
		<nav class="menu navgation">
      <ul>
        
          
            <li>
							<a class="nav flat-box" href="/"
                
                
                id="home">
								<i class='fas fa-clock fa-fw'></i>&nbsp;近期文章
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/archives/"
                
                  rel="nofollow"
                
                
                id="archives">
								<i class='fas fa-archive fa-fw'></i>&nbsp;文章归档
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/about/"
                
                  rel="nofollow"
                
                
                id="about">
								<i class='fas fa-info-circle fa-fw'></i>&nbsp;关于小站
							</a>
            </li>
          
       
      </ul>
		</nav>
    </header>
	</aside>
<script>setLoadingBarProgress(40);</script>

  </div>


  <div class="l_body">
    <div class='body-wrapper'>
      <div class='l_main'>
  

  
    <article id="post" class="post white-box article-type-post" itemscope itemprop="blogPost">
      


  <section class='meta'>
    
    
    <div class="meta" id="header-meta">
      
        
  
    <h1 class="title">
      <a href="/2019/05/16/doc/ReactReduxInTypeScript/">
        React & Redux in TypeScript
      </a>
    </h1>
  


      
      <div class='new-meta-box'>
        
          
        
          
            
  <div class='new-meta-item author'>
    <a href="https://blog.xiaoz.site" rel="nofollow">
      
        <i class="fas fa-user" aria-hidden="true"></i>
      
      <p>xiaOz</p>
    </a>
  </div>


          
        
          
            <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt" aria-hidden="true"></i>
    <p>2019-05-16</p>
  </a>
</div>

          
        
          
            
  
  <div class='new-meta-item category'>
    <a href='/categories/%E6%96%87%E6%A1%A3/' rel="nofollow">
      <i class="fas fa-folder-open" aria-hidden="true"></i>
      <p>文档</p>
    </a>
  </div>


          
        
          
            
  
    <div class="new-meta-item browse busuanzi">
      <a class='notlink'>
        <i class="fas fa-eye" aria-hidden="true"></i>
        <p>
          <span id="busuanzi_value_page_pv">
            <i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i>
          </span>
        </p>
      </a>
    </div>
  


          
        
          
            

          
        
      </div>
      
        <hr>
      
    </div>
  </section>


      <section class="article typo">
        <div class="article-entry" itemprop="articleBody">
          <p>xiaOz的翻译计划第一波！计划中，先慢慢来哈🤣，近期开始更新</p>
<a id="more"></a>

<div align="center">

<h2 id="React-amp-Redux-in-TypeScript-Static-Typing-Guide"><a href="#React-amp-Redux-in-TypeScript-Static-Typing-Guide" class="headerlink" title="React &amp; Redux in TypeScript - Static Typing Guide"></a>React &amp; Redux in TypeScript - Static Typing Guide</h2><p><em>“This guide is a <strong>living compendium</strong> documenting the most important patterns and recipes on how to use <strong>React</strong> (and its Ecosystem) in a <strong>functional style</strong> using <strong>TypeScript</strong>. It will help you make your code <strong>completely type-safe</strong> while focusing on <strong>inferring the types from implementation</strong> so there is less noise coming from excessive type annotations and it’s easier to write and maintain correct types in the long run.”</em></p>
<p><a href="https://gitter.im/react-redux-typescript-guide/Lobby" target="_blank" rel="noopener"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Join the chat at https://gitter.im/react-redux-typescript-guide/Lobby"></a>  </p>
<p>:star: <em>Found it useful? Want more updates?</em> <a href="https://github.com/piotrwitek/react-redux-typescript-guide/stargazers" target="_blank" rel="noopener"><strong>Show your support by giving a :star:</strong></a>  </p>
<p>:tada: <em>Now updated to support <strong>TypeScript v3.4</strong></em> :tada:</p>
<a href="https://www.buymeacoffee.com/zh9guxbA5" target="_blank" rel="noopener">
  <img src="https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png" alt="Buy Me a Coffee">
</a>
<a href="https://www.patreon.com/piotrekwitek" target="_blank" rel="noopener">
  <img src="https://c5.patreon.com/external/logo/become_a_patron_button@2x.png" alt="Become a Patron" width="160">
</a>

</div>

<p><strong>Goals</strong></p>
<ul>
<li>Complete type safety (with <a href="https://www.typescriptlang.org/docs/handbook/compiler-options.html" target="_blank" rel="noopener"><code>--strict</code></a> flag) without losing type information downstream through all the layers of our application (e.g. no type assertions or hacking with <code>any</code> type)</li>
<li>Make type annotations concise by eliminating redundancy in types using advanced TypeScript Language features like <strong>Type Inference</strong> and <strong>Control flow analysis</strong></li>
<li>Reduce repetition and complexity of types with TypeScript focused <a href="#complementary-libraries">complementary libraries</a></li>
</ul>
<p><strong>React, Redux, Typescript Ecosystem</strong></p>
<ul>
<li><a href="https://github.com/piotrwitek/typesafe-actions" target="_blank" rel="noopener">typesafe-actions</a> - Typesafe utilities for “action-creators” in Redux / Flux Architecture  </li>
<li><a href="https://github.com/piotrwitek/utility-types" target="_blank" rel="noopener">utility-types</a> - Collection of generic types for TypeScript, complementing built-in mapped types and aliases - think lodash for reusable types.  </li>
<li><a href="https://github.com/piotrwitek/react-redux-typescript-scripts" target="_blank" rel="noopener">react-redux-typescript-scripts</a> - dev-tools configuration files shared between projects based on this guide  </li>
</ul>
<p><strong>Codesandbox links</strong></p>
<ul>
<li>Reference Todo-App implementation using <strong>React, Redux, Typescript Guide</strong>: <a href="https://codesandbox.io/s/github/piotrwitek/typesafe-actions/tree/master/codesandbox" target="_blank" rel="noopener">Link</a></li>
</ul>
<p><strong>Playground Project</strong></p>
<p><a href="https://semaphoreci.com/piotrekwitek/react-redux-typescript-guide" target="_blank" rel="noopener"><img src="https://semaphoreci.com/api/v1/piotrekwitek/react-redux-typescript-guide/branches/master/shields_badge.svg" alt="Build Status"></a></p>
<p>You should check out Playground Project located in the <code>/playground</code> folder. It is a source of all the code examples found in the guide. They are all tested with the most recent version of TypeScript and 3rd party type-definitions (like <code>@types/react</code> or <code>@types/react-redux</code>) to ensure the examples are up-to-date and not broken with updated definitions. It’s based on <code>create-react-app --typescript</code>.</p>
<blockquote>
<p>Playground project was created so that you can simply clone the repository locally and immediately play around with all the component patterns found in the guide. It will help you to learn all the examples from this guide in a real project environment without the need to create complicated environment setup by yourself.</p>
</blockquote>
<h2 id="Contributing-Guide"><a href="#Contributing-Guide" class="headerlink" title="Contributing Guide"></a>Contributing Guide</h2><p>We are open for contributions. If you’re planning to contribute please make sure to read the contributing guide: <a href="/CONTRIBUTING.md">CONTRIBUTING.md</a></p>
<h2 id="Funding"><a href="#Funding" class="headerlink" title="Funding"></a>Funding</h2><p>This is an independent open-source project created by people investing their free time for the benefit of our community.</p>
<p>If you are using it please consider donating as this will guarantee the project will be updated and maintained in the long run.</p>
<p>Issues can be funded by anyone interested in them being resolved. Reward will be transparently distributed to the contributor handling the task through the IssueHunt platform.</p>
<p><a href="https://issuehunt.io/repos/76996763" target="_blank" rel="noopener"><img src="https://issuehunt.io/static/embed/issuehunt-button-v1.svg" alt="Let&#39;s fund issues in this repository"></a></p>
<hr>
<p>🌟 - <em>New or updated section</em></p>
<h2 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h2><ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#react---type-definitions-cheatsheet">React - Type-Definitions Cheatsheet</a></li>
<li><a href="#react---typing-patterns">React - Typing Patterns</a><ul>
<li><a href="#function-components---fc">Function Components - FC</a></li>
<li><a href="#class-components">Class Components </a></li>
<li><a href="#generic-components">Generic Components</a></li>
<li><a href="#render-props">Render Props</a></li>
<li><a href="#higher-order-components">Higher-Order Components</a></li>
<li><a href="#redux-connected-components">Redux Connected Components</a></li>
<li><a href="#context">Context</a></li>
<li><a href="#hooks">Hooks</a> 🌟</li>
</ul>
</li>
<li><a href="#redux---typing-patterns">Redux - Typing Patterns</a><ul>
<li><a href="#store-configuration">Store Configuration</a></li>
<li><a href="#action-creators">Action Creators</a></li>
<li><a href="#reducers">Reducers</a><ul>
<li><a href="#state-with-type-level-immutability">State with Type-level Immutability</a></li>
<li><a href="#typing-regular-reducer">Typing regular reducer</a></li>
<li><a href="#typing-reducer-with-typesafe-actions">Typing reducer with <code>typesafe-actions</code></a> 🌟</li>
<li><a href="#testing-reducer">Testing reducer</a></li>
</ul>
</li>
<li><a href="#async-flow-with-redux-observable">Async Flow with <code>redux-observable</code></a><ul>
<li><a href="#typing-epics">Typing Epics</a></li>
<li><a href="#testing-epics">Testing Epics</a></li>
</ul>
</li>
<li><a href="#selectors-with-reselect">Selectors with <code>reselect</code></a></li>
<li><a href="#connect-with-react-redux">Connect with <code>react-redux</code></a><ul>
<li><a href="#typing-connected-component">Typing connected component</a></li>
<li><a href="#typing-connected-component-using-redux-thunk-action-creators">Typing connected component using <code>redux-thunk</code> action creators</a> 🌟</li>
</ul>
</li>
</ul>
</li>
<li><a href="#configuration--dev-tools">Configuration &amp; Dev Tools</a><ul>
<li><a href="#common-npm-scripts">Common Npm Scripts</a></li>
<li><a href="#typescript">TypeScript</a></li>
<li><a href="#tslib">TSLib</a></li>
<li><a href="#tslint">TSLint</a></li>
<li><a href="#eslint">ESLint</a> 🌟</li>
<li><a href="#jest">Jest</a></li>
<li><a href="#style-guide">Style Guide</a></li>
</ul>
</li>
<li><a href="#recipes">Recipes</a><ul>
<li><a href="#general-tips">General Tips</a></li>
<li><a href="#ambient-modules-tips">Ambient Modules Tips</a></li>
<li><a href="#type-definitions-tips">Type-Definitions Tips</a></li>
<li><a href="#type-augmentation-tips">Type Augmentation Tips</a></li>
</ul>
</li>
<li><a href="#tutorials--articles">Tutorials &amp; Articles</a></li>
<li><a href="#contributors">Contributors</a></li>
</ul>
<hr>
<h1 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h1><h3 id="Type-Definitions-for-React-amp-Redux"><a href="#Type-Definitions-for-React-amp-Redux" class="headerlink" title="Type-Definitions for React &amp; Redux"></a>Type-Definitions for React &amp; Redux</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D @types&#x2F;react @types&#x2F;react-dom @types&#x2F;react-redux</span><br></pre></td></tr></table></figure>

<p>“react” - <code>@types/react</code><br>“react-dom” - <code>@types/react-dom</code><br>“redux” - (types included with npm package)*<br>“react-redux” - <code>@types/react-redux</code>  </p>
<blockquote>
<p>*NB: Guide is based on types for Redux &gt;= v4.x.x. To make it work with Redux v3.x.x please refer to <a href="https://github.com/piotrwitek/react-redux-typescript-guide/blob/master/playground/tsconfig.json#L5" target="_blank" rel="noopener">this config</a>)  </p>
</blockquote>
<p><a href="#table-of-contents">⇧ back to top</a></p>
<hr>
<h1 id="React-Type-Definitions-Cheatsheet"><a href="#React-Type-Definitions-Cheatsheet" class="headerlink" title="React - Type-Definitions Cheatsheet"></a>React - Type-Definitions Cheatsheet</h1><h4 id="React-FunctionComponent-lt-P-gt-or-React-FC-lt-P-gt"><a href="#React-FunctionComponent-lt-P-gt-or-React-FC-lt-P-gt" class="headerlink" title="React.FunctionComponent&lt;P&gt; or React.FC&lt;P&gt;"></a><code>React.FunctionComponent&lt;P&gt;</code> or <code>React.FC&lt;P&gt;</code></h4><p>Type representing a functional component</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const MyComponent: React.FC&lt;Props&gt; &#x3D; ...</span><br></pre></td></tr></table></figure>

<h4 id="React-Component-lt-P-S-gt"><a href="#React-Component-lt-P-S-gt" class="headerlink" title="React.Component&lt;P, S&gt;"></a><code>React.Component&lt;P, S&gt;</code></h4><p>Type representing a class component</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">class MyComponent extends React.Component&lt;Props, State&gt; &#123; ...</span><br></pre></td></tr></table></figure>

<h4 id="React-ComponentProps-lt-typeof-Component-gt"><a href="#React-ComponentProps-lt-typeof-Component-gt" class="headerlink" title="React.ComponentProps&lt;typeof Component&gt;"></a><code>React.ComponentProps&lt;typeof Component&gt;</code></h4><p>Gets type of Component Props, so you don’t need to export Props from your component ever! (Works for both FC and Class components)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type MyComponentProps &#x3D; React.ComponentProps&lt;typeof MyComponent&gt;;</span><br></pre></td></tr></table></figure>

<h4 id="React-ComponentType-lt-P-gt"><a href="#React-ComponentType-lt-P-gt" class="headerlink" title="React.ComponentType&lt;P&gt;"></a><code>React.ComponentType&lt;P&gt;</code></h4><p>Type representing union type of (React.FC | React.Component)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const withState &#x3D; &lt;P extends WrappedComponentProps&gt;(</span><br><span class="line">  WrappedComponent: React.ComponentType&lt;P&gt;,</span><br><span class="line">) &#x3D;&gt; &#123; ...</span><br></pre></td></tr></table></figure>

<h4 id="React-ReactElement-or-JSX-Element"><a href="#React-ReactElement-or-JSX-Element" class="headerlink" title="React.ReactElement or JSX.Element"></a><code>React.ReactElement</code> or <code>JSX.Element</code></h4><p>Type representing a concept of React Element - representation of a native DOM component (e.g. <code>&lt;div /&gt;</code>), or a user-defined composite component (e.g. <code>&lt;MyComponent /&gt;</code>)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const elementOnly: React.ReactElement &#x3D; &lt;div &#x2F;&gt; || &lt;MyComponent &#x2F;&gt;;</span><br></pre></td></tr></table></figure>

<h4 id="React-ReactNode"><a href="#React-ReactNode" class="headerlink" title="React.ReactNode"></a><code>React.ReactNode</code></h4><p>Type representing any possible type of React node (basically ReactElement (including Fragments and Portals) + primitive JS types)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const elementOrPrimitive: React.ReactNode &#x3D; &#39;string&#39; || 0 || false || null || undefined || &lt;div &#x2F;&gt; || &lt;MyComponent &#x2F;&gt;;</span><br><span class="line">const Component &#x3D; (&#123; children: React.ReactNode &#125;) &#x3D;&gt; ...</span><br></pre></td></tr></table></figure>

<h4 id="React-CSSProperties"><a href="#React-CSSProperties" class="headerlink" title="React.CSSProperties"></a><code>React.CSSProperties</code></h4><p>Type representing style object in JSX (useful for css-in-js styles)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const styles: React.CSSProperties &#x3D; &#123; flexDirection: &#39;row&#39;, ...</span><br><span class="line">const element &#x3D; &lt;div style&#x3D;&#123;styles&#125; ...</span><br></pre></td></tr></table></figure>

<h4 id="React-ReactEventHandler-lt-E-gt"><a href="#React-ReactEventHandler-lt-E-gt" class="headerlink" title="React.ReactEventHandler&lt;E&gt;"></a><code>React.ReactEventHandler&lt;E&gt;</code></h4><p>Type representing generic event handler</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const handleChange: React.ReactEventHandler&lt;HTMLInputElement&gt; &#x3D; (ev) &#x3D;&gt; &#123; ... &#125; </span><br><span class="line"></span><br><span class="line">&lt;input onChange&#x3D;&#123;handleChange&#125; ... &#x2F;&gt;</span><br></pre></td></tr></table></figure>

<h4 id="React-MouseEvent-lt-E-gt-React-KeyboardEvent-lt-E-gt-React-TouchEvent-lt-E-gt-etc…"><a href="#React-MouseEvent-lt-E-gt-React-KeyboardEvent-lt-E-gt-React-TouchEvent-lt-E-gt-etc…" class="headerlink" title="React.MouseEvent&lt;E&gt; | React.KeyboardEvent&lt;E&gt; | React.TouchEvent&lt;E&gt; etc…"></a><code>React.MouseEvent&lt;E&gt;</code> | <code>React.KeyboardEvent&lt;E&gt;</code> | <code>React.TouchEvent&lt;E&gt;</code> etc…</h4><p>Type representing more specific event handler</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const handleChange &#x3D; (ev: React.MouseEvent&lt;HTMLDivElement&gt;) &#x3D;&gt; &#123; ... &#125;</span><br><span class="line"></span><br><span class="line">&lt;div onMouseMove&#x3D;&#123;handleChange&#125; ... &#x2F;&gt;</span><br></pre></td></tr></table></figure>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<hr>
<h1 id="React-Typing-Patterns"><a href="#React-Typing-Patterns" class="headerlink" title="React - Typing Patterns"></a>React - Typing Patterns</h1><h2 id="Function-Components-FC"><a href="#Function-Components-FC" class="headerlink" title="Function Components - FC"></a>Function Components - FC</h2><h4 id="FC-counter"><a href="#FC-counter" class="headerlink" title="- FC counter"></a>- FC counter</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &#39;react&#39;;</span><br><span class="line"></span><br><span class="line">type Props &#x3D; &#123;</span><br><span class="line">  label: string;</span><br><span class="line">  count: number;</span><br><span class="line">  onIncrement: () &#x3D;&gt; void;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export const FCCounter: React.FC&lt;Props&gt; &#x3D; props &#x3D;&gt; &#123;</span><br><span class="line">  const &#123; label, count, onIncrement &#125; &#x3D; props;</span><br><span class="line"></span><br><span class="line">  const handleIncrement &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    onIncrement();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;span&gt;</span><br><span class="line">        &#123;label&#125;: &#123;count&#125;</span><br><span class="line">      &lt;&#x2F;span&gt;</span><br><span class="line">      &lt;button type&#x3D;&quot;button&quot; onClick&#x3D;&#123;handleIncrement&#125;&gt;</span><br><span class="line">        &#123;&#96;Increment&#96;&#125;</span><br><span class="line">      &lt;&#x2F;button&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><a href="https://piotrwitek.github.io/react-redux-typescript-guide/#fccounter" target="_blank" rel="noopener">⟩⟩⟩ demo</a></p>
<p><a href="#table-of-contents">⇧ back to top</a></p>
<h4 id="spread-attributes-link"><a href="#spread-attributes-link" class="headerlink" title="- spread attributes link"></a>- spread attributes <a href="https://facebook.github.io/react/docs/jsx-in-depth.html#spread-attributes" target="_blank" rel="noopener">link</a></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &#39;react&#39;;</span><br><span class="line"></span><br><span class="line">type Props &#x3D; &#123;</span><br><span class="line">  className?: string;</span><br><span class="line">  style?: React.CSSProperties;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export const FCSpreadAttributes: React.FC&lt;Props&gt; &#x3D; props &#x3D;&gt; &#123;</span><br><span class="line">  const &#123; children, ...restProps &#125; &#x3D; props;</span><br><span class="line"></span><br><span class="line">  return &lt;div &#123;...restProps&#125;&gt;&#123;children&#125;&lt;&#x2F;div&gt;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><a href="https://piotrwitek.github.io/react-redux-typescript-guide/#fcspreadattributes" target="_blank" rel="noopener">⟩⟩⟩ demo</a></p>
<p><a href="#table-of-contents">⇧ back to top</a></p>
<hr>
<h2 id="Class-Components"><a href="#Class-Components" class="headerlink" title="Class Components"></a>Class Components</h2><h4 id="class-counter"><a href="#class-counter" class="headerlink" title="- class counter"></a>- class counter</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &#39;react&#39;;</span><br><span class="line"></span><br><span class="line">type Props &#x3D; &#123;</span><br><span class="line">  label: string;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">type State &#x3D; &#123;</span><br><span class="line">  count: number;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export class ClassCounter extends React.Component&lt;Props, State&gt; &#123;</span><br><span class="line">  readonly state: State &#x3D; &#123;</span><br><span class="line">    count: 0,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  handleIncrement &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    this.setState(&#123; count: this.state.count + 1 &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; handleIncrement &#125; &#x3D; this;</span><br><span class="line">    const &#123; label &#125; &#x3D; this.props;</span><br><span class="line">    const &#123; count &#125; &#x3D; this.state;</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;span&gt;</span><br><span class="line">          &#123;label&#125;: &#123;count&#125;</span><br><span class="line">        &lt;&#x2F;span&gt;</span><br><span class="line">        &lt;button type&#x3D;&quot;button&quot; onClick&#x3D;&#123;handleIncrement&#125;&gt;</span><br><span class="line">          &#123;&#96;Increment&#96;&#125;</span><br><span class="line">        &lt;&#x2F;button&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://piotrwitek.github.io/react-redux-typescript-guide/#classcounter" target="_blank" rel="noopener">⟩⟩⟩ demo</a></p>
<p><a href="#table-of-contents">⇧ back to top</a></p>
<h4 id="with-default-props"><a href="#with-default-props" class="headerlink" title="- with default props"></a>- with default props</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &#39;react&#39;;</span><br><span class="line"></span><br><span class="line">type Props &#x3D; &#123;</span><br><span class="line">  label: string;</span><br><span class="line">  initialCount: number;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">type State &#x3D; &#123;</span><br><span class="line">  count: number;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export class ClassCounterWithDefaultProps extends React.Component&lt;</span><br><span class="line">  Props,</span><br><span class="line">  State</span><br><span class="line">&gt; &#123;</span><br><span class="line">  static defaultProps &#x3D; &#123;</span><br><span class="line">    initialCount: 0,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  readonly state: State &#x3D; &#123;</span><br><span class="line">    count: this.props.initialCount,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  componentWillReceiveProps(&#123; initialCount &#125;: Props) &#123;</span><br><span class="line">    if (initialCount !&#x3D; null &amp;&amp; initialCount !&#x3D;&#x3D; this.props.initialCount) &#123;</span><br><span class="line">      this.setState(&#123; count: initialCount &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleIncrement &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    this.setState(&#123; count: this.state.count + 1 &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; handleIncrement &#125; &#x3D; this;</span><br><span class="line">    const &#123; label &#125; &#x3D; this.props;</span><br><span class="line">    const &#123; count &#125; &#x3D; this.state;</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;span&gt;</span><br><span class="line">          &#123;label&#125;: &#123;count&#125;</span><br><span class="line">        &lt;&#x2F;span&gt;</span><br><span class="line">        &lt;button type&#x3D;&quot;button&quot; onClick&#x3D;&#123;handleIncrement&#125;&gt;</span><br><span class="line">          &#123;&#96;Increment&#96;&#125;</span><br><span class="line">        &lt;&#x2F;button&gt;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://piotrwitek.github.io/react-redux-typescript-guide/#classcounterwithdefaultprops" target="_blank" rel="noopener">⟩⟩⟩ demo</a></p>
<p><a href="#table-of-contents">⇧ back to top</a></p>
<hr>
<h2 id="Generic-Components"><a href="#Generic-Components" class="headerlink" title="Generic Components"></a>Generic Components</h2><ul>
<li>easily create typed component variations and reuse common logic</li>
<li>common use case is a generic list components</li>
</ul>
<h4 id="generic-list"><a href="#generic-list" class="headerlink" title="- generic list"></a>- generic list</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &#39;react&#39;;</span><br><span class="line"></span><br><span class="line">export interface GenericListProps&lt;T&gt; &#123;</span><br><span class="line">  items: T[];</span><br><span class="line">  itemRenderer: (item: T) &#x3D;&gt; JSX.Element;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export class GenericList&lt;T&gt; extends React.Component&lt;GenericListProps&lt;T&gt;, &#123;&#125;&gt; &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; items, itemRenderer &#125; &#x3D; this.props;</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &#123;items.map(itemRenderer)&#125;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://piotrwitek.github.io/react-redux-typescript-guide/#genericlist" target="_blank" rel="noopener">⟩⟩⟩ demo</a></p>
<p><a href="#table-of-contents">⇧ back to top</a></p>
<hr>
<h2 id="Render-Props"><a href="#Render-Props" class="headerlink" title="Render Props"></a>Render Props</h2><blockquote>
<p><a href="https://reactjs.org/docs/render-props.html" target="_blank" rel="noopener">https://reactjs.org/docs/render-props.html</a></p>
</blockquote>
<h4 id="name-provider"><a href="#name-provider" class="headerlink" title="- name provider"></a>- name provider</h4><blockquote>
<p>simple component using children as a render prop</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &#39;react&#39;;</span><br><span class="line"></span><br><span class="line">interface NameProviderProps &#123;</span><br><span class="line">  children: (state: NameProviderState) &#x3D;&gt; React.ReactNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface NameProviderState &#123;</span><br><span class="line">  readonly name: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export class NameProvider extends React.Component&lt;NameProviderProps, NameProviderState&gt; &#123;</span><br><span class="line">  readonly state: NameProviderState &#x3D; &#123; name: &#39;Piotr&#39; &#125;;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return this.props.children(this.state);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://piotrwitek.github.io/react-redux-typescript-guide/#nameprovider" target="_blank" rel="noopener">⟩⟩⟩ demo</a></p>
<p><a href="#table-of-contents">⇧ back to top</a></p>
<h4 id="mouse-provider"><a href="#mouse-provider" class="headerlink" title="- mouse provider"></a>- mouse provider</h4><blockquote>
<p><code>Mouse</code> component found in <a href="https://reactjs.org/docs/render-props.html#use-render-props-for-cross-cutting-concerns" target="_blank" rel="noopener">Render Props React Docs</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &#39;react&#39;;</span><br><span class="line"></span><br><span class="line">export interface MouseProviderProps &#123;</span><br><span class="line">  render: (state: MouseProviderState) &#x3D;&gt; React.ReactNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface MouseProviderState &#123;</span><br><span class="line">  readonly x: number;</span><br><span class="line">  readonly y: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export class MouseProvider extends React.Component&lt;MouseProviderProps, MouseProviderState&gt; &#123;</span><br><span class="line">  readonly state: MouseProviderState &#x3D; &#123; x: 0, y: 0 &#125;;</span><br><span class="line"></span><br><span class="line">  handleMouseMove &#x3D; (event: React.MouseEvent&lt;HTMLDivElement&gt;) &#x3D;&gt; &#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">      x: event.clientX,</span><br><span class="line">      y: event.clientY,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div style&#x3D;&#123;&#123; height: &#39;100%&#39; &#125;&#125; onMouseMove&#x3D;&#123;this.handleMouseMove&#125;&gt;</span><br><span class="line">        &#123;&#x2F;*</span><br><span class="line">          Instead of providing a static representation of what &lt;Mouse&gt; renders,</span><br><span class="line">          use the &#96;render&#96; prop to dynamically determine what to render.</span><br><span class="line">        *&#x2F;&#125;</span><br><span class="line">        &#123;this.props.render(this.state)&#125;</span><br><span class="line">      &lt;&#x2F;div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://piotrwitek.github.io/react-redux-typescript-guide/#mouseprovider" target="_blank" rel="noopener">⟩⟩⟩ demo</a></p>
<p><a href="#table-of-contents">⇧ back to top</a></p>
<hr>
<h2 id="Higher-Order-Components"><a href="#Higher-Order-Components" class="headerlink" title="Higher-Order Components"></a>Higher-Order Components</h2><blockquote>
<p><a href="https://reactjs.org/docs/higher-order-components.html" target="_blank" rel="noopener">https://reactjs.org/docs/higher-order-components.html</a></p>
</blockquote>
<h4 id="withState"><a href="#withState" class="headerlink" title="- withState"></a>- withState</h4><p>Adds state to a stateless counter</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &#39;react&#39;;</span><br><span class="line">import &#123; Subtract &#125; from &#39;utility-types&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; These props will be subtracted from base component props</span><br><span class="line">interface InjectedProps &#123;</span><br><span class="line">  count: number;</span><br><span class="line">  onIncrement: () &#x3D;&gt; void;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export const withState &#x3D; &lt;BaseProps extends InjectedProps&gt;(</span><br><span class="line">  _BaseComponent: React.ComponentType&lt;BaseProps&gt;</span><br><span class="line">) &#x3D;&gt; &#123;</span><br><span class="line">  &#x2F;&#x2F; fix for TypeScript issues: https:&#x2F;&#x2F;github.com&#x2F;piotrwitek&#x2F;react-redux-typescript-guide&#x2F;issues&#x2F;111</span><br><span class="line">  const BaseComponent &#x3D; _BaseComponent as React.ComponentType&lt;InjectedProps&gt;;</span><br><span class="line"></span><br><span class="line">  type HocProps &#x3D; Subtract&lt;BaseProps, InjectedProps&gt; &amp; &#123;</span><br><span class="line">    &#x2F;&#x2F; here you can extend hoc with new props</span><br><span class="line">    initialCount?: number;</span><br><span class="line">  &#125;;</span><br><span class="line">  type HocState &#x3D; &#123;</span><br><span class="line">    readonly count: number;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  return class Hoc extends React.Component&lt;HocProps, HocState&gt; &#123;</span><br><span class="line">    &#x2F;&#x2F; Enhance component name for debugging and React-Dev-Tools</span><br><span class="line">    static displayName &#x3D; &#96;withState($&#123;BaseComponent.name&#125;)&#96;;</span><br><span class="line">    &#x2F;&#x2F; reference to original wrapped component</span><br><span class="line">    static readonly WrappedComponent &#x3D; BaseComponent;</span><br><span class="line"></span><br><span class="line">    readonly state: HocState &#x3D; &#123;</span><br><span class="line">      count: Number(this.props.initialCount) || 0,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    handleIncrement &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">      this.setState(&#123; count: this.state.count + 1 &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">      const &#123; ...restProps &#125; &#x3D; this.props;</span><br><span class="line">      const &#123; count &#125; &#x3D; this.state;</span><br><span class="line"></span><br><span class="line">      return (</span><br><span class="line">        &lt;BaseComponent</span><br><span class="line">          count&#x3D;&#123;count&#125; &#x2F;&#x2F; injected</span><br><span class="line">          onIncrement&#x3D;&#123;this.handleIncrement&#125; &#x2F;&#x2F; injected</span><br><span class="line">          &#123;...restProps&#125;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<details><summary><i>Click to expand</i></summary><p>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &#39;react&#39;;</span><br><span class="line"></span><br><span class="line">import &#123; withState &#125; from &#39;..&#x2F;hoc&#39;;</span><br><span class="line">import &#123; FCCounter &#125; from &#39;..&#x2F;components&#39;;</span><br><span class="line"></span><br><span class="line">const FCCounterWithState &#x3D; withState(FCCounter);</span><br><span class="line"></span><br><span class="line">export default () &#x3D;&gt; &lt;FCCounterWithState label&#x3D;&#123;&#39;FCCounterWithState&#39;&#125; &#x2F;&gt;;</span><br></pre></td></tr></table></figure>
</p></details>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h4 id="withErrorBoundary"><a href="#withErrorBoundary" class="headerlink" title="- withErrorBoundary"></a>- withErrorBoundary</h4><p>Adds error handling using componentDidCatch to any component</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &#39;react&#39;;</span><br><span class="line">import &#123; Subtract &#125; from &#39;utility-types&#39;;</span><br><span class="line"></span><br><span class="line">const MISSING_ERROR &#x3D; &#39;Error was swallowed during propagation.&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; These props will be subtracted from base component props</span><br><span class="line">interface InjectedProps &#123;</span><br><span class="line">  onReset: () &#x3D;&gt; void;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export const withErrorBoundary &#x3D; &lt;BaseProps extends InjectedProps&gt;(</span><br><span class="line">  _BaseComponent: React.ComponentType&lt;BaseProps&gt;</span><br><span class="line">) &#x3D;&gt; &#123;</span><br><span class="line">  &#x2F;&#x2F; fix for TypeScript issues: https:&#x2F;&#x2F;github.com&#x2F;piotrwitek&#x2F;react-redux-typescript-guide&#x2F;issues&#x2F;111</span><br><span class="line">  const BaseComponent &#x3D; _BaseComponent as React.ComponentType&lt;InjectedProps&gt;;</span><br><span class="line"></span><br><span class="line">  type HocProps &#x3D; Subtract&lt;BaseProps, InjectedProps&gt; &amp; &#123;</span><br><span class="line">    &#x2F;&#x2F; here you can extend hoc with new props</span><br><span class="line">  &#125;;</span><br><span class="line">  type HocState &#x3D; &#123;</span><br><span class="line">    readonly error: Error | null | undefined;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  return class Hoc extends React.Component&lt;HocProps, HocState&gt; &#123;</span><br><span class="line">    &#x2F;&#x2F; Enhance component name for debugging and React-Dev-Tools</span><br><span class="line">    static displayName &#x3D; &#96;withErrorBoundary($&#123;BaseComponent.name&#125;)&#96;;</span><br><span class="line">    &#x2F;&#x2F; reference to original wrapped component</span><br><span class="line">    static readonly WrappedComponent &#x3D; BaseComponent;</span><br><span class="line"></span><br><span class="line">    readonly state: HocState &#x3D; &#123;</span><br><span class="line">      error: undefined,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    componentDidCatch(error: Error | null, info: object) &#123;</span><br><span class="line">      this.setState(&#123; error: error || new Error(MISSING_ERROR) &#125;);</span><br><span class="line">      this.logErrorToCloud(error, info);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    logErrorToCloud &#x3D; (error: Error | null, info: object) &#x3D;&gt; &#123;</span><br><span class="line">      &#x2F;&#x2F; TODO: send error report to service provider</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    handleReset &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">      this.setState(&#123; error: undefined &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">      const &#123; children, ...restProps &#125; &#x3D; this.props;</span><br><span class="line">      const &#123; error &#125; &#x3D; this.state;</span><br><span class="line"></span><br><span class="line">      if (error) &#123;</span><br><span class="line">        return (</span><br><span class="line">          &lt;BaseComponent</span><br><span class="line">            onReset&#x3D;&#123;this.handleReset&#125; &#x2F;&#x2F; injected</span><br><span class="line">            &#123;...restProps&#125;</span><br><span class="line">          &#x2F;&gt;</span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      return children;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<details><summary><i>Click to expand</i></summary><p>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123;useState&#125; from &#39;react&#39;;</span><br><span class="line"></span><br><span class="line">import &#123; withErrorBoundary &#125; from &#39;..&#x2F;hoc&#39;;</span><br><span class="line">import &#123; ErrorMessage &#125; from &#39;..&#x2F;components&#39;;</span><br><span class="line"></span><br><span class="line">const ErrorMessageWithErrorBoundary &#x3D;</span><br><span class="line">  withErrorBoundary(ErrorMessage);</span><br><span class="line"></span><br><span class="line">const BrokenComponent &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">  throw new Error(&#39;I\&#39;m broken! Don\&#39;t render me.&#39;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const BrokenButton &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">  const [shouldRenderBrokenComponent, setShouldRenderBrokenComponent] &#x3D;</span><br><span class="line">    useState(false);</span><br><span class="line"></span><br><span class="line">  if (shouldRenderBrokenComponent) &#123;</span><br><span class="line">    return &lt;BrokenComponent &#x2F;&gt;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;button</span><br><span class="line">      type&#x3D;&quot;button&quot;</span><br><span class="line">      onClick&#x3D;&#123;() &#x3D;&gt; &#123;</span><br><span class="line">        setShouldRenderBrokenComponent(true);</span><br><span class="line">      &#125;&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      &#123;&#96;Throw nasty error&#96;&#125;</span><br><span class="line">    &lt;&#x2F;button&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default () &#x3D;&gt; (</span><br><span class="line">  &lt;ErrorMessageWithErrorBoundary&gt;</span><br><span class="line">    &lt;BrokenButton &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;ErrorMessageWithErrorBoundary&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</p></details>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<hr>
<h2 id="Redux-Connected-Components"><a href="#Redux-Connected-Components" class="headerlink" title="Redux Connected Components"></a>Redux Connected Components</h2><h4 id="redux-connected-counter"><a href="#redux-connected-counter" class="headerlink" title="- redux connected counter"></a>- redux connected counter</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import Types from &#39;MyTypes&#39;;</span><br><span class="line">import &#123; connect &#125; from &#39;react-redux&#39;;</span><br><span class="line"></span><br><span class="line">import &#123; countersActions, countersSelectors &#125; from &#39;..&#x2F;features&#x2F;counters&#39;;</span><br><span class="line">import &#123; FCCounter &#125; from &#39;..&#x2F;components&#39;;</span><br><span class="line"></span><br><span class="line">const mapStateToProps &#x3D; (state: Types.RootState) &#x3D;&gt; (&#123;</span><br><span class="line">  count: countersSelectors.getReduxCounter(state.counters),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const dispatchProps &#x3D; &#123;</span><br><span class="line">  onIncrement: countersActions.increment,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export const FCCounterConnected &#x3D; connect(</span><br><span class="line">  mapStateToProps,</span><br><span class="line">  dispatchProps</span><br><span class="line">)(FCCounter);</span><br></pre></td></tr></table></figure>
<details><summary><i>Click to expand</i></summary><p>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &#39;react&#39;;</span><br><span class="line"></span><br><span class="line">import &#123; FCCounterConnected &#125; from &#39;.&#39;;</span><br><span class="line"></span><br><span class="line">export default () &#x3D;&gt; &lt;FCCounterConnected label&#x3D;&#123;&#39;FCCounterConnected&#39;&#125; &#x2F;&gt;;</span><br></pre></td></tr></table></figure>
</p></details>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h4 id="redux-connected-counter-with-own-props"><a href="#redux-connected-counter-with-own-props" class="headerlink" title="- redux connected counter with own props"></a>- redux connected counter with own props</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import Types from &#39;MyTypes&#39;;</span><br><span class="line">import &#123; connect &#125; from &#39;react-redux&#39;;</span><br><span class="line"></span><br><span class="line">import &#123; countersActions, countersSelectors &#125; from &#39;..&#x2F;features&#x2F;counters&#39;;</span><br><span class="line">import &#123; FCCounter &#125; from &#39;..&#x2F;components&#39;;</span><br><span class="line"></span><br><span class="line">type OwnProps &#x3D; &#123;</span><br><span class="line">  initialCount?: number;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const mapStateToProps &#x3D; (state: Types.RootState, ownProps: OwnProps) &#x3D;&gt; (&#123;</span><br><span class="line">  count:</span><br><span class="line">    countersSelectors.getReduxCounter(state.counters) +</span><br><span class="line">    (ownProps.initialCount || 0),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const dispatchProps &#x3D; &#123;</span><br><span class="line">  onIncrement: countersActions.increment,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export const FCCounterConnectedOwnProps &#x3D; connect(</span><br><span class="line">  mapStateToProps,</span><br><span class="line">  dispatchProps</span><br><span class="line">)(FCCounter);</span><br></pre></td></tr></table></figure>
<details><summary><i>Click to expand</i></summary><p>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &#39;react&#39;;</span><br><span class="line"></span><br><span class="line">import &#123; FCCounterConnectedOwnProps &#125; from &#39;.&#39;;</span><br><span class="line"></span><br><span class="line">export default () &#x3D;&gt; (</span><br><span class="line">  &lt;FCCounterConnectedOwnProps</span><br><span class="line">    label&#x3D;&#123;&#39;FCCounterConnectedOwnProps&#39;&#125;</span><br><span class="line">    initialCount&#x3D;&#123;10&#125;</span><br><span class="line">  &#x2F;&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</p></details>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h4 id="redux-connected-counter-with-redux-thunk-integration"><a href="#redux-connected-counter-with-redux-thunk-integration" class="headerlink" title="- redux connected counter with redux-thunk integration"></a>- redux connected counter with <code>redux-thunk</code> integration</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">import Types from &#39;MyTypes&#39;;</span><br><span class="line">import &#123; bindActionCreators, Dispatch &#125; from &#39;redux&#39;;</span><br><span class="line">import &#123; connect &#125; from &#39;react-redux&#39;;</span><br><span class="line">import * as React from &#39;react&#39;;</span><br><span class="line"></span><br><span class="line">import &#123; countersActions &#125; from &#39;..&#x2F;features&#x2F;counters&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Thunk Action</span><br><span class="line">const incrementWithDelay &#x3D; () &#x3D;&gt; async (dispatch: Dispatch): Promise&lt;void&gt; &#x3D;&gt; &#123;</span><br><span class="line">  setTimeout(() &#x3D;&gt; dispatch(countersActions.increment()), 1000);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const mapStateToProps &#x3D; (state: Types.RootState) &#x3D;&gt; (&#123;</span><br><span class="line">  count: state.counters.reduxCounter,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const mapDispatchToProps &#x3D; (dispatch: Dispatch&lt;Types.RootAction&gt;) &#x3D;&gt;</span><br><span class="line">  bindActionCreators(</span><br><span class="line">    &#123;</span><br><span class="line">      onIncrement: incrementWithDelay,</span><br><span class="line">    &#125;,</span><br><span class="line">    dispatch</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">type Props &#x3D; ReturnType&lt;typeof mapStateToProps&gt; &amp;</span><br><span class="line">  ReturnType&lt;typeof mapDispatchToProps&gt; &amp; &#123;</span><br><span class="line">    label: string;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">export const FCCounter: React.FC&lt;Props&gt; &#x3D; props &#x3D;&gt; &#123;</span><br><span class="line">  const &#123; label, count, onIncrement &#125; &#x3D; props;</span><br><span class="line"></span><br><span class="line">  const handleIncrement &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    &#x2F;&#x2F; Thunk action is correctly typed as promise</span><br><span class="line">    onIncrement().then(() &#x3D;&gt; &#123;</span><br><span class="line">      &#x2F;&#x2F; ...</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;span&gt;</span><br><span class="line">        &#123;label&#125;: &#123;count&#125;</span><br><span class="line">      &lt;&#x2F;span&gt;</span><br><span class="line">      &lt;button type&#x3D;&quot;button&quot; onClick&#x3D;&#123;handleIncrement&#125;&gt;</span><br><span class="line">        &#123;&#96;Increment&#96;&#125;</span><br><span class="line">      &lt;&#x2F;button&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export const FCCounterConnectedBindActionCreators &#x3D; connect(</span><br><span class="line">  mapStateToProps,</span><br><span class="line">  mapDispatchToProps</span><br><span class="line">)(FCCounter);</span><br></pre></td></tr></table></figure>
<details><summary><i>Click to expand</i></summary><p>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &#39;react&#39;;</span><br><span class="line"></span><br><span class="line">import &#123; FCCounterConnectedBindActionCreators &#125; from &#39;.&#39;;</span><br><span class="line"></span><br><span class="line">export default () &#x3D;&gt; (</span><br><span class="line">  &lt;FCCounterConnectedBindActionCreators</span><br><span class="line">    label&#x3D;&#123;&#39;FCCounterConnectedBindActionCreators&#39;&#125;</span><br><span class="line">  &#x2F;&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</p></details>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h2 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h2><blockquote>
<p><a href="https://reactjs.org/docs/context.html" target="_blank" rel="noopener">https://reactjs.org/docs/context.html</a></p>
</blockquote>
<h4 id="ThemeContext"><a href="#ThemeContext" class="headerlink" title="ThemeContext"></a>ThemeContext</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &#39;react&#39;;</span><br><span class="line"></span><br><span class="line">export type Theme &#x3D; React.CSSProperties;</span><br><span class="line"></span><br><span class="line">type Themes &#x3D; &#123;</span><br><span class="line">  dark: Theme;</span><br><span class="line">  light: Theme;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export const themes: Themes &#x3D; &#123;</span><br><span class="line">  dark: &#123;</span><br><span class="line">    color: &#39;black&#39;,</span><br><span class="line">    backgroundColor: &#39;white&#39;,</span><br><span class="line">  &#125;,</span><br><span class="line">  light: &#123;</span><br><span class="line">    color: &#39;white&#39;,</span><br><span class="line">    backgroundColor: &#39;black&#39;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export type ThemeContextProps &#x3D; &#123; theme: Theme; toggleTheme?: () &#x3D;&gt; void &#125;;</span><br><span class="line">const ThemeContext &#x3D; React.createContext&lt;ThemeContextProps&gt;(&#123; theme: themes.light &#125;);</span><br><span class="line"></span><br><span class="line">export default ThemeContext;</span><br></pre></td></tr></table></figure>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h4 id="ThemeProvider"><a href="#ThemeProvider" class="headerlink" title="ThemeProvider"></a>ThemeProvider</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import React from &#39;react&#39;;</span><br><span class="line">import ThemeContext, &#123; themes, Theme &#125; from &#39;.&#x2F;theme-context&#39;;</span><br><span class="line">import ToggleThemeButton from &#39;.&#x2F;theme-consumer&#39;;</span><br><span class="line"></span><br><span class="line">interface State &#123;</span><br><span class="line">  theme: Theme;</span><br><span class="line">&#125;</span><br><span class="line">export class ThemeProvider extends React.Component&lt;&#123;&#125;, State&gt; &#123;</span><br><span class="line">  readonly state: State &#x3D; &#123; theme: themes.light &#125;;</span><br><span class="line"></span><br><span class="line">  toggleTheme &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    this.setState(state &#x3D;&gt; (&#123;</span><br><span class="line">      theme: state.theme &#x3D;&#x3D;&#x3D; themes.light ? themes.dark : themes.light,</span><br><span class="line">    &#125;));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; theme &#125; &#x3D; this.state;</span><br><span class="line">    const &#123; toggleTheme &#125; &#x3D; this;</span><br><span class="line">    return (</span><br><span class="line">      &lt;ThemeContext.Provider value&#x3D;&#123;&#123; theme, toggleTheme &#125;&#125;&gt;</span><br><span class="line">        &lt;ToggleThemeButton &#x2F;&gt;</span><br><span class="line">      &lt;&#x2F;ThemeContext.Provider&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h4 id="ThemeConsumer"><a href="#ThemeConsumer" class="headerlink" title="ThemeConsumer"></a>ThemeConsumer</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &#39;react&#39;;</span><br><span class="line">import ThemeContext from &#39;.&#x2F;theme-context&#39;;</span><br><span class="line"></span><br><span class="line">type Props &#x3D; &#123;&#125;;</span><br><span class="line"></span><br><span class="line">export default function ToggleThemeButton(props: Props) &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;ThemeContext.Consumer&gt;</span><br><span class="line">      &#123;(&#123; theme, toggleTheme &#125;) &#x3D;&gt; &lt;button style&#x3D;&#123;theme&#125; onClick&#x3D;&#123;toggleTheme&#125; &#123;...props&#125; &#x2F;&gt;&#125;</span><br><span class="line">    &lt;&#x2F;ThemeContext.Consumer&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ThemeConsumer-in-class-component"><a href="#ThemeConsumer-in-class-component" class="headerlink" title="ThemeConsumer in class component"></a>ThemeConsumer in class component</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &#39;react&#39;;</span><br><span class="line">import ThemeContext from &#39;.&#x2F;theme-context&#39;;</span><br><span class="line"></span><br><span class="line">type Props &#x3D; &#123;&#125;;</span><br><span class="line"></span><br><span class="line">export class ToggleThemeButtonClass extends React.Component&lt;Props&gt; &#123;</span><br><span class="line">  static contextType &#x3D; ThemeContext;</span><br><span class="line">  context!: React.ContextType&lt;typeof ThemeContext&gt;;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; theme, toggleTheme &#125; &#x3D; this.context;</span><br><span class="line">    return (</span><br><span class="line">      &lt;button style&#x3D;&#123;theme&#125; onClick&#x3D;&#123;toggleTheme&#125;&gt;</span><br><span class="line">        Toggle Theme</span><br><span class="line">      &lt;&#x2F;button&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="#--usecontext">Implementation with Hooks</a></p>
<p><a href="#table-of-contents">⇧ back to top</a></p>
<h2 id="Hooks"><a href="#Hooks" class="headerlink" title="Hooks"></a>Hooks</h2><blockquote>
<p><a href="https://reactjs.org/docs/hooks-intro.html" target="_blank" rel="noopener">https://reactjs.org/docs/hooks-intro.html</a></p>
</blockquote>
<h4 id="useState"><a href="#useState" class="headerlink" title="- useState"></a>- useState</h4><blockquote>
<p><a href="https://reactjs.org/docs/hooks-reference.html#usestate" target="_blank" rel="noopener">https://reactjs.org/docs/hooks-reference.html#usestate</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &#39;react&#39;;</span><br><span class="line"></span><br><span class="line">type Props &#x3D; &#123; initialCount: number &#125;;</span><br><span class="line"></span><br><span class="line">export default function Counter(&#123;initialCount&#125;: Props) &#123;</span><br><span class="line">  const [count, setCount] &#x3D; React.useState(initialCount);</span><br><span class="line">  return (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      Count: &#123;count&#125;</span><br><span class="line">      &lt;button onClick&#x3D;&#123;() &#x3D;&gt; setCount(initialCount)&#125;&gt;Reset&lt;&#x2F;button&gt;</span><br><span class="line">      &lt;button onClick&#x3D;&#123;() &#x3D;&gt; setCount(prevCount &#x3D;&gt; prevCount + 1)&#125;&gt;+&lt;&#x2F;button&gt;</span><br><span class="line">      &lt;button onClick&#x3D;&#123;() &#x3D;&gt; setCount(prevCount &#x3D;&gt; prevCount - 1)&#125;&gt;-&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;&#x2F;&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h4 id="useReducer"><a href="#useReducer" class="headerlink" title="- useReducer"></a>- useReducer</h4><p>Hook for state management like Redux in a function component.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &#39;react&#39;;</span><br><span class="line"></span><br><span class="line">interface State &#123;</span><br><span class="line">  count: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Action &#x3D; &#123; type: &#39;reset&#39; &#125; | &#123; type: &#39;increment&#39; &#125; | &#123; type: &#39;decrement&#39; &#125;;</span><br><span class="line"></span><br><span class="line">function reducer(state: State, action: Action): State &#123;</span><br><span class="line">  switch (action.type) &#123;</span><br><span class="line">    case &#39;increment&#39;:</span><br><span class="line">      return &#123; count: state.count + 1 &#125;;</span><br><span class="line">    case &#39;decrement&#39;:</span><br><span class="line">      return &#123; count: state.count - 1 &#125;;</span><br><span class="line">    case &#39;reset&#39;:</span><br><span class="line">      return &#123; count: 0 &#125;;</span><br><span class="line">    default:</span><br><span class="line">      throw new Error();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface CounterProps &#123;</span><br><span class="line">  initialCount: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Counter(&#123; initialCount &#125;: CounterProps) &#123;</span><br><span class="line">  const [state, dispatch] &#x3D; React.useReducer(reducer, &#123;</span><br><span class="line">    count: initialCount,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      Count: &#123;state.count&#125;</span><br><span class="line">      &lt;button onClick&#x3D;&#123;() &#x3D;&gt; dispatch(&#123; type: &#39;reset&#39; &#125;)&#125;&gt;Reset&lt;&#x2F;button&gt;</span><br><span class="line">      &lt;button onClick&#x3D;&#123;() &#x3D;&gt; dispatch(&#123; type: &#39;increment&#39; &#125;)&#125;&gt;+&lt;&#x2F;button&gt;</span><br><span class="line">      &lt;button onClick&#x3D;&#123;() &#x3D;&gt; dispatch(&#123; type: &#39;decrement&#39; &#125;)&#125;&gt;-&lt;&#x2F;button&gt;</span><br><span class="line">    &lt;&#x2F;&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default Counter;</span><br></pre></td></tr></table></figure>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h4 id="useContext"><a href="#useContext" class="headerlink" title="- useContext"></a>- useContext</h4><blockquote>
<p><a href="https://reactjs.org/docs/hooks-reference.html#usecontext" target="_blank" rel="noopener">https://reactjs.org/docs/hooks-reference.html#usecontext</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &#39;react&#39;;</span><br><span class="line">import ThemeContext from &#39;..&#x2F;context&#x2F;theme-context&#39;;</span><br><span class="line"></span><br><span class="line">type Props &#x3D; &#123;&#125;;</span><br><span class="line"></span><br><span class="line">export default function ThemeToggleButton(props: Props) &#123;</span><br><span class="line">  const &#123; theme, toggleTheme &#125; &#x3D; React.useContext(ThemeContext);</span><br><span class="line">  return (</span><br><span class="line">    &lt;button onClick&#x3D;&#123;toggleTheme&#125; style&#x3D;&#123;theme&#125; &gt;</span><br><span class="line">      Toggle Theme</span><br><span class="line">    &lt;&#x2F;button&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<hr>
<h1 id="Redux-Typing-Patterns"><a href="#Redux-Typing-Patterns" class="headerlink" title="Redux - Typing Patterns"></a>Redux - Typing Patterns</h1><h2 id="Store-Configuration"><a href="#Store-Configuration" class="headerlink" title="Store Configuration"></a>Store Configuration</h2><h3 id="Create-Global-RootState-and-RootAction-Types"><a href="#Create-Global-RootState-and-RootAction-Types" class="headerlink" title="Create Global RootState and RootAction Types"></a>Create Global RootState and RootAction Types</h3><h4 id="RootState-type-representing-root-state-tree"><a href="#RootState-type-representing-root-state-tree" class="headerlink" title="RootState - type representing root state-tree"></a><code>RootState</code> - type representing root state-tree</h4><p>Can be imported in connected components to provide type-safety to Redux <code>connect</code> function</p>
<h4 id="RootAction-type-representing-union-type-of-all-action-objects"><a href="#RootAction-type-representing-union-type-of-all-action-objects" class="headerlink" title="RootAction - type representing union type of all action objects"></a><code>RootAction</code> - type representing union type of all action objects</h4><p>Can be imported in various layers receiving or sending redux actions like: reducers, sagas or redux-observables epics</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import &#123; StateType, ActionType &#125; from &#39;typesafe-actions&#39;;</span><br><span class="line"></span><br><span class="line">declare module &#39;MyTypes&#39; &#123;</span><br><span class="line">  export type Store &#x3D; StateType&lt;typeof import(&#39;.&#x2F;index&#39;).default&gt;;</span><br><span class="line">  export type RootAction &#x3D; ActionType&lt;typeof import(&#39;.&#x2F;root-action&#39;).default&gt;;</span><br><span class="line">  export type RootState &#x3D; StateType&lt;typeof import(&#39;.&#x2F;root-reducer&#39;).default&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">declare module &#39;typesafe-actions&#39; &#123;</span><br><span class="line">  interface Types &#123;</span><br><span class="line">    RootAction: ActionType&lt;typeof import(&#39;.&#x2F;root-action&#39;).default&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h3 id="Create-Store"><a href="#Create-Store" class="headerlink" title="Create Store"></a>Create Store</h3><p>When creating a store instance we don’t need to provide any additional types. It will set-up a <strong>type-safe Store instance</strong> using type inference.</p>
<blockquote>
<p>The resulting store instance methods like <code>getState</code> or <code>dispatch</code> will be type checked and will expose all type errors</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">import &#123; RootAction, RootState, Services &#125; from &#39;MyTypes&#39;;</span><br><span class="line">import &#123; createStore, applyMiddleware &#125; from &#39;redux&#39;;</span><br><span class="line">import &#123; createEpicMiddleware &#125; from &#39;redux-observable&#39;;</span><br><span class="line"></span><br><span class="line">import &#123; composeEnhancers &#125; from &#39;.&#x2F;utils&#39;;</span><br><span class="line">import rootReducer from &#39;.&#x2F;root-reducer&#39;;</span><br><span class="line">import rootEpic from &#39;.&#x2F;root-epic&#39;;</span><br><span class="line">import services from &#39;..&#x2F;services&#39;;</span><br><span class="line"></span><br><span class="line">export const epicMiddleware &#x3D; createEpicMiddleware&lt;</span><br><span class="line">  RootAction,</span><br><span class="line">  RootAction,</span><br><span class="line">  RootState,</span><br><span class="line">  Services</span><br><span class="line">&gt;(&#123;</span><br><span class="line">  dependencies: services,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; configure middlewares</span><br><span class="line">const middlewares &#x3D; [epicMiddleware];</span><br><span class="line">&#x2F;&#x2F; compose enhancers</span><br><span class="line">const enhancer &#x3D; composeEnhancers(applyMiddleware(...middlewares));</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; rehydrate state on app start</span><br><span class="line">const initialState &#x3D; &#123;&#125;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; create store</span><br><span class="line">const store &#x3D; createStore(rootReducer, initialState, enhancer);</span><br><span class="line"></span><br><span class="line">epicMiddleware.run(rootEpic);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; export store singleton instance</span><br><span class="line">export default store;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="Action-Creators"><a href="#Action-Creators" class="headerlink" title="Action Creators"></a>Action Creators</h2><blockquote>
<p>We’ll be using a battle-tested library <a href="https://www.npmjs.com/package/typesafe-actions" target="_blank" rel="noopener"><img src="https://img.shields.io/npm/dm/typesafe-actions.svg" alt="NPM Downloads"></a><br> that’ll help retain complete type soundness and simplify maintenace of <strong>types in Redux Architectures</strong> <a href="https://github.com/piotrwitek/typesafe-actions#typesafe-actions" target="_blank" rel="noopener"><code>typesafe-actions</code></a></p>
</blockquote>
<blockquote>
<p>You can find more real-world examples and in-depth tutorial in: <a href="https://github.com/piotrwitek/typesafe-actions#tutorial" target="_blank" rel="noopener">Typesafe-Actions - Tutorial</a>!</p>
</blockquote>
<p>A solution below is using a simple factory function to automate the creation of type-safe action creators. The goal is to decrease maintenance effort and reduce code repetition of type annotations for actions and creators. The result is completely typesafe action-creators and their actions.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import &#123; action &#125; from &#39;typesafe-actions&#39;;</span><br><span class="line"></span><br><span class="line">import &#123; ADD, INCREMENT &#125; from &#39;.&#x2F;constants&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; CLASSIC API</span><br><span class="line">export const increment &#x3D; () &#x3D;&gt; action(INCREMENT);</span><br><span class="line">export const add &#x3D; (amount: number) &#x3D;&gt; action(ADD, amount);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ALTERNATIVE API - allow to use reference to &quot;action-creator&quot; function instead of &quot;type constant&quot;</span><br><span class="line">&#x2F;&#x2F; e.g. case getType(increment): return &#123; ... &#125;</span><br><span class="line">&#x2F;&#x2F; This will allow to completely eliminate need for &quot;constants&quot; in your application, more info here:</span><br><span class="line">&#x2F;&#x2F; https:&#x2F;&#x2F;github.com&#x2F;piotrwitek&#x2F;typesafe-actions#behold-the-mighty-tutorial</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; OPTION 1 (with generics):</span><br><span class="line">&#x2F;&#x2F; import &#123; createStandardAction &#125; from &#39;typesafe-actions&#39;;</span><br><span class="line">&#x2F;&#x2F; export const increment &#x3D; createStandardAction(INCREMENT)&lt;void&gt;();</span><br><span class="line">&#x2F;&#x2F; export const add &#x3D; createStandardAction(ADD)&lt;number&gt;();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; OPTION 2 (with resolve callback):</span><br><span class="line">&#x2F;&#x2F; import &#123; createAction &#125; from &#39;typesafe-actions&#39;;</span><br><span class="line">&#x2F;&#x2F; export const increment &#x3D; createAction(INCREMENT);</span><br><span class="line">&#x2F;&#x2F; export const add &#x3D; createAction(ADD, resolve &#x3D;&gt; &#123;</span><br><span class="line">&#x2F;&#x2F;   return (amount: number) &#x3D;&gt; resolve(amount);</span><br><span class="line">&#x2F;&#x2F; &#125;);</span><br></pre></td></tr></table></figure>
<details><summary><i>Click to expand</i></summary><p>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import store from &#39;..&#x2F;..&#x2F;store&#39;;</span><br><span class="line">import &#123; countersActions as counter &#125; from &#39;..&#x2F;counters&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; store.dispatch(counter.increment(1)); &#x2F;&#x2F; Error: Expected 0 arguments, but got 1.</span><br><span class="line">store.dispatch(counter.increment()); &#x2F;&#x2F; OK</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; store.dispatch(counter.add()); &#x2F;&#x2F; Error: Expected 1 arguments, but got 0.</span><br><span class="line">store.dispatch(counter.add(1)); &#x2F;&#x2F; OK</span><br></pre></td></tr></table></figure>
</p></details>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<hr>
<h2 id="Reducers"><a href="#Reducers" class="headerlink" title="Reducers"></a>Reducers</h2><h3 id="State-with-Type-level-Immutability"><a href="#State-with-Type-level-Immutability" class="headerlink" title="State with Type-level Immutability"></a>State with Type-level Immutability</h3><p>Declare reducer <code>State</code> type with <code>readonly</code> modifier to get compile time immutability</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> State = &#123;</span><br><span class="line">  readonly counter: <span class="built_in">number</span>;</span><br><span class="line">  readonly todos: ReadonlyArray&lt;<span class="built_in">string</span>&gt;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Readonly modifier allow initialization, but will not allow reassignment by highlighting compiler errors</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> initialState: State = &#123;</span><br><span class="line">  counter: <span class="number">0</span>,</span><br><span class="line">&#125;; <span class="comment">// OK</span></span><br><span class="line"></span><br><span class="line">initialState.counter = <span class="number">3</span>; <span class="comment">// TS Error: cannot be mutated</span></span><br></pre></td></tr></table></figure>

<p>It’s great for <strong>Arrays in JS</strong> because it will error when using mutator methods like (<code>push</code>, <code>pop</code>, <code>splice</code>, …), but it’ll still allow immutable methods like (<code>concat</code>, <code>map</code>, <code>slice</code>,…).</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">state.todos.push(<span class="string">'Learn about tagged union types'</span>) <span class="comment">// TS Error: Property 'push' does not exist on type 'ReadonlyArray&lt;string&gt;'</span></span><br><span class="line"><span class="keyword">const</span> newTodos = state.todos.concat(<span class="string">'Learn about tagged union types'</span>) <span class="comment">// OK</span></span><br></pre></td></tr></table></figure>

<h4 id="Caveat-Readonly-is-not-recursive"><a href="#Caveat-Readonly-is-not-recursive" class="headerlink" title="Caveat - Readonly is not recursive"></a>Caveat - <code>Readonly</code> is not recursive</h4><p>This means that the <code>readonly</code> modifier doesn’t propagate immutability down the nested structure of objects. You’ll need to mark each property on each level explicitly.</p>
<blockquote>
<p><strong>TIP:</strong> use <code>Readonly</code> or <code>ReadonlyArray</code> <a href="https://www.typescriptlang.org/docs/handbook/advanced-types.html" target="_blank" rel="noopener">Mapped types</a></p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> State = Readonly&lt;&#123;</span><br><span class="line">  counterPairs: ReadonlyArray&lt;Readonly&lt;&#123;</span><br><span class="line">    immutableCounter1: <span class="built_in">number</span>,</span><br><span class="line">    immutableCounter2: <span class="built_in">number</span>,</span><br><span class="line">  &#125;&gt;&gt;,</span><br><span class="line">&#125;&gt;;</span><br><span class="line"></span><br><span class="line">state.counterPairs[<span class="number">0</span>] = &#123; immutableCounter1: <span class="number">1</span>, immutableCounter2: <span class="number">1</span> &#125;; <span class="comment">// TS Error: cannot be mutated</span></span><br><span class="line">state.counterPairs[<span class="number">0</span>].immutableCounter1 = <span class="number">1</span>; <span class="comment">// TS Error: cannot be mutated</span></span><br><span class="line">state.counterPairs[<span class="number">0</span>].immutableCounter2 = <span class="number">1</span>; <span class="comment">// TS Error: cannot be mutated</span></span><br></pre></td></tr></table></figure>

<h4 id="Solution-recursive-Readonly-is-called-DeepReadonly"><a href="#Solution-recursive-Readonly-is-called-DeepReadonly" class="headerlink" title="Solution - recursive Readonly is called DeepReadonly"></a>Solution - recursive <code>Readonly</code> is called <code>DeepReadonly</code></h4><p>To fix this we can use <a href="https://github.com/piotrwitek/utility-types#deepreadonlyt" target="_blank" rel="noopener"><code>DeepReadonly</code></a> type (available from <code>utility-types</code>).</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; DeepReadonly &#125; <span class="keyword">from</span> <span class="string">'utility-types'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> State = DeepReadonly&lt;&#123;</span><br><span class="line">  containerObject: &#123;</span><br><span class="line">    innerValue: <span class="built_in">number</span>,</span><br><span class="line">    numbers: <span class="built_in">number</span>[],</span><br><span class="line">  &#125;</span><br><span class="line">&#125;&gt;;</span><br><span class="line"></span><br><span class="line">state.containerObject = &#123; innerValue: <span class="number">1</span> &#125;; <span class="comment">// TS Error: cannot be mutated</span></span><br><span class="line">state.containerObject.innerValue = <span class="number">1</span>; <span class="comment">// TS Error: cannot be mutated</span></span><br><span class="line">state.containerObject.numbers.push(<span class="number">1</span>); <span class="comment">// TS Error: cannot use mutator methods</span></span><br></pre></td></tr></table></figure>


<p><a href="#table-of-contents">⇧ back to top</a></p>
<h3 id="Typing-reducer"><a href="#Typing-reducer" class="headerlink" title="Typing reducer"></a>Typing reducer</h3><blockquote>
<p>to understand following section make sure to learn about <a href="https://www.typescriptlang.org/docs/handbook/type-inference.html" target="_blank" rel="noopener">Type Inference</a>, <a href="https://github.com/Microsoft/TypeScript/wiki/What%27s-new-in-TypeScript#control-flow-based-type-analysis" target="_blank" rel="noopener">Control flow analysis</a> and <a href="https://github.com/Microsoft/TypeScript/wiki/What%27s-new-in-TypeScript#tagged-union-types" target="_blank" rel="noopener">Tagged union types</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">import &#123; combineReducers &#125; from &#39;redux&#39;;</span><br><span class="line">import &#123; ActionType &#125; from &#39;typesafe-actions&#39;;</span><br><span class="line"></span><br><span class="line">import &#123; Todo, TodosFilter &#125; from &#39;.&#x2F;models&#39;;</span><br><span class="line">import * as actions from &#39;.&#x2F;actions&#39;;</span><br><span class="line">import &#123; ADD, CHANGE_FILTER, TOGGLE &#125; from &#39;.&#x2F;constants&#39;;</span><br><span class="line"></span><br><span class="line">export type TodosAction &#x3D; ActionType&lt;typeof actions&gt;;</span><br><span class="line"></span><br><span class="line">export type TodosState &#x3D; Readonly&lt;&#123;</span><br><span class="line">  todos: Todo[];</span><br><span class="line">  todosFilter: TodosFilter;</span><br><span class="line">&#125;&gt;;</span><br><span class="line">const initialState: TodosState &#x3D; &#123;</span><br><span class="line">  todos: [],</span><br><span class="line">  todosFilter: TodosFilter.All,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default combineReducers&lt;TodosState, TodosAction&gt;(&#123;</span><br><span class="line">  todos: (state &#x3D; initialState.todos, action) &#x3D;&gt; &#123;</span><br><span class="line">    switch (action.type) &#123;</span><br><span class="line">      case ADD:</span><br><span class="line">        return [...state, action.payload];</span><br><span class="line"></span><br><span class="line">      case TOGGLE:</span><br><span class="line">        return state.map(item &#x3D;&gt;</span><br><span class="line">          item.id &#x3D;&#x3D;&#x3D; action.payload</span><br><span class="line">            ? &#123; ...item, completed: !item.completed &#125;</span><br><span class="line">            : item</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">      default:</span><br><span class="line">        return state;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  todosFilter: (state &#x3D; initialState.todosFilter, action) &#x3D;&gt; &#123;</span><br><span class="line">    switch (action.type) &#123;</span><br><span class="line">      case CHANGE_FILTER:</span><br><span class="line">        return action.payload;</span><br><span class="line"></span><br><span class="line">      default:</span><br><span class="line">        return state;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h3 id="Typing-reducer-with-typesafe-actions"><a href="#Typing-reducer-with-typesafe-actions" class="headerlink" title="Typing reducer with typesafe-actions"></a>Typing reducer with <code>typesafe-actions</code></h3><blockquote>
<p>Notice we are not required to use any generic type parameter in the API. Try to compare it with regular reducer as they are equivalent.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import &#123; combineReducers &#125; from &#39;redux&#39;;</span><br><span class="line">import &#123; createReducer &#125; from &#39;typesafe-actions&#39;;</span><br><span class="line"></span><br><span class="line">import &#123; Todo, TodosFilter &#125; from &#39;.&#x2F;models&#39;;</span><br><span class="line">import &#123; ADD, CHANGE_FILTER, TOGGLE &#125; from &#39;.&#x2F;constants&#39;;</span><br><span class="line"></span><br><span class="line">export type TodosState &#x3D; Readonly&lt;&#123;</span><br><span class="line">  todos: Todo[];</span><br><span class="line">  todosFilter: TodosFilter;</span><br><span class="line">&#125;&gt;;</span><br><span class="line">const initialState: TodosState &#x3D; &#123;</span><br><span class="line">  todos: [],</span><br><span class="line">  todosFilter: TodosFilter.All,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const todos &#x3D; createReducer(initialState.todos)</span><br><span class="line">  .handleAction(ADD, (state, action) &#x3D;&gt; [...state, action.payload])</span><br><span class="line">  .handleAction(TOGGLE, (state, action) &#x3D;&gt;</span><br><span class="line">    state.map(item &#x3D;&gt;</span><br><span class="line">      item.id &#x3D;&#x3D;&#x3D; action.payload</span><br><span class="line">        ? &#123; ...item, completed: !item.completed &#125;</span><br><span class="line">        : item</span><br><span class="line">    )</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">const todosFilter &#x3D; createReducer(initialState.todosFilter).handleAction(</span><br><span class="line">  CHANGE_FILTER,</span><br><span class="line">  (state, action) &#x3D;&gt; action.payload</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">export default combineReducers(&#123;</span><br><span class="line">  todos,</span><br><span class="line">  todosFilter,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h3 id="Testing-reducer"><a href="#Testing-reducer" class="headerlink" title="Testing reducer"></a>Testing reducer</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">import &#123;</span><br><span class="line">  todosReducer as reducer,</span><br><span class="line">  todosActions as actions,</span><br><span class="line">  TodosState,</span><br><span class="line">&#125; from &#39;.&#x2F;&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * FIXTURES</span><br><span class="line"> *&#x2F;</span><br><span class="line">const getInitialState &#x3D; (initial?: Partial&lt;TodosState&gt;) &#x3D;&gt;</span><br><span class="line">  reducer(initial as TodosState, &#123;&#125; as any);</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * STORIES</span><br><span class="line"> *&#x2F;</span><br><span class="line">describe(&#39;Todos Stories&#39;, () &#x3D;&gt; &#123;</span><br><span class="line">  describe(&#39;initial state&#39;, () &#x3D;&gt; &#123;</span><br><span class="line">    it(&#39;should match a snapshot&#39;, () &#x3D;&gt; &#123;</span><br><span class="line">      const initialState &#x3D; getInitialState();</span><br><span class="line">      expect(initialState).toMatchSnapshot();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  describe(&#39;adding todos&#39;, () &#x3D;&gt; &#123;</span><br><span class="line">    it(&#39;should add a new todo as the first element&#39;, () &#x3D;&gt; &#123;</span><br><span class="line">      const initialState &#x3D; getInitialState();</span><br><span class="line">      expect(initialState.todos).toHaveLength(0);</span><br><span class="line">      const state &#x3D; reducer(initialState, actions.add(&#39;new todo&#39;));</span><br><span class="line">      expect(state.todos).toHaveLength(1);</span><br><span class="line">      expect(state.todos[0].title).toEqual(&#39;new todo&#39;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  describe(&#39;toggling completion state&#39;, () &#x3D;&gt; &#123;</span><br><span class="line">    it(&#39;should mark active todo as complete&#39;, () &#x3D;&gt; &#123;</span><br><span class="line">      const activeTodo &#x3D; &#123; id: &#39;1&#39;, completed: false, title: &#39;active todo&#39; &#125;;</span><br><span class="line">      const initialState &#x3D; getInitialState(&#123; todos: [activeTodo] &#125;);</span><br><span class="line">      expect(initialState.todos[0].completed).toBeFalsy();</span><br><span class="line">      const state1 &#x3D; reducer(initialState, actions.toggle(activeTodo.id));</span><br><span class="line">      expect(state1.todos[0].completed).toBeTruthy();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<hr>
<h2 id="Async-Flow-with-redux-observable"><a href="#Async-Flow-with-redux-observable" class="headerlink" title="Async Flow with redux-observable"></a>Async Flow with <code>redux-observable</code></h2><h3 id="Typing-epics"><a href="#Typing-epics" class="headerlink" title="Typing epics"></a>Typing epics</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import &#123; RootAction, RootState, Services &#125; from &#39;MyTypes&#39;;</span><br><span class="line">import &#123; Epic &#125; from &#39;redux-observable&#39;;</span><br><span class="line">import &#123; tap, ignoreElements, filter &#125; from &#39;rxjs&#x2F;operators&#39;;</span><br><span class="line">import &#123; isOfType &#125; from &#39;typesafe-actions&#39;;</span><br><span class="line"></span><br><span class="line">import &#123; todosConstants &#125; from &#39;..&#x2F;todos&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; contrived example!!!</span><br><span class="line">export const logAddAction: Epic&lt;RootAction, RootAction, RootState, Services&gt; &#x3D; (</span><br><span class="line">  action$,</span><br><span class="line">  state$,</span><br><span class="line">  &#123; logger &#125;</span><br><span class="line">) &#x3D;&gt;</span><br><span class="line">  action$.pipe(</span><br><span class="line">    filter(isOfType(todosConstants.ADD)), &#x2F;&#x2F; action is narrowed to: &#123; type: &quot;ADD_TODO&quot;; payload: string; &#125;</span><br><span class="line">    tap(action &#x3D;&gt; &#123;</span><br><span class="line">      logger.log(</span><br><span class="line">        &#96;action type must be equal: $&#123;todosConstants.ADD&#125; &#x3D;&#x3D;&#x3D; $&#123;action.type&#125;&#96;</span><br><span class="line">      );</span><br><span class="line">    &#125;),</span><br><span class="line">    ignoreElements()</span><br><span class="line">  );</span><br></pre></td></tr></table></figure>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h3 id="Testing-epics"><a href="#Testing-epics" class="headerlink" title="Testing epics"></a>Testing epics</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">import &#123; StateObservable, ActionsObservable &#125; from &#39;redux-observable&#39;;</span><br><span class="line">import &#123; RootState, Services, RootAction &#125; from &#39;MyTypes&#39;;</span><br><span class="line">import &#123; Subject &#125; from &#39;rxjs&#39;;</span><br><span class="line"></span><br><span class="line">import &#123; add &#125; from &#39;.&#x2F;actions&#39;;</span><br><span class="line">import &#123; logAddAction &#125; from &#39;.&#x2F;epics&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Simple typesafe mock of all the services, you dont&#39;t need to mock anything else</span><br><span class="line">&#x2F;&#x2F; It is decoupled and reusable for all your tests, just put it in a separate file</span><br><span class="line">const services &#x3D; &#123;</span><br><span class="line">  logger: &#123;</span><br><span class="line">    log: jest.fn&lt;Services[&#39;logger&#39;][&#39;log&#39;]&gt;(),</span><br><span class="line">  &#125;,</span><br><span class="line">  localStorage: &#123;</span><br><span class="line">    loadState: jest.fn&lt;Services[&#39;localStorage&#39;][&#39;loadState&#39;]&gt;(),</span><br><span class="line">    saveState: jest.fn&lt;Services[&#39;localStorage&#39;][&#39;saveState&#39;]&gt;(),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">describe(&#39;Todos Epics&#39;, () &#x3D;&gt; &#123;</span><br><span class="line">  let state$: StateObservable&lt;RootState&gt;;</span><br><span class="line"></span><br><span class="line">  beforeEach(() &#x3D;&gt; &#123;</span><br><span class="line">    state$ &#x3D; new StateObservable&lt;RootState&gt;(</span><br><span class="line">      new Subject&lt;RootState&gt;(),</span><br><span class="line">      undefined as any</span><br><span class="line">    );</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  describe(&#39;logging todos actions&#39;, () &#x3D;&gt; &#123;</span><br><span class="line">    beforeEach(() &#x3D;&gt; &#123;</span><br><span class="line">      services.logger.log.mockClear();</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    it(&#39;should call the logger service when adding a new todo&#39;, done &#x3D;&gt; &#123;</span><br><span class="line">      const addTodoAction &#x3D; add(&#39;new todo&#39;);</span><br><span class="line">      const action$ &#x3D; ActionsObservable.of(addTodoAction);</span><br><span class="line"></span><br><span class="line">      logAddAction(action$, state$, services)</span><br><span class="line">        .toPromise()</span><br><span class="line">        .then((outputAction: RootAction) &#x3D;&gt; &#123;</span><br><span class="line">          expect(services.logger.log).toHaveBeenCalledTimes(1);</span><br><span class="line">          expect(services.logger.log).toHaveBeenCalledWith(</span><br><span class="line">            &#39;action type must be equal: todos&#x2F;ADD &#x3D;&#x3D;&#x3D; todos&#x2F;ADD&#39;</span><br><span class="line">          );</span><br><span class="line">          &#x2F;&#x2F; expect output undefined because we&#39;re using &quot;ignoreElements&quot; in epic</span><br><span class="line">          expect(outputAction).toEqual(undefined);</span><br><span class="line">          done();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<hr>
<h2 id="Selectors-with-reselect"><a href="#Selectors-with-reselect" class="headerlink" title="Selectors with reselect"></a>Selectors with <code>reselect</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createSelector &#125; from &#39;reselect&#39;;</span><br><span class="line"></span><br><span class="line">import &#123; TodosState &#125; from &#39;.&#x2F;reducer&#39;;</span><br><span class="line"></span><br><span class="line">export const getTodos &#x3D; (state: TodosState) &#x3D;&gt; state.todos;</span><br><span class="line"></span><br><span class="line">export const getTodosFilter &#x3D; (state: TodosState) &#x3D;&gt; state.todosFilter;</span><br><span class="line"></span><br><span class="line">export const getFilteredTodos &#x3D; createSelector(getTodos, getTodosFilter, (todos, todosFilter) &#x3D;&gt; &#123;</span><br><span class="line">  switch (todosFilter) &#123;</span><br><span class="line">    case &#39;completed&#39;:</span><br><span class="line">      return todos.filter(t &#x3D;&gt; t.completed);</span><br><span class="line">    case &#39;active&#39;:</span><br><span class="line">      return todos.filter(t &#x3D;&gt; !t.completed);</span><br><span class="line"></span><br><span class="line">    default:</span><br><span class="line">      return todos;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<hr>
<h2 id="Connect-with-react-redux"><a href="#Connect-with-react-redux" class="headerlink" title="Connect with react-redux"></a>Connect with <code>react-redux</code></h2><h3 id="Typing-connected-component"><a href="#Typing-connected-component" class="headerlink" title="Typing connected component"></a>Typing connected component</h3><p><em><strong>NOTE</strong>: Below you’ll find only a short explanation of concepts behind typing <code>connect</code>. For more real-world examples please check <a href="#redux-connected-components">Redux Connected Components</a> section.</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">import MyTypes from &#39;MyTypes&#39;;</span><br><span class="line"></span><br><span class="line">import &#123; bindActionCreators, Dispatch, ActionCreatorsMapObject &#125; from &#39;redux&#39;;</span><br><span class="line">import &#123; connect &#125; from &#39;react-redux&#39;;</span><br><span class="line"></span><br><span class="line">import &#123; countersActions &#125; from &#39;..&#x2F;features&#x2F;counters&#39;;</span><br><span class="line">import &#123; FCCounter &#125; from &#39;..&#x2F;components&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Type annotation for &quot;state&quot; argument is mandatory to check </span><br><span class="line">&#x2F;&#x2F; the correct shape of state object and injected props you can also</span><br><span class="line">&#x2F;&#x2F; extend connected component Props interface by annotating &#96;ownProps&#96; argument</span><br><span class="line">const mapStateToProps &#x3D; (state: MyTypes.RootState, ownProps: FCCounterProps) &#x3D;&gt; (&#123;</span><br><span class="line">  count: state.counters.reduxCounter,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; &quot;dispatch&quot; argument needs an annotation to check the correct shape</span><br><span class="line">&#x2F;&#x2F;  of an action object when using dispatch function</span><br><span class="line">const mapDispatchToProps &#x3D; (dispatch: Dispatch&lt;MyTypes.RootAction&gt;) &#x3D;&gt;</span><br><span class="line">  bindActionCreators(&#123;</span><br><span class="line">    onIncrement: countersActions.increment,</span><br><span class="line">  &#125;, dispatch);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; shorter alternative is to use an object instead of mapDispatchToProps function</span><br><span class="line">const dispatchToProps &#x3D; &#123;</span><br><span class="line">    onIncrement: countersActions.increment,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Notice we don&#39;t need to pass any generic type parameters to neither</span><br><span class="line">&#x2F;&#x2F; the connect function below nor map functions declared above</span><br><span class="line">&#x2F;&#x2F; because type inference will infer types from arguments annotations automatically</span><br><span class="line">&#x2F;&#x2F; This is much cleaner and idiomatic approach</span><br><span class="line">export const FCCounterConnected &#x3D;</span><br><span class="line">  connect(mapStateToProps, mapDispatchToProps)(FCCounter);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; You can add extra layer of validation of your action creators</span><br><span class="line">&#x2F;&#x2F; by using bindActionCreators generic type parameter and RootAction type</span><br><span class="line">const mapDispatchToProps &#x3D; (dispatch: Dispatch&lt;MyTypes.RootAction&gt;) &#x3D;&gt;</span><br><span class="line">  bindActionCreators&lt;ActionCreatorsMapObject&lt;Types.RootAction&gt;&gt;(&#123;</span><br><span class="line">    invalidActionCreator: () &#x3D;&gt; 1, &#x2F;&#x2F; Error: Type &#39;number&#39; is not assignable to type &#39;&#123; type: &quot;todos&#x2F;ADD&quot;; payload: Todo; &#125; | &#123; ... &#125;</span><br><span class="line">  &#125;, dispatch);</span><br></pre></td></tr></table></figure>

<h3 id="Typing-connected-component-using-redux-thunk-action-creators"><a href="#Typing-connected-component-using-redux-thunk-action-creators" class="headerlink" title="Typing connected component using redux-thunk action creators"></a>Typing connected component using <code>redux-thunk</code> action creators</h3><p><em><strong>NOTE</strong>: When using thunk action creators you need to use <code>bindActionCreators</code>. Only this way you can get corrected dispatch props type signature like below.</em></p>
<p><em><strong>WARNING</strong>: As of now (Apr 2019) <code>bindActionCreators</code> signature of the latest <code>redux-thunk</code> release will not work as below, you need to use updated type definitions that you can find here <a href="./playground/typings/redux-thunk/index.d.ts"><code>/playground/typings/redux-thunk/index.d.ts</code></a> and then add <code>paths</code> overload in your tsconfig like this: <a href="./playground/tsconfig.json"><code>&quot;paths&quot;:{&quot;redux-thunk&quot;:[&quot;typings/redux-thunk&quot;]}</code></a>.</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">const thunkAsyncAction &#x3D; () &#x3D;&gt; async (dispatch: Dispatch): Promise&lt;void&gt; &#x3D;&gt; &#123;</span><br><span class="line">  &#x2F;&#x2F; dispatch actions, return Promise, etc.</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const mapDispatchToProps &#x3D; (dispatch: Dispatch&lt;Types.RootAction&gt;) &#x3D;&gt;</span><br><span class="line">  bindActionCreators(</span><br><span class="line">    &#123;</span><br><span class="line">      thunkAsyncAction,</span><br><span class="line">    &#125;,</span><br><span class="line">    dispatch</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">type DispatchProps &#x3D; ReturnType&lt;typeof mapDispatchToProps&gt;;</span><br><span class="line">&#x2F;&#x2F; &#123; thunkAsyncAction: () &#x3D;&gt; Promise&lt;void&gt;; &#125;</span><br><span class="line"></span><br><span class="line">&#x2F;* Without &quot;bindActionCreators&quot; fix signature will be the same as the original &quot;unbound&quot; thunk function: *&#x2F;</span><br><span class="line">&#x2F;&#x2F; &#123; thunkAsyncAction: () &#x3D;&gt; (dispatch: Dispatch&lt;AnyAction&gt;) &#x3D;&gt; Promise&lt;void&gt;; &#125;</span><br></pre></td></tr></table></figure>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<hr>
<h1 id="Configuration-amp-Dev-Tools"><a href="#Configuration-amp-Dev-Tools" class="headerlink" title="Configuration &amp; Dev Tools"></a>Configuration &amp; Dev Tools</h1><h2 id="Common-Npm-Scripts"><a href="#Common-Npm-Scripts" class="headerlink" title="Common Npm Scripts"></a>Common Npm Scripts</h2><blockquote>
<p>Common TS-related npm scripts shared across projects</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&quot;prettier&quot;: &quot;prettier --list-different &#39;src&#x2F;**&#x2F;*.ts&#39; || (echo &#39;\nPlease fix code formatting by running:\nnpm run prettier:fix\n&#39;; exit 1)&quot;,</span><br><span class="line">&quot;prettier:fix&quot;: &quot;prettier --write &#39;src&#x2F;**&#x2F;*.ts&#39;&quot;,</span><br><span class="line">&quot;lint&quot;: &quot;tslint -p .&#x2F;&quot;,</span><br><span class="line">&quot;tsc&quot;: &quot;tsc -p .&#x2F; --noEmit&quot;,</span><br><span class="line">&quot;tsc:watch&quot;: &quot;tsc -p .&#x2F; --noEmit -w&quot;,</span><br><span class="line">&quot;test&quot;: &quot;jest --config jest.config.json&quot;,</span><br><span class="line">&quot;test:watch&quot;: &quot;jest --config jest.config.json --watch&quot;,</span><br><span class="line">&quot;test:update&quot;: &quot;jest --config jest.config.json -u&quot;</span><br><span class="line">&quot;ci-check&quot;: &quot;npm run prettier &amp;&amp; npm run lint &amp;&amp; npm run tsc &amp;&amp; npm run test&quot;,</span><br></pre></td></tr></table></figure>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h3 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h3><p>We have our own recommended <code>tsconfig.json</code> that you can easily add to your project thanks to <a href="https://github.com/piotrwitek/react-redux-typescript-scripts" target="_blank" rel="noopener"><code>react-redux-typescript-scripts</code></a> package.</p>
<h4 id="tsconfig-json"><a href="#tsconfig-json" class="headerlink" title="tsconfig.json"></a>tsconfig.json</h4><details><summary><i>Click to expand</i></summary><p>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;include&quot;: [</span><br><span class="line">    &quot;src&quot;,</span><br><span class="line">    &quot;typings&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;exclude&quot;: [</span><br><span class="line">    &quot;src&#x2F;**&#x2F;*.spec.*&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;extends&quot;: &quot;.&#x2F;node_modules&#x2F;react-redux-typescript-scripts&#x2F;tsconfig.json&quot;,</span><br><span class="line">  &quot;compilerOptions&quot;: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</p></details>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h2 id="TSLib"><a href="#TSLib" class="headerlink" title="TSLib"></a>TSLib</h2><p><a href="https://www.npmjs.com/package/tslib" target="_blank" rel="noopener">https://www.npmjs.com/package/tslib</a></p>
<p>This library will cut down on your bundle size, thanks to using external runtime helpers instead of adding them per each file.</p>
<blockquote>
<p>Installation<br><code>npm i tslib</code></p>
</blockquote>
<p>Then add this to your <code>tsconfig.json</code>:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"compilerOptions"</span>: &#123;</span><br><span class="line">  <span class="string">"importHelpers"</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h2 id="TSLint"><a href="#TSLint" class="headerlink" title="TSLint"></a>TSLint</h2><p><a href="https://palantir.github.io/tslint/" target="_blank" rel="noopener">https://palantir.github.io/tslint/</a></p>
<blockquote>
<p>Installation<br><code>npm i -D tslint</code></p>
</blockquote>
<blockquote>
<p>For React project you should add additional <code>react</code> specific rules: <code>npm i -D tslint-react</code> <a href="https://github.com/palantir/tslint-react" target="_blank" rel="noopener">https://github.com/palantir/tslint-react</a>  </p>
</blockquote>
<p>We have our own recommended config that you can easily add to your project thanks to <a href="https://github.com/piotrwitek/react-redux-typescript-scripts" target="_blank" rel="noopener"><code>react-redux-typescript-scripts</code></a> package.</p>
<h4 id="tslint-json"><a href="#tslint-json" class="headerlink" title="tslint.json"></a>tslint.json</h4><details><summary><i>Click to expand</i></summary><p>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;extends&quot;: [</span><br><span class="line">    &quot;react-redux-typescript-scripts&#x2F;tslint.json&quot;,</span><br><span class="line">    &quot;react-redux-typescript-scripts&#x2F;tslint-react.json&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;rules&quot;: &#123;</span><br><span class="line">    &#x2F;&#x2F; you can further customize options here</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</p></details>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h2 id="ESLint"><a href="#ESLint" class="headerlink" title="ESLint"></a>ESLint</h2><p><a href="https://eslint.org/" target="_blank" rel="noopener">https://eslint.org/</a><br><a href="https://typescript-eslint.io" target="_blank" rel="noopener">https://typescript-eslint.io</a></p>
<blockquote>
<p>Installation<br><code>npm i -D eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin</code></p>
</blockquote>
<p>We have our own recommended config that will automatically add a parser &amp; plugin for TypeScript thanks to <a href="https://github.com/piotrwitek/react-redux-typescript-scripts" target="_blank" rel="noopener"><code>react-redux-typescript-scripts</code></a> package.</p>
<h4 id="eslintrc"><a href="#eslintrc" class="headerlink" title=".eslintrc"></a>.eslintrc</h4><details><summary><i>Click to expand</i></summary><p>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;extends&quot;: [</span><br><span class="line">    &quot;react-app&quot;,</span><br><span class="line">    &quot;.&#x2F;node_modules&#x2F;react-redux-typescript-scripts&#x2F;eslint.js&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;rules&quot;: &#123;</span><br><span class="line">    &#x2F;&#x2F; you can further customize options here</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</p></details>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h2 id="Jest"><a href="#Jest" class="headerlink" title="Jest"></a>Jest</h2><p><a href="https://jestjs.io/" target="_blank" rel="noopener">https://jestjs.io/</a></p>
<blockquote>
<p>Installation<br><code>npm i -D jest ts-jest @types/jest</code></p>
</blockquote>
<h4 id="jest-config-json"><a href="#jest-config-json" class="headerlink" title="jest.config.json"></a>jest.config.json</h4><details><summary><i>Click to expand</i></summary><p>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;verbose&quot;: true,</span><br><span class="line">  &quot;transform&quot;: &#123;</span><br><span class="line">    &quot;.(ts|tsx)&quot;: &quot;ts-jest&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;testRegex&quot;: &quot;(&#x2F;spec&#x2F;.*|\\.(test|spec))\\.(ts|tsx|js)$&quot;,</span><br><span class="line">  &quot;moduleFileExtensions&quot;: [&quot;ts&quot;, &quot;tsx&quot;, &quot;js&quot;],</span><br><span class="line">  &quot;moduleNameMapper&quot;: &#123;</span><br><span class="line">    &quot;^Components&#x2F;(.*)&quot;: &quot;.&#x2F;src&#x2F;components&#x2F;$1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;globals&quot;: &#123;</span><br><span class="line">    &quot;window&quot;: &#123;&#125;,</span><br><span class="line">    &quot;ts-jest&quot;: &#123;</span><br><span class="line">      &quot;tsConfig&quot;: &quot;.&#x2F;tsconfig.json&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;setupFiles&quot;: [&quot;.&#x2F;jest.stubs.js&quot;],</span><br><span class="line">  &quot;testURL&quot;: &quot;http:&#x2F;&#x2F;localhost&#x2F;&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</p></details>

<h4 id="jest-stubs-js"><a href="#jest-stubs-js" class="headerlink" title="jest.stubs.js"></a>jest.stubs.js</h4><details><summary><i>Click to expand</i></summary><p>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Global&#x2F;Window object Stubs for Jest</span><br><span class="line">window.matchMedia &#x3D; window.matchMedia || function () &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    matches: false,</span><br><span class="line">    addListener: function () &#123; &#125;,</span><br><span class="line">    removeListener: function () &#123; &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">window.requestAnimationFrame &#x3D; function (callback) &#123;</span><br><span class="line">  setTimeout(callback);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">window.localStorage &#x3D; &#123;</span><br><span class="line">  getItem: function () &#123; &#125;,</span><br><span class="line">  setItem: function () &#123; &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Object.values &#x3D; () &#x3D;&gt; [];</span><br></pre></td></tr></table></figure>
</p></details>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h2 id="Style-Guide"><a href="#Style-Guide" class="headerlink" title="Style Guide"></a>Style Guide</h2><h3 id="“react-styleguidist”"><a href="#“react-styleguidist”" class="headerlink" title="“react-styleguidist”"></a><a href="https://github.com/styleguidist/react-styleguidist" target="_blank" rel="noopener">“react-styleguidist”</a></h3><p><a href="/playground/styleguide.config.js">⟩⟩⟩ styleguide.config.js</a>  </p>
<p><a href="https://piotrwitek.github.io/react-redux-typescript-guide/" target="_blank" rel="noopener">⟩⟩⟩ demo</a></p>
<p><a href="#table-of-contents">⇧ back to top</a></p>
<hr>
<h1 id="Recipes"><a href="#Recipes" class="headerlink" title="Recipes"></a>Recipes</h1><h3 id="General-Tips"><a href="#General-Tips" class="headerlink" title="General Tips"></a>General Tips</h3><h4 id="should-I-still-use-React-PropTypes-in-TS"><a href="#should-I-still-use-React-PropTypes-in-TS" class="headerlink" title="- should I still use React.PropTypes in TS?"></a>- should I still use React.PropTypes in TS?</h4><p>No. With TypeScript, using PropTypes is an unnecessary overhead. When declaring Props and State interfaces, you will get complete intellisense and design-time safety with static type checking. This way you’ll be safe from runtime errors and you will save a lot of time on debugging. Additional benefit is an elegant and standardized method of documenting your component public API in the source code.  </p>
<p><a href="#table-of-contents">⇧ back to top</a></p>
<h4 id="when-to-use-interface-declarations-and-when-type-aliases"><a href="#when-to-use-interface-declarations-and-when-type-aliases" class="headerlink" title="- when to use interface declarations and when type aliases?"></a>- when to use <code>interface</code> declarations and when <code>type</code> aliases?</h4><p>From practical side, using <code>interface</code> declaration will create an identity (interface name) in compiler errors, on the contrary <code>type</code> aliases doesn’t create an identity and will be unwinded to show all the properties and nested types it consists of.<br>Although I prefer to use <code>type</code> most of the time there are some places this can become too noisy when reading compiler errors and that’s why I like to leverage this distinction to hide some of not so important type details in errors using interfaces identity.<br>Related <code>ts-lint</code> rule: <a href="https://palantir.github.io/tslint/rules/interface-over-type-literal/" target="_blank" rel="noopener">https://palantir.github.io/tslint/rules/interface-over-type-literal/</a>  </p>
<p><a href="#table-of-contents">⇧ back to top</a></p>
<h4 id="what’s-better-default-or-named-exports"><a href="#what’s-better-default-or-named-exports" class="headerlink" title="- what’s better default or named exports?"></a>- what’s better default or named exports?</h4><p>A common flexible solution is to use module folder pattern, because you can leverage both named and default import when you see fit.<br>With this solution you’ll achieve better encapsulation and be able to safely refactor internal naming and folders structure without breaking your consumer code:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. create your component files (`select.tsx`) using default export in some folder:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// components/select.tsx</span></span><br><span class="line"><span class="keyword">const</span> Select: React.FC&lt;Props&gt; = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Select;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. in this folder create an `index.ts` file that will re-export components with named exports:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// components/index.ts</span></span><br><span class="line"><span class="keyword">export</span> &#123; <span class="keyword">default</span> <span class="keyword">as</span> Select &#125; <span class="keyword">from</span> <span class="string">'./select'</span>;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. now you can import your components in both ways, with named export (better encapsulation) or using default export (internal access):</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// containers/container.tsx</span></span><br><span class="line"><span class="keyword">import</span> &#123; Select &#125; <span class="keyword">from</span> <span class="string">'@src/components'</span>;</span><br><span class="line">or</span><br><span class="line"><span class="keyword">import</span> Select <span class="keyword">from</span> <span class="string">'@src/components/select'</span>;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h4 id="how-to-best-initialize-class-instance-or-static-properties"><a href="#how-to-best-initialize-class-instance-or-static-properties" class="headerlink" title="- how to best initialize class instance or static properties?"></a>- how to best initialize class instance or static properties?</h4><p>Prefered modern syntax is to use class Property Initializers  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class ClassCounterWithInitialCount extends React.Component&lt;Props, State&gt; &#123;</span><br><span class="line">  &#x2F;&#x2F; default props using Property Initializers</span><br><span class="line">  static defaultProps: DefaultProps &#x3D; &#123;</span><br><span class="line">    className: &#39;default-class&#39;,</span><br><span class="line">    initialCount: 0,</span><br><span class="line">  &#125;;</span><br><span class="line">  </span><br><span class="line">  &#x2F;&#x2F; initial state using Property Initializers</span><br><span class="line">  state: State &#x3D; &#123;</span><br><span class="line">    count: this.props.initialCount,</span><br><span class="line">  &#125;;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h4 id="how-to-best-declare-component-handler-functions"><a href="#how-to-best-declare-component-handler-functions" class="headerlink" title="- how to best declare component handler functions?"></a>- how to best declare component handler functions?</h4><p>Prefered modern syntax is to use Class Fields with arrow functions  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class ClassCounter extends React.Component&lt;Props, State&gt; &#123;</span><br><span class="line">&#x2F;&#x2F; handlers using Class Fields with arrow functions</span><br><span class="line">  handleIncrement &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    this.setState(&#123; count: this.state.count + 1 &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h3 id="Ambient-Modules-Tips"><a href="#Ambient-Modules-Tips" class="headerlink" title="Ambient Modules Tips"></a>Ambient Modules Tips</h3><h4 id="Imports-in-ambient-modules"><a href="#Imports-in-ambient-modules" class="headerlink" title="Imports in ambient modules"></a>Imports in ambient modules</h4><p>For type augmentation imports should stay outside of module declaration.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Operator &#125; <span class="keyword">from</span> <span class="string">'rxjs/Operator'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Observable &#125; <span class="keyword">from</span> <span class="string">'rxjs/Observable'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">module</span> 'rxjs/Subject' &#123;</span><br><span class="line">  <span class="keyword">interface</span> Subject&lt;T&gt; &#123;</span><br><span class="line">    lift&lt;R&gt;(operator: Operator&lt;T, R&gt;): Observable&lt;R&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>When creating 3rd party type-definitions all the imports should be kept inside the module decleration, otherwise it will be treated as augmentation and show error</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">module</span> "react-custom-scrollbars" &#123;</span><br><span class="line">    <span class="keyword">import</span> * <span class="keyword">as</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">interface</span> positionValues &#123;</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h3 id="Type-Definitions-Tips"><a href="#Type-Definitions-Tips" class="headerlink" title="Type-Definitions Tips"></a>Type-Definitions Tips</h3><h4 id="Missing-type-definitions-error"><a href="#Missing-type-definitions-error" class="headerlink" title="Missing type-definitions error"></a>Missing type-definitions error</h4><p>if you cannot find types for a third-party module you can provide your own types or disable type-checking for this module using <a href="https://github.com/Microsoft/TypeScript-Handbook/blob/master/pages/Modules.md#shorthand-ambient-modules" target="_blank" rel="noopener">Shorthand Ambient Modules</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; typings&#x2F;modules.d.ts</span><br><span class="line">declare module &#39;MyTypes&#39;;</span><br><span class="line">declare module &#39;react-test-renderer&#39;;</span><br></pre></td></tr></table></figure>

<h4 id="Using-custom-d-ts-files-for-npm-modules"><a href="#Using-custom-d-ts-files-for-npm-modules" class="headerlink" title="Using custom d.ts files for npm modules"></a>Using custom <code>d.ts</code> files for npm modules</h4><p>If you want to use an alternative (customized) type-definitions for some npm module (that usually comes with it’s own type-definitions), you can do it by adding an override in <code>paths</code> compiler option.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"compilerOptions"</span>: &#123;</span><br><span class="line">    <span class="string">"baseUrl"</span>: <span class="string">"."</span>,</span><br><span class="line">    <span class="string">"paths"</span>: &#123;</span><br><span class="line">      <span class="string">"redux"</span>: [<span class="string">"typings/redux"</span>], <span class="comment">// use an alternative type-definitions instead of the included one</span></span><br><span class="line">      ...</span><br><span class="line">    &#125;,</span><br><span class="line">    ...,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="#table-of-contents">⇧ back to top</a></p>
<h3 id="Type-Augmentation-Tips"><a href="#Type-Augmentation-Tips" class="headerlink" title="Type Augmentation Tips"></a>Type Augmentation Tips</h3><p>Strategies to fix issues coming from external type-definitions files (*.d.ts)</p>
<h4 id="Augmenting-library-internal-declarations-using-relative-import"><a href="#Augmenting-library-internal-declarations-using-relative-import" class="headerlink" title="Augmenting library internal declarations - using relative import"></a>Augmenting library internal declarations - using relative import</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// added missing autoFocus Prop on Input component in "antd@2.10.0" npm package</span></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">module</span> '../node_modules/antd/lib/input/Input' &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">interface</span> InputProps &#123;</span><br><span class="line">    autoFocus?: <span class="built_in">boolean</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Augmenting-library-public-declarations-using-node-modules-import"><a href="#Augmenting-library-public-declarations-using-node-modules-import" class="headerlink" title="Augmenting library public declarations - using node_modules import"></a>Augmenting library public declarations - using node_modules import</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fixed broken public type-definitions in "rxjs@5.4.1" npm package</span></span><br><span class="line"><span class="keyword">import</span> &#123; Operator &#125; <span class="keyword">from</span> <span class="string">'rxjs/Operator'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Observable &#125; <span class="keyword">from</span> <span class="string">'rxjs/Observable'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">module</span> 'rxjs/Subject' &#123;</span><br><span class="line">  <span class="keyword">interface</span> Subject&lt;T&gt; &#123;</span><br><span class="line">    lift&lt;R&gt;(operator: Operator&lt;T, R&gt;): Observable&lt;R&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>More advanced scenarios for working with vendor type-definitions can be found here <a href="https://github.com/Microsoft/TypeScript-Handbook/blob/master/pages/Modules.md#working-with-other-javascript-libraries" target="_blank" rel="noopener">Official TypeScript Docs</a></p>
</blockquote>
<p><a href="#table-of-contents">⇧ back to top</a></p>
<hr>
<h2 id="Tutorials-amp-Articles"><a href="#Tutorials-amp-Articles" class="headerlink" title="Tutorials &amp; Articles"></a>Tutorials &amp; Articles</h2><blockquote>
<p>Curated list of relevant in-depth tutorials</p>
</blockquote>
<p>Higher-Order Components:</p>
<ul>
<li><a href="https://medium.com/@jrwebdev/react-higher-order-component-patterns-in-typescript-42278f7590fb" target="_blank" rel="noopener">https://medium.com/@jrwebdev/react-higher-order-component-patterns-in-typescript-42278f7590fb</a></li>
</ul>
<p><a href="#table-of-contents">⇧ back to top</a></p>
<hr>
<h2 id="Contributors"><a href="#Contributors" class="headerlink" title="Contributors"></a>Contributors</h2><p>Thanks goes to these wonderful people (<a href="https://github.com/kentcdodds/all-contributors#emoji-key" target="_blank" rel="noopener">emoji key</a>):</p>
<!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section -->
<!-- prettier-ignore -->
<table>
<thead>
<tr>
<th align="center"><a href="https://github.com/piotrwitek" target="_blank" rel="noopener"><img src="https://avatars0.githubusercontent.com/u/739075?v=4" width="100px;"/><br /><sub><b>Piotrek Witek</b></sub></a><br /><a href="https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=piotrwitek" target="_blank" rel="noopener" title="Code">💻</a> <a href="https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=piotrwitek" target="_blank" rel="noopener" title="Documentation">📖</a> <a href="#ideas-piotrwitek" title="Ideas, Planning, &amp; Feedback">🤔</a> <a href="#review-piotrwitek" title="Reviewed Pull Requests">👀</a> <a href="#question-piotrwitek" title="Answering Questions">💬</a></th>
<th align="center"><a href="https://github.com/kazup01" target="_blank" rel="noopener"><img src="https://avatars3.githubusercontent.com/u/8602615?v=4" width="100px;"/><br /><sub><b>Kazz Yokomizo</b></sub></a><br /><a href="#financial-kazup01" title="Financial">💵</a> <a href="#fundingFinding-kazup01" title="Funding Finding">🔍</a></th>
<th align="center"><a href="https://github.com/jakeboone02" target="_blank" rel="noopener"><img src="https://avatars1.githubusercontent.com/u/366438?v=4" width="100px;"/><br /><sub><b>Jake Boone</b></sub></a><br /><a href="https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=jakeboone02" target="_blank" rel="noopener" title="Documentation">📖</a></th>
<th align="center"><a href="https://github.com/amitdahan" target="_blank" rel="noopener"><img src="https://avatars1.githubusercontent.com/u/9748762?v=4" width="100px;"/><br /><sub><b>Amit Dahan</b></sub></a><br /><a href="https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=amitdahan" target="_blank" rel="noopener" title="Documentation">📖</a></th>
<th align="center"><a href="https://github.com/gulderov" target="_blank" rel="noopener"><img src="https://avatars1.githubusercontent.com/u/98167?v=4" width="100px;"/><br /><sub><b>gulderov</b></sub></a><br /><a href="https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=gulderov" target="_blank" rel="noopener" title="Documentation">📖</a></th>
<th align="center"><a href="https://github.com/emp823" target="_blank" rel="noopener"><img src="https://avatars1.githubusercontent.com/u/1964212?v=4" width="100px;"/><br /><sub><b>Erik Pearson</b></sub></a><br /><a href="https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=emp823" target="_blank" rel="noopener" title="Documentation">📖</a></th>
<th align="center"><a href="https://github.com/flymason" target="_blank" rel="noopener"><img src="https://avatars1.githubusercontent.com/u/5342677?v=4" width="100px;"/><br /><sub><b>Bryan Mason</b></sub></a><br /><a href="https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=flymason" target="_blank" rel="noopener" title="Documentation">📖</a></th>
</tr>
</thead>
<tbody><tr>
<td align="center"><a href="http://www.jakub.chodorowicz.pl/" target="_blank" rel="noopener"><img src="https://avatars1.githubusercontent.com/u/119451?v=4" width="100px;"/><br /><sub><b>Jakub Chodorowicz</b></sub></a><br /><a href="https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=chodorowicz" target="_blank" rel="noopener" title="Code">💻</a></td>
<td align="center"><a href="https://github.com/mleg" target="_blank" rel="noopener"><img src="https://avatars1.githubusercontent.com/u/7266431?v=4" width="100px;"/><br /><sub><b>Oleg Maslov</b></sub></a><br /><a href="https://github.com/piotrwitek/react-redux-typescript-guide/issues?q=author%3Amleg" target="_blank" rel="noopener" title="Bug reports">🐛</a></td>
<td align="center"><a href="https://github.com/awestbro" target="_blank" rel="noopener"><img src="https://avatars0.githubusercontent.com/u/3393293?v=4" width="100px;"/><br /><sub><b>Aaron Westbrook</b></sub></a><br /><a href="https://github.com/piotrwitek/react-redux-typescript-guide/issues?q=author%3Aawestbro" target="_blank" rel="noopener" title="Bug reports">🐛</a></td>
<td align="center"><a href="http://www.linkedin.com/in/peterblazejewicz" target="_blank" rel="noopener"><img src="https://avatars3.githubusercontent.com/u/14539?v=4" width="100px;"/><br /><sub><b>Peter Blazejewicz</b></sub></a><br /><a href="https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=peterblazejewicz" target="_blank" rel="noopener" title="Documentation">📖</a></td>
<td align="center"><a href="https://github.com/rubysolo" target="_blank" rel="noopener"><img src="https://avatars3.githubusercontent.com/u/1642?v=4" width="100px;"/><br /><sub><b>Solomon White</b></sub></a><br /><a href="https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=rubysolo" target="_blank" rel="noopener" title="Documentation">📖</a></td>
<td align="center"><a href="https://github.com/pino" target="_blank" rel="noopener"><img src="https://avatars2.githubusercontent.com/u/8838006?v=4" width="100px;"/><br /><sub><b>Levi Rocha</b></sub></a><br /><a href="https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=pino" target="_blank" rel="noopener" title="Documentation">📖</a></td>
<td align="center"><a href="http://cloudnative.co.jp" target="_blank" rel="noopener"><img src="https://avatars1.githubusercontent.com/u/41281835?v=4" width="100px;"/><br /><sub><b>Sudachi-kun</b></sub></a><br /><a href="#financial-loadbalance-sudachi-kun" title="Financial">💵</a></td>
</tr>
<tr>
<td align="center"><a href="http://sosukesuzuki.github.io" target="_blank" rel="noopener"><img src="https://avatars1.githubusercontent.com/u/14838850?v=4" width="100px;"/><br /><sub><b>Sosuke Suzuki</b></sub></a><br /><a href="https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=sosukesuzuki" target="_blank" rel="noopener" title="Code">💻</a></td>
<td align="center"><a href="https://github.com/chillitom" target="_blank" rel="noopener"><img src="https://avatars0.githubusercontent.com/u/74433?v=4" width="100px;"/><br /><sub><b>Tom Rathbone</b></sub></a><br /><a href="https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=chillitom" target="_blank" rel="noopener" title="Documentation">📖</a></td>
<td align="center"><a href="https://arshadkazmi42.github.io/" target="_blank" rel="noopener"><img src="https://avatars3.githubusercontent.com/u/4654382?v=4" width="100px;"/><br /><sub><b>Arshad Kazmi</b></sub></a><br /><a href="https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=arshadkazmi42" target="_blank" rel="noopener" title="Documentation">📖</a></td>
<td align="center"><a href="https://jeongukjae.github.io" target="_blank" rel="noopener"><img src="https://avatars1.githubusercontent.com/u/8815362?v=4" width="100px;"/><br /><sub><b>JeongUkJae</b></sub></a><br /><a href="https://github.com/piotrwitek/react-redux-typescript-guide/commits?author=JeongUkJae" target="_blank" rel="noopener" title="Documentation">📖</a></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><!-- ALL-CONTRIBUTORS-LIST:END --></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<p>This project follows the <a href="https://github.com/kentcdodds/all-contributors" target="_blank" rel="noopener">all-contributors</a> specification. Contributions of any kind welcome!</p>
<hr>
<p>MIT License</p>
<p>Copyright (c) 2017 Piotr Witek <a href="mailto:&#x70;&#105;&#111;&#x74;&#x72;&#x65;&#x6b;&#46;&#119;&#x69;&#116;&#101;&#107;&#x40;&#x67;&#109;&#x61;&#105;&#108;&#x2e;&#99;&#x6f;&#x6d;">&#x70;&#105;&#111;&#x74;&#x72;&#x65;&#x6b;&#46;&#119;&#x69;&#116;&#101;&#107;&#x40;&#x67;&#109;&#x61;&#105;&#108;&#x2e;&#99;&#x6f;&#x6d;</a> (<a href="http://piotrwitek.github.io" target="_blank" rel="noopener">http://piotrwitek.github.io</a>)</p>

        </div>
        
          


  <section class='meta' id="footer-meta">
    <hr>
    <div class='new-meta-box'>
      
        
          <div class="new-meta-item date" itemprop="dateUpdated" datetime="2019-09-06T14:15:25+08:00">
  <a class='notlink'>
    <i class="fas fa-clock" aria-hidden="true"></i>
    <p>最后更新于 2019年9月6日</p>
  </a>
</div>

        
      
        
          
  
  <div class="new-meta-item meta-tags"><a class="tag" href="/tags/typescript/" rel="nofollow"><i class="fas fa-hashtag" aria-hidden="true"></i>&nbsp;<p>typescript</p></a></div> <div class="new-meta-item meta-tags"><a class="tag" href="/tags/react/" rel="nofollow"><i class="fas fa-hashtag" aria-hidden="true"></i>&nbsp;<p>react</p></a></div>


        
      
        
          
  <div class="new-meta-item share -mob-share-list">
  <div class="-mob-share-list share-body">
    
      
        <a class="-mob-share-qq" title="QQ好友" rel="external nofollow noopener noreferrer"
          
          href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.xiaoz.site/2019/05/16/doc/ReactReduxInTypeScript/&title=React & Redux in TypeScript | xiaOz's blog&summary=xiaOz的翻译计划第一波！计划中，先慢慢来哈🤣，近期开始更新"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/assets@19.1.9/logo/128/qq.png">
          
        </a>
      
    
      
        <a class="-mob-share-qzone" title="QQ空间" rel="external nofollow noopener noreferrer"
          
          href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://blog.xiaoz.site/2019/05/16/doc/ReactReduxInTypeScript/&title=React & Redux in TypeScript | xiaOz's blog&summary=xiaOz的翻译计划第一波！计划中，先慢慢来哈🤣，近期开始更新"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/assets@19.1.9/logo/128/qzone.png">
          
        </a>
      
    
      
        <a class="-mob-share-weibo" title="微博" rel="external nofollow noopener noreferrer"
          
          href="http://service.weibo.com/share/share.php?url=https://blog.xiaoz.site/2019/05/16/doc/ReactReduxInTypeScript/&title=React & Redux in TypeScript | xiaOz's blog&summary=xiaOz的翻译计划第一波！计划中，先慢慢来哈🤣，近期开始更新"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/assets@19.1.9/logo/128/weibo.png">
          
        </a>
      
    
  </div>
</div>



        
      
    </div>
  </section>


        
        
            <div class="prev-next">
                
                    <section class="prev">
                        <span class="art-item-left">
                            <h6><i class="fas fa-chevron-left" aria-hidden="true"></i>&nbsp;上一页</h6>
                            <h4>
                                <a href="/2019/05/16/learn-ts5/" rel="prev" title="typescript学习(5) 泛型">
                                  
                                      typescript学习(5) 泛型
                                  
                                </a>
                            </h4>
                            
                                
                                <h6 class="tags">
                                    <a class="tag" href="/tags/typescript/"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i>typescript</a>
                                </h6>
                            
                        </span>
                    </section>
                
                
                    <section class="next">
                        <span class="art-item-right" aria-hidden="true">
                            <h6>下一页&nbsp;<i class="fas fa-chevron-right" aria-hidden="true"></i></h6>
                            <h4>
                                <a href="/2019/05/12/learn-ts4/" rel="prev" title="typescript学习(4) 函数">
                                    
                                        typescript学习(4) 函数
                                    
                                </a>
                            </h4>
                            
                                
                                <h6 class="tags">
                                    <a class="tag" href="/tags/typescript/"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i>typescript</a>
                                </h6>
                            
                        </span>
                    </section>
                
            </div>
        
      </section>
    </article>
  

  
    <!-- 显示推荐文章和评论 -->



  <article class="post white-box comments">
    <section class="article typo">
      <h4><i class="fas fa-comments fa-fw" aria-hidden="true"></i>&nbsp;评论</h4>
      
      
      
        <section id="comments">
          <div id="gitalk-container"></div>
        </section>
      
      
    </section>
  </article>


  




<!-- 根据页面mathjax变量决定是否加载MathJax数学公式js -->



  <script>
    window.subData = {
      title: 'React & Redux in TypeScript',
      tools: true
    }
  </script>


</div>
<aside class='l_side'>
  
    
    
      
        
          
          
            <section class='widget author'>
  <div class='content pure'>
    
      <div class='avatar'>
        <img class='avatar' src='https://avatars0.githubusercontent.com/u/15631279?s=460&v=4'/>
      </div>
    
    
    
      <div class="social-wrapper">
        
          
            <a href="/"
              class="social fas fa-rss flat-btn"
              target="_blank"
              rel="external nofollow noopener noreferrer">
            </a>
          
        
          
            <a href="mailto:420628272@qq.com"
              class="social fas fa-envelope flat-btn"
              target="_blank"
              rel="external nofollow noopener noreferrer">
            </a>
          
        
          
            <a href="https://github.com/GYxiaOZ"
              class="social fab fa-github flat-btn"
              target="_blank"
              rel="external nofollow noopener noreferrer">
            </a>
          
        
          
            <a href="https://music.163.com/#/user/home?id=65956823"
              class="social fas fa-headphones-alt flat-btn"
              target="_blank"
              rel="external nofollow noopener noreferrer">
            </a>
          
        
      </div>
    
  </div>
</section>

          
        
      
        
          
          
            
  <section class='widget toc-wrapper'>
    
<header class='pure'>
  <div><i class="fas fa-list fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;本文目录</div>
  
    <div class='wrapper'><a class="s-toc rightBtn" rel="external nofollow noopener noreferrer" href="javascript:void(0)"><i class="fas fa-thumbtack fa-fw"></i></a></div>
  
</header>

    <div class='content pure'>
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#React-amp-Redux-in-TypeScript-Static-Typing-Guide"><span class="toc-text">React &amp; Redux in TypeScript - Static Typing Guide</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Contributing-Guide"><span class="toc-text">Contributing Guide</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Funding"><span class="toc-text">Funding</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Table-of-Contents"><span class="toc-text">Table of Contents</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Installation"><span class="toc-text">Installation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Type-Definitions-for-React-amp-Redux"><span class="toc-text">Type-Definitions for React &amp; Redux</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#React-Type-Definitions-Cheatsheet"><span class="toc-text">React - Type-Definitions Cheatsheet</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#React-FunctionComponent-lt-P-gt-or-React-FC-lt-P-gt"><span class="toc-text">React.FunctionComponent&lt;P&gt; or React.FC&lt;P&gt;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#React-Component-lt-P-S-gt"><span class="toc-text">React.Component&lt;P, S&gt;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#React-ComponentProps-lt-typeof-Component-gt"><span class="toc-text">React.ComponentProps&lt;typeof Component&gt;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#React-ComponentType-lt-P-gt"><span class="toc-text">React.ComponentType&lt;P&gt;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#React-ReactElement-or-JSX-Element"><span class="toc-text">React.ReactElement or JSX.Element</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#React-ReactNode"><span class="toc-text">React.ReactNode</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#React-CSSProperties"><span class="toc-text">React.CSSProperties</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#React-ReactEventHandler-lt-E-gt"><span class="toc-text">React.ReactEventHandler&lt;E&gt;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#React-MouseEvent-lt-E-gt-React-KeyboardEvent-lt-E-gt-React-TouchEvent-lt-E-gt-etc…"><span class="toc-text">React.MouseEvent&lt;E&gt; | React.KeyboardEvent&lt;E&gt; | React.TouchEvent&lt;E&gt; etc…</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#React-Typing-Patterns"><span class="toc-text">React - Typing Patterns</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Function-Components-FC"><span class="toc-text">Function Components - FC</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#FC-counter"><span class="toc-text">- FC counter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#spread-attributes-link"><span class="toc-text">- spread attributes link</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Class-Components"><span class="toc-text">Class Components</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#class-counter"><span class="toc-text">- class counter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#with-default-props"><span class="toc-text">- with default props</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Generic-Components"><span class="toc-text">Generic Components</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#generic-list"><span class="toc-text">- generic list</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Render-Props"><span class="toc-text">Render Props</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#name-provider"><span class="toc-text">- name provider</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mouse-provider"><span class="toc-text">- mouse provider</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Higher-Order-Components"><span class="toc-text">Higher-Order Components</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#withState"><span class="toc-text">- withState</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#withErrorBoundary"><span class="toc-text">- withErrorBoundary</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redux-Connected-Components"><span class="toc-text">Redux Connected Components</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#redux-connected-counter"><span class="toc-text">- redux connected counter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#redux-connected-counter-with-own-props"><span class="toc-text">- redux connected counter with own props</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#redux-connected-counter-with-redux-thunk-integration"><span class="toc-text">- redux connected counter with redux-thunk integration</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Context"><span class="toc-text">Context</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ThemeContext"><span class="toc-text">ThemeContext</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ThemeProvider"><span class="toc-text">ThemeProvider</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ThemeConsumer"><span class="toc-text">ThemeConsumer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ThemeConsumer-in-class-component"><span class="toc-text">ThemeConsumer in class component</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Hooks"><span class="toc-text">Hooks</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#useState"><span class="toc-text">- useState</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#useReducer"><span class="toc-text">- useReducer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#useContext"><span class="toc-text">- useContext</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Redux-Typing-Patterns"><span class="toc-text">Redux - Typing Patterns</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Store-Configuration"><span class="toc-text">Store Configuration</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-Global-RootState-and-RootAction-Types"><span class="toc-text">Create Global RootState and RootAction Types</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#RootState-type-representing-root-state-tree"><span class="toc-text">RootState - type representing root state-tree</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RootAction-type-representing-union-type-of-all-action-objects"><span class="toc-text">RootAction - type representing union type of all action objects</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-Store"><span class="toc-text">Create Store</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Action-Creators"><span class="toc-text">Action Creators</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reducers"><span class="toc-text">Reducers</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#State-with-Type-level-Immutability"><span class="toc-text">State with Type-level Immutability</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Caveat-Readonly-is-not-recursive"><span class="toc-text">Caveat - Readonly is not recursive</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Solution-recursive-Readonly-is-called-DeepReadonly"><span class="toc-text">Solution - recursive Readonly is called DeepReadonly</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Typing-reducer"><span class="toc-text">Typing reducer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Typing-reducer-with-typesafe-actions"><span class="toc-text">Typing reducer with typesafe-actions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Testing-reducer"><span class="toc-text">Testing reducer</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Async-Flow-with-redux-observable"><span class="toc-text">Async Flow with redux-observable</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Typing-epics"><span class="toc-text">Typing epics</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Testing-epics"><span class="toc-text">Testing epics</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Selectors-with-reselect"><span class="toc-text">Selectors with reselect</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Connect-with-react-redux"><span class="toc-text">Connect with react-redux</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Typing-connected-component"><span class="toc-text">Typing connected component</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Typing-connected-component-using-redux-thunk-action-creators"><span class="toc-text">Typing connected component using redux-thunk action creators</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Configuration-amp-Dev-Tools"><span class="toc-text">Configuration &amp; Dev Tools</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Common-Npm-Scripts"><span class="toc-text">Common Npm Scripts</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#TypeScript"><span class="toc-text">TypeScript</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#tsconfig-json"><span class="toc-text">tsconfig.json</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TSLib"><span class="toc-text">TSLib</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TSLint"><span class="toc-text">TSLint</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#tslint-json"><span class="toc-text">tslint.json</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ESLint"><span class="toc-text">ESLint</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#eslintrc"><span class="toc-text">.eslintrc</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Jest"><span class="toc-text">Jest</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#jest-config-json"><span class="toc-text">jest.config.json</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jest-stubs-js"><span class="toc-text">jest.stubs.js</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Style-Guide"><span class="toc-text">Style Guide</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#“react-styleguidist”"><span class="toc-text">“react-styleguidist”</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Recipes"><span class="toc-text">Recipes</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#General-Tips"><span class="toc-text">General Tips</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#should-I-still-use-React-PropTypes-in-TS"><span class="toc-text">- should I still use React.PropTypes in TS?</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#when-to-use-interface-declarations-and-when-type-aliases"><span class="toc-text">- when to use interface declarations and when type aliases?</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#what’s-better-default-or-named-exports"><span class="toc-text">- what’s better default or named exports?</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#how-to-best-initialize-class-instance-or-static-properties"><span class="toc-text">- how to best initialize class instance or static properties?</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#how-to-best-declare-component-handler-functions"><span class="toc-text">- how to best declare component handler functions?</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Ambient-Modules-Tips"><span class="toc-text">Ambient Modules Tips</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Imports-in-ambient-modules"><span class="toc-text">Imports in ambient modules</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Type-Definitions-Tips"><span class="toc-text">Type-Definitions Tips</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Missing-type-definitions-error"><span class="toc-text">Missing type-definitions error</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Using-custom-d-ts-files-for-npm-modules"><span class="toc-text">Using custom d.ts files for npm modules</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Type-Augmentation-Tips"><span class="toc-text">Type Augmentation Tips</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Augmenting-library-internal-declarations-using-relative-import"><span class="toc-text">Augmenting library internal declarations - using relative import</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Augmenting-library-public-declarations-using-node-modules-import"><span class="toc-text">Augmenting library public declarations - using node_modules import</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Tutorials-amp-Articles"><span class="toc-text">Tutorials &amp; Articles</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Contributors"><span class="toc-text">Contributors</span></a></li></ol>
    </div>
  </section>


          
        
      
        
          
          
            <section class='widget grid'>
  
<header class='pure'>
  <div><i class="fas fa-map-signs fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;站内导航</div>
  
</header>

  <div class='content pure'>
    <ul class="grid navgation">
      
        <li><a class="flat-box" title="/" href="/"
          
          
          id="home">
          
            <i class="fas fa-clock fa-fw" aria-hidden="true"></i>
          
          近期文章
        </a></li>
      
        <li><a class="flat-box" title="/archives/" href="/archives/"
          
            rel="nofollow"
          
          
          id="archives">
          
            <i class="fas fa-archive fa-fw" aria-hidden="true"></i>
          
          文章归档
        </a></li>
      
        <li><a class="flat-box" title="/about/" href="/about/"
          
            rel="nofollow"
          
          
          id="about">
          
            <i class="fas fa-info-circle fa-fw" aria-hidden="true"></i>
          
          关于小站
        </a></li>
      
    </ul>
  </div>
</section>

          
        
      
        
          
          
            
  <section class='widget category'>
    
<header class='pure'>
  <div><i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;文章分类</div>
  
    <a class="rightBtn"
    
      rel="nofollow"
    
    
    href="/categories/"
    title="categories/">
    <i class="fas fa-expand-arrows-alt fa-fw"></i></a>
  
</header>

    <div class='content pure'>
      <ul class="entry">
        
          <li><a class="flat-box" title="/categories/css/" href="/categories/css/"><div class='name'>css</div><div class='badge'>(1)</div></a></li>
        
          <li><a class="flat-box" title="/categories/learn/" href="/categories/learn/"><div class='name'>learn</div><div class='badge'>(3)</div></a></li>
        
          <li><a class="flat-box" title="/categories/work/" href="/categories/work/"><div class='name'>work</div><div class='badge'>(2)</div></a></li>
        
          <li><a class="flat-box" title="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><div class='name'>学习笔记</div><div class='badge'>(7)</div></a></li>
        
          <li><a class="flat-box child" title="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/typescript/" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/typescript/"><div class='name'>typescript</div><div class='badge'>(7)</div></a></li>
        
          <li><a class="flat-box" title="/categories/%E6%96%87%E6%A1%A3/" href="/categories/%E6%96%87%E6%A1%A3/"><div class='name'>文档</div><div class='badge'>(1)</div></a></li>
        
      </ul>
    </div>
  </section>


          
        
      
        
          
          
            
  <section class='widget tagcloud'>
    
<header class='pure'>
  <div><i class="fas fa-fire fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;热门标签</div>
  
    <a class="rightBtn"
    
      rel="nofollow"
    
    
    href="/tags/"
    title="tags/">
    <i class="fas fa-expand-arrows-alt fa-fw"></i></a>
  
</header>

    <div class='content pure'>
      <a href="/tags/react/" style="font-size: 14px; color: #999">react</a> <a href="/tags/tips/" style="font-size: 19px; color: #777">tips</a> <a href="/tags/typescript/" style="font-size: 24px; color: #555">typescript</a>
    </div>
  </section>


          
        
      
        
          
          
            


  <section class='widget music'>
    
<header class='pure'>
  <div><i class="fas fa-compact-disc fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;最近在听</div>
  
    <a class="rightBtn"
    
      rel="external nofollow noopener noreferrer"
    
    
      target="_blank"
    
    href="https://music.163.com/#/user/home?id=65956823"
    title="https://music.163.com/#/user/home?id=65956823">
    <i class="far fa-heart fa-fw"></i></a>
  
</header>

    <div class='content pure'>
      
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.7.0/dist/APlayer.min.css">
  <div class="aplayer"
    data-theme="#70a1ff"
    
    
    data-mode="circulation"
    data-server="netease"
    data-type="playlist"
    data-id="68981709"
    data-volume="0.7">
  </div>
  <script src="https://cdn.jsdelivr.net/npm/aplayer@1.7.0/dist/APlayer.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/meting@1.1.0/dist/Meting.min.js"></script>


    </div>
  </section>


          
        
      
    

  
</aside>

<footer id="footer" class="clearfix">
  
  
    <div class="social-wrapper">
      
        
          <a href="/"
            class="social fas fa-rss flat-btn"
            target="_blank"
            rel="external nofollow noopener noreferrer">
          </a>
        
      
        
          <a href="mailto:420628272@qq.com"
            class="social fas fa-envelope flat-btn"
            target="_blank"
            rel="external nofollow noopener noreferrer">
          </a>
        
      
        
          <a href="https://github.com/GYxiaOZ"
            class="social fab fa-github flat-btn"
            target="_blank"
            rel="external nofollow noopener noreferrer">
          </a>
        
      
        
          <a href="https://music.163.com/#/user/home?id=65956823"
            class="social fas fa-headphones-alt flat-btn"
            target="_blank"
            rel="external nofollow noopener noreferrer">
          </a>
        
      
    </div>
  
  <br>
  <div><p>博客内容遵循 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener">署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</a></p>
</div>
  <div>
    本站使用
    <a href="https://xaoxuu.com/wiki/material-x/" target="_blank" class="codename">Material X</a>
    作为主题
    
      ，
      总访问量为
      <span id="busuanzi_value_site_pv"><i class="fas fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span>
      次
    
    。
  </div>
</footer>
<script>setLoadingBarProgress(80);</script>


      <script>setLoadingBarProgress(60);</script>
    </div>
    <a class="s-top fas fa-arrow-up fa-fw" href='javascript:void(0)'></a>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>

  <script>
    var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
    var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
    var ALGOLIA_API_KEY = "";
    var ALGOLIA_APP_ID = "";
    var ALGOLIA_INDEX_NAME = "";
    var AZURE_SERVICE_NAME = "";
    var AZURE_INDEX_NAME = "";
    var AZURE_QUERY_KEY = "";
    var BAIDU_API_ID = "";
    var SEARCH_SERVICE = "hexo" || "hexo";
    var ROOT = "/"||"/";
    if(!ROOT.endsWith('/'))ROOT += '/';
  </script>

<script src="//instant.page/1.2.2" type="module" integrity="sha384-2xV8M5griQmzyiY3CDqh1dn4z3llDVqZDqzjzcY+jCBCk/a5fXJmuZ/40JJAPeoU"></script>


  <script async src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.5/dist/scrollreveal.min.js"></script>
  <script type="text/javascript">
    $(function() {
      const $reveal = $('.reveal');
      if ($reveal.length === 0) return;
      const sr = ScrollReveal({ distance: 0 });
      sr.reveal('.reveal');
    });
  </script>


  <script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script>
  <script type="text/javascript">
    $(function() {
      Waves.attach('.flat-btn', ['waves-button']);
      Waves.attach('.float-btn', ['waves-button', 'waves-float']);
      Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
      Waves.attach('.flat-box', ['waves-block']);
      Waves.attach('.float-box', ['waves-block', 'waves-float']);
      Waves.attach('.waves-image');
      Waves.init();
    });
  </script>


  <script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js"></script>










  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
  <script type="text/javascript">
    var gitalk = new Gitalk({
      clientID: "b47f7f87ab36b5710ada",
      clientSecret: "6505e07454b9a8a14369a514bf78ea33c69dba95",
      repo: "zzx-blog-source",
      owner: "GYxiaOZ",
      admin: "GYxiaOZ",
      
        id: location.pathname,      // Ensure uniqueness and length less than 50
      
      distractionFreeMode: false  // Facebook-like distraction free mode
    });
    gitalk.render('gitalk-container');
  </script>





  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-material-x@19.4.19/js/app.js"></script>



  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-material-x@19.4.19/js/search.js"></script>





<!-- 复制 -->
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  let COPY_SUCCESS = "复制成功";
  let COPY_FAILURE = "复制失败";
  /*页面载入完成后，创建复制按钮*/
  !function (e, t, a) {
    /* code */
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '  <i class="fa fa-copy"></i><span>复制</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });

      clipboard.on('success', function(e) {
        //您可以加入成功提示
        console.info('Action:', e.action);
        console.info('Text:', e.text);
        console.info('Trigger:', e.trigger);
        success_prompt(COPY_SUCCESS);
        e.clearSelection();
      });
      clipboard.on('error', function(e) {
        //您可以加入失败提示
        console.error('Action:', e.action);
        console.error('Trigger:', e.trigger);
        fail_prompt(COPY_FAILURE);
      });
    }
    initCopyCode();

  }(window, document);

  /**
   * 弹出式提示框，默认1.5秒自动消失
   * @param message 提示信息
   * @param style 提示样式，有alert-success、alert-danger、alert-warning、alert-info
   * @param time 消失时间
   */
  var prompt = function (message, style, time)
  {
      style = (style === undefined) ? 'alert-success' : style;
      time = (time === undefined) ? 1500 : time*1000;
      $('<div>')
          .appendTo('body')
          .addClass('alert ' + style)
          .html(message)
          .show()
          .delay(time)
          .fadeOut();
  };

  // 成功提示
  var success_prompt = function(message, time)
  {
      prompt(message, 'alert-success', time);
  };

  // 失败提示
  var fail_prompt = function(message, time)
  {
      prompt(message, 'alert-danger', time);
  };

  // 提醒
  var warning_prompt = function(message, time)
  {
      prompt(message, 'alert-warning', time);
  };

  // 信息提示
  var info_prompt = function(message, time)
  {
      prompt(message, 'alert-info', time);
  };

</script>


<!-- fancybox -->
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script>
  let LAZY_LOAD_IMAGE = "";
  $(".article-entry").find("fancybox").find("img").each(function () {
      var element = document.createElement("a");
      $(element).attr("data-fancybox", "gallery");
      $(element).attr("href", $(this).attr("src"));
      /* 图片采用懒加载处理时,
       * 一般图片标签内会有个属性名来存放图片的真实地址，比如 data-original,
       * 那么此处将原本的属性名src替换为对应属性名data-original,
       * 修改如下
       */
       if (LAZY_LOAD_IMAGE) {
         $(element).attr("href", $(this).attr("data-original"));
       }
      $(this).wrap(element);
  });
</script>





  <script>setLoadingBarProgress(100);</script>
  <script type="text/javascript"
      color="100,100,100" opacity='0.7' zIndex="-2" count="250" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
  </script>
<script src="https://cdn.jsdelivr.net/npm/live2d-widget@^3.1.3/lib/L2Dwidget.min.js"></script><script>L2Dwidget.init({"tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/"});</script></body>
</html>
